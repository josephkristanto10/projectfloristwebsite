{
    "sourceFile": "app/Http/Controllers/CartController.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 206,
            "patches": [
                {
                    "date": 1719133258940,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1719133273137,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,9 +14,11 @@\n     public function index()\n     {\n         //\n     }\n-   \n+    public function listcart(){\n+        \n+    }\n     /**\n      * Show the form for creating a new resource.\n      *\n      * @return \\Illuminate\\Http\\Response\n"
                },
                {
                    "date": 1719133335676,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,8 +2,9 @@\n \n namespace App\\Http\\Controllers;\n \n use Illuminate\\Http\\Request;\n+use Session;\n \n class CartController extends Controller\n {\n     /**\n@@ -15,9 +16,9 @@\n     {\n         //\n     }\n     public function listcart(){\n-        \n+        Session()\n     }\n     /**\n      * Show the form for creating a new resource.\n      *\n"
                },
                {
                    "date": 1719133348865,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,9 +16,9 @@\n     {\n         //\n     }\n     public function listcart(){\n-        Session()\n+        return Session::all();\n     }\n     /**\n      * Show the form for creating a new resource.\n      *\n"
                },
                {
                    "date": 1719133380122,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,12 +13,13 @@\n      * @return \\Illuminate\\Http\\Response\n      */\n     public function index()\n     {\n-        //\n+        $mycart = Session::all()\n+        return $mycart;\n     }\n     public function listcart(){\n-        return Session::all();\n+        \n     }\n     /**\n      * Show the form for creating a new resource.\n      *\n"
                },
                {
                    "date": 1719133399498,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,10 +13,10 @@\n      * @return \\Illuminate\\Http\\Response\n      */\n     public function index()\n     {\n-        $mycart = Session::all()\n-        return $mycart;\n+        $mycart = Session::all();\n+        return view() $mycart;\n     }\n     public function listcart(){\n         \n     }\n"
                },
                {
                    "date": 1719133419320,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,9 +14,9 @@\n      */\n     public function index()\n     {\n         $mycart = Session::all();\n-        return view() $mycart;\n+        return view(\"cart\",compact('mycart'));\n     }\n     public function listcart(){\n         \n     }\n"
                },
                {
                    "date": 1719133569766,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,8 +13,9 @@\n      * @return \\Illuminate\\Http\\Response\n      */\n     public function index()\n     {\n+        $mycart = \"\";\n         $mycart = Session::all();\n         return view(\"cart\",compact('mycart'));\n     }\n     public function listcart(){\n"
                },
                {
                    "date": 1719133608339,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,8 +14,11 @@\n      */\n     public function index()\n     {\n         $mycart = \"\";\n+        if(Session::get('product')){\n+            \n+        }\n         $mycart = Session::all();\n         return view(\"cart\",compact('mycart'));\n     }\n     public function listcart(){\n"
                },
                {
                    "date": 1719133619507,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,13 +13,13 @@\n      * @return \\Illuminate\\Http\\Response\n      */\n     public function index()\n     {\n-        $mycart = \"\";\n+        $mycart = \"tidak ada\";\n         if(Session::get('product')){\n-            \n+            $mycart = Session::all();\n         }\n-        $mycart = Session::all();\n+       \n         return view(\"cart\",compact('mycart'));\n     }\n     public function listcart(){\n         \n"
                },
                {
                    "date": 1719133664105,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,9 +15,9 @@\n     public function index()\n     {\n         $mycart = \"tidak ada\";\n         if(Session::get('product')){\n-            $mycart = Session::all();\n+            $mycart[] = Session::all();\n         }\n        \n         return view(\"cart\",compact('mycart'));\n     }\n"
                },
                {
                    "date": 1719133674739,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,9 +15,9 @@\n     public function index()\n     {\n         $mycart = \"tidak ada\";\n         if(Session::get('product')){\n-            $mycart[] = Session::all();\n+            $mycart = Session::all();\n         }\n        \n         return view(\"cart\",compact('mycart'));\n     }\n"
                },
                {
                    "date": 1719133789323,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,9 +15,9 @@\n     public function index()\n     {\n         $mycart = \"tidak ada\";\n         if(Session::get('product')){\n-            $mycart = Session::all();\n+            $mycart[] = Session::all();\n         }\n        \n         return view(\"cart\",compact('mycart'));\n     }\n"
                },
                {
                    "date": 1719133797042,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,9 +13,9 @@\n      * @return \\Illuminate\\Http\\Response\n      */\n     public function index()\n     {\n-        $mycart = \"tidak ada\";\n+        $mycart = [];\n         if(Session::get('product')){\n             $mycart[] = Session::all();\n         }\n        \n"
                },
                {
                    "date": 1719133964285,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,9 +15,9 @@\n     public function index()\n     {\n         $mycart = [];\n         if(Session::get('product')){\n-            $mycart[] = Session::all();\n+            $mycart[] = Session::get('product');\n         }\n        \n         return view(\"cart\",compact('mycart'));\n     }\n"
                },
                {
                    "date": 1719134537966,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,9 +17,9 @@\n         $mycart = [];\n         if(Session::get('product')){\n             $mycart[] = Session::get('product');\n         }\n-       \n+       $mycarts = json_decode($mycart);\n         return view(\"cart\",compact('mycart'));\n     }\n     public function listcart(){\n         \n"
                },
                {
                    "date": 1719134647357,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,9 +17,9 @@\n         $mycart = [];\n         if(Session::get('product')){\n             $mycart[] = Session::get('product');\n         }\n-       $mycarts = json_decode($mycart);\n+       \n         return view(\"cart\",compact('mycart'));\n     }\n     public function listcart(){\n         \n"
                },
                {
                    "date": 1719134685889,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,9 +15,9 @@\n     public function index()\n     {\n         $mycart = [];\n         if(Session::get('product')){\n-            $mycart[] = Session::get('product');\n+            $mycart = Session::get('product');\n         }\n        \n         return view(\"cart\",compact('mycart'));\n     }\n"
                },
                {
                    "date": 1719139242956,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,8 +17,12 @@\n         $mycart = [];\n         if(Session::get('product')){\n             $mycart = Session::get('product');\n         }\n+        $mycart_variant = [];\n+        if(Session::get('variantproduct')){\n+            $mycart = Session::get('variantproduct');\n+        }\n        \n         return view(\"cart\",compact('mycart'));\n     }\n     public function listcart(){\n"
                },
                {
                    "date": 1719139470094,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,9 +22,9 @@\n         if(Session::get('variantproduct')){\n             $mycart = Session::get('variantproduct');\n         }\n        \n-        return view(\"cart\",compact('mycart'));\n+        return view(\"cart\",compact('mycart','mycart_variant'));\n     }\n     public function listcart(){\n         \n     }\n"
                },
                {
                    "date": 1719139484326,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,9 @@\n             $mycart = Session::get('product');\n         }\n         $mycart_variant = [];\n         if(Session::get('variantproduct')){\n-            $mycart = Session::get('variantproduct');\n+            $mycart_variant = Session::get('variantproduct');\n         }\n        \n         return view(\"cart\",compact('mycart','mycart_variant'));\n     }\n"
                },
                {
                    "date": 1719148909916,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,9 +21,8 @@\n         $mycart_variant = [];\n         if(Session::get('variantproduct')){\n             $mycart_variant = Session::get('variantproduct');\n         }\n-       \n         return view(\"cart\",compact('mycart','mycart_variant'));\n     }\n     public function listcart(){\n         \n"
                },
                {
                    "date": 1719149684944,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,16 +13,18 @@\n      * @return \\Illuminate\\Http\\Response\n      */\n     public function index()\n     {\n+        $mycart_list = [];\n         $mycart = [];\n         if(Session::get('product')){\n             $mycart = Session::get('product');\n         }\n         $mycart_variant = [];\n         if(Session::get('variantproduct')){\n             $mycart_variant = Session::get('variantproduct');\n         }\n+\n         return view(\"cart\",compact('mycart','mycart_variant'));\n     }\n     public function listcart(){\n         \n"
                },
                {
                    "date": 1719150608255,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,14 +17,22 @@\n         $mycart_list = [];\n         $mycart = [];\n         if(Session::get('product')){\n             $mycart = Session::get('product');\n+            for($i = 0 ; $i < count($mycart); $i++ ){\n+                    $list_myitem = explode(\"_\");\n+                    $id_item = $list_myitem[0];\n+\n+            }\n         }\n         $mycart_variant = [];\n         if(Session::get('variantproduct')){\n             $mycart_variant = Session::get('variantproduct');\n+            for($i = 0 ; $i < count($mycart_variant); $i++ ){\n+                \n+            }\n         }\n-\n+        \n         return view(\"cart\",compact('mycart','mycart_variant'));\n     }\n     public function listcart(){\n         \n"
                },
                {
                    "date": 1719150787720,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,8 +3,10 @@\n namespace App\\Http\\Controllers;\n \n use Illuminate\\Http\\Request;\n use Session;\n+use App\\Models\\Product;\n+use App\\Models\\ProductVariant;\n \n class CartController extends Controller\n {\n     /**\n"
                },
                {
                    "date": 1719150848261,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,9 +22,9 @@\n             $mycart = Session::get('product');\n             for($i = 0 ; $i < count($mycart); $i++ ){\n                     $list_myitem = explode(\"_\");\n                     $id_item = $list_myitem[0];\n-\n+                    $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n             }\n         }\n         $mycart_variant = [];\n         if(Session::get('variantproduct')){\n"
                },
                {
                    "date": 1719150921157,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -23,8 +23,10 @@\n             for($i = 0 ; $i < count($mycart); $i++ ){\n                     $list_myitem = explode(\"_\");\n                     $id_item = $list_myitem[0];\n                     $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n+                    $name_produk = $search_produk[0]['names'];\n+                    $description_produk = $search_produk[0]['descriptions'];\n             }\n         }\n         $mycart_variant = [];\n         if(Session::get('variantproduct')){\n"
                },
                {
                    "date": 1719150940130,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,8 +25,9 @@\n                     $id_item = $list_myitem[0];\n                     $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n                     $name_produk = $search_produk[0]['names'];\n                     $description_produk = $search_produk[0]['descriptions'];\n+                    $prices_produk = $search_produk[0]['prices'];\n             }\n         }\n         $mycart_variant = [];\n         if(Session::get('variantproduct')){\n"
                },
                {
                    "date": 1719150962425,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,8 +26,9 @@\n                     $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n                     $name_produk = $search_produk[0]['names'];\n                     $description_produk = $search_produk[0]['descriptions'];\n                     $prices_produk = $search_produk[0]['prices'];\n+                    $discount_produk = $search_produk[0]['prices'];\n             }\n         }\n         $mycart_variant = [];\n         if(Session::get('variantproduct')){\n"
                },
                {
                    "date": 1719151301732,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,9 +26,14 @@\n                     $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n                     $name_produk = $search_produk[0]['names'];\n                     $description_produk = $search_produk[0]['descriptions'];\n                     $prices_produk = $search_produk[0]['prices'];\n-                    $discount_produk = $search_produk[0]['prices'];\n+                    $discount_produk = $search_produk[0]['discounts'];\n+                    $images_produk = $search_produk[0]['images'];\n+                    $mycart_list[] = [\n+                        \"name\" =>$name_produk,\n+                        \"deskripsi\" => $description_produk\n+                    ];\n             }\n         }\n         $mycart_variant = [];\n         if(Session::get('variantproduct')){\n"
                },
                {
                    "date": 1719151337856,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,9 +42,9 @@\n                 \n             }\n         }\n         \n-        return view(\"cart\",compact('mycart','mycart_variant'));\n+        return view(\"cart\",compact('mycart','mycart_variant', \"mycart_list\"));\n     }\n     public function listcart(){\n         \n     }\n"
                },
                {
                    "date": 1719151386794,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,9 +20,9 @@\n         $mycart = [];\n         if(Session::get('product')){\n             $mycart = Session::get('product');\n             for($i = 0 ; $i < count($mycart); $i++ ){\n-                    $list_myitem = explode(\"_\");\n+                    $list_myitem = explode(\"_\",$mycart[$i]);\n                     $id_item = $list_myitem[0];\n                     $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n                     $name_produk = $search_produk[0]['names'];\n                     $description_produk = $search_produk[0]['descriptions'];\n"
                },
                {
                    "date": 1719151499886,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,9 +30,12 @@\n                     $discount_produk = $search_produk[0]['discounts'];\n                     $images_produk = $search_produk[0]['images'];\n                     $mycart_list[] = [\n                         \"name\" =>$name_produk,\n-                        \"deskripsi\" => $description_produk\n+                        \"description\" => $description_produk,\n+                        \"price\" => $prices_produk,\n+                        \"discount\" => $discount_produk,\n+                        \"image\" => $images_produk\n                     ];\n             }\n         }\n         $mycart_variant = [];\n"
                },
                {
                    "date": 1719151786966,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,8 +31,9 @@\n                     $images_produk = $search_produk[0]['images'];\n                     $mycart_list[] = [\n                         \"name\" =>$name_produk,\n                         \"description\" => $description_produk,\n+                        \"variant\" => \"-\",\n                         \"price\" => $prices_produk,\n                         \"discount\" => $discount_produk,\n                         \"image\" => $images_produk\n                     ];\n"
                },
                {
                    "date": 1719151924906,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,9 +42,11 @@\n         $mycart_variant = [];\n         if(Session::get('variantproduct')){\n             $mycart_variant = Session::get('variantproduct');\n             for($i = 0 ; $i < count($mycart_variant); $i++ ){\n-                \n+                $list_myitem = explode(\"_\",$mycart[$i]);\n+                $id_item = $list_myitem[0];\n+                $search_produk = ProductVariant::join(\"product_variant\",\"product_variant.id\" , \"=\", \"product.id\")->get();\n             }\n         }\n         \n         return view(\"cart\",compact('mycart','mycart_variant', \"mycart_list\"));\n"
                },
                {
                    "date": 1719152016652,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,9 +44,9 @@\n             $mycart_variant = Session::get('variantproduct');\n             for($i = 0 ; $i < count($mycart_variant); $i++ ){\n                 $list_myitem = explode(\"_\",$mycart[$i]);\n                 $id_item = $list_myitem[0];\n-                $search_produk = ProductVariant::join(\"product_variant\",\"product_variant.id\" , \"=\", \"product.id\")->get();\n+                $search_produk = ProductVariant::join(\"product_variant\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"\")->get();\n             }\n         }\n         \n         return view(\"cart\",compact('mycart','mycart_variant', \"mycart_list\"));\n"
                },
                {
                    "date": 1719152056259,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,9 +44,9 @@\n             $mycart_variant = Session::get('variantproduct');\n             for($i = 0 ; $i < count($mycart_variant); $i++ ){\n                 $list_myitem = explode(\"_\",$mycart[$i]);\n                 $id_item = $list_myitem[0];\n-                $search_produk = ProductVariant::join(\"product_variant\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"\")->get();\n+                $search_produk = ProductVariant::join(\"product_variant\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->get();\n             }\n         }\n         \n         return view(\"cart\",compact('mycart','mycart_variant', \"mycart_list\"));\n"
                },
                {
                    "date": 1719152134463,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,9 +44,9 @@\n             $mycart_variant = Session::get('variantproduct');\n             for($i = 0 ; $i < count($mycart_variant); $i++ ){\n                 $list_myitem = explode(\"_\",$mycart[$i]);\n                 $id_item = $list_myitem[0];\n-                $search_produk = ProductVariant::join(\"product_variant\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->get();\n+                $search_produk = ProductVariant::join(\"product_variant\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names\", \"product_variant.names as\")->get();\n             }\n         }\n         \n         return view(\"cart\",compact('mycart','mycart_variant', \"mycart_list\"));\n"
                },
                {
                    "date": 1719152286437,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,9 +44,9 @@\n             $mycart_variant = Session::get('variantproduct');\n             for($i = 0 ; $i < count($mycart_variant); $i++ ){\n                 $list_myitem = explode(\"_\",$mycart[$i]);\n                 $id_item = $list_myitem[0];\n-                $search_produk = ProductVariant::join(\"product_variant\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names\", \"product_variant.names as\")->get();\n+                $search_produk = ProductVariant::join(\"product_variant\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\", \"product.images as images_product\", \"product_variant.names as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n             }\n         }\n         \n         return view(\"cart\",compact('mycart','mycart_variant', \"mycart_list\"));\n"
                },
                {
                    "date": 1719152375191,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,8 +45,18 @@\n             for($i = 0 ; $i < count($mycart_variant); $i++ ){\n                 $list_myitem = explode(\"_\",$mycart[$i]);\n                 $id_item = $list_myitem[0];\n                 $search_produk = ProductVariant::join(\"product_variant\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\", \"product.images as images_product\", \"product_variant.names as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n+                $name_produk = $search_produk[0]['nama_product'];\n+                $name_variant = $search_produk[0]['nama_variant'];\n+                $prices_produk = $search_produk[0]['harga_variant'];\n+                $discount_produk = $search_produk[0]['discount_variant'];\n+                $images_produk = $search_produk[0]['images_product'];\n+                \n+                \n+                \n+                \n+                \n             }\n         }\n         \n         return view(\"cart\",compact('mycart','mycart_variant', \"mycart_list\"));\n"
                },
                {
                    "date": 1719152388628,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -50,13 +50,20 @@\n                 $name_variant = $search_produk[0]['nama_variant'];\n                 $prices_produk = $search_produk[0]['harga_variant'];\n                 $discount_produk = $search_produk[0]['discount_variant'];\n                 $images_produk = $search_produk[0]['images_product'];\n+                $mycart_list[] = [\n+                    \"name\" =>$name_produk,\n+                    \"description\" => $name_variant,\n+                    \"variant\" => \"-\",\n+                    \"price\" => $prices_produk,\n+                    \"discount\" => $discount_produk,\n+                    \"image\" => $images_produk\n+                ];\n                 \n                 \n                 \n                 \n-                \n             }\n         }\n         \n         return view(\"cart\",compact('mycart','mycart_variant', \"mycart_list\"));\n"
                },
                {
                    "date": 1719152432665,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,17 +44,17 @@\n             $mycart_variant = Session::get('variantproduct');\n             for($i = 0 ; $i < count($mycart_variant); $i++ ){\n                 $list_myitem = explode(\"_\",$mycart[$i]);\n                 $id_item = $list_myitem[0];\n-                $search_produk = ProductVariant::join(\"product_variant\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\", \"product.images as images_product\", \"product_variant.names as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n+                $search_produk = ProductVariant::join(\"product_variant\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.names as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n                 $name_produk = $search_produk[0]['nama_product'];\n                 $name_variant = $search_produk[0]['nama_variant'];\n                 $prices_produk = $search_produk[0]['harga_variant'];\n                 $discount_produk = $search_produk[0]['discount_variant'];\n                 $images_produk = $search_produk[0]['images_product'];\n                 $mycart_list[] = [\n                     \"name\" =>$name_produk,\n-                    \"description\" => $name_variant,\n+                    \"description\" => $description_produk,\n                     \"variant\" => \"-\",\n                     \"price\" => $prices_produk,\n                     \"discount\" => $discount_produk,\n                     \"image\" => $images_produk\n"
                },
                {
                    "date": 1719152448620,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -48,8 +48,9 @@\n                 $search_produk = ProductVariant::join(\"product_variant\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.names as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n                 $name_produk = $search_produk[0]['nama_product'];\n                 $name_variant = $search_produk[0]['nama_variant'];\n                 $prices_produk = $search_produk[0]['harga_variant'];\n+                $description_produk = $search_produk[0]['description_product'];\n                 $discount_produk = $search_produk[0]['discount_variant'];\n                 $images_produk = $search_produk[0]['images_product'];\n                 $mycart_list[] = [\n                     \"name\" =>$name_produk,\n"
                },
                {
                    "date": 1719152496552,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -54,9 +54,9 @@\n                 $images_produk = $search_produk[0]['images_product'];\n                 $mycart_list[] = [\n                     \"name\" =>$name_produk,\n                     \"description\" => $description_produk,\n-                    \"variant\" => \"-\",\n+                    \"variant\" => $name_variant,\n                     \"price\" => $prices_produk,\n                     \"discount\" => $discount_produk,\n                     \"image\" => $images_produk\n                 ];\n"
                },
                {
                    "date": 1719152546771,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -59,12 +59,8 @@\n                     \"price\" => $prices_produk,\n                     \"discount\" => $discount_produk,\n                     \"image\" => $images_produk\n                 ];\n-                \n-                \n-                \n-                \n             }\n         }\n         \n         return view(\"cart\",compact('mycart','mycart_variant', \"mycart_list\"));\n"
                },
                {
                    "date": 1719152563282,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -62,9 +62,9 @@\n                 ];\n             }\n         }\n         \n-        return view(\"cart\",compact('mycart','mycart_variant', \"mycart_list\"));\n+        return view(\"cart\",compact(\"mycart_list\"));\n     }\n     public function listcart(){\n         \n     }\n"
                },
                {
                    "date": 1719203219734,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,8 +22,9 @@\n             $mycart = Session::get('product');\n             for($i = 0 ; $i < count($mycart); $i++ ){\n                     $list_myitem = explode(\"_\",$mycart[$i]);\n                     $id_item = $list_myitem[0];\n+                    $qty_item = $list_myitem[1];\n                     $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n                     $name_produk = $search_produk[0]['names'];\n                     $description_produk = $search_produk[0]['descriptions'];\n                     $prices_produk = $search_produk[0]['prices'];\n@@ -44,8 +45,9 @@\n             $mycart_variant = Session::get('variantproduct');\n             for($i = 0 ; $i < count($mycart_variant); $i++ ){\n                 $list_myitem = explode(\"_\",$mycart[$i]);\n                 $id_item = $list_myitem[0];\n+                $qty_item = $list_myitem[1];\n                 $search_produk = ProductVariant::join(\"product_variant\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.names as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n                 $name_produk = $search_produk[0]['nama_product'];\n                 $name_variant = $search_produk[0]['nama_variant'];\n                 $prices_produk = $search_produk[0]['harga_variant'];\n"
                },
                {
                    "date": 1719203274603,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,140 @@\n+<?php\n+\n+namespace App\\Http\\Controllers;\n+\n+use Illuminate\\Http\\Request;\n+use Session;\n+use App\\Models\\Product;\n+use App\\Models\\ProductVariant;\n+\n+class CartController extends Controller\n+{\n+    /**\n+     * Display a listing of the resource.\n+     *\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function index()\n+    {\n+        $mycart_list = [];\n+        $mycart = [];\n+        if(Session::get('product')){\n+            $mycart = Session::get('product');\n+            for($i = 0 ; $i < count($mycart); $i++ ){\n+                    $list_myitem = explode(\"_\",$mycart[$i]);\n+                    $id_item = $list_myitem[0];\n+                    $qty_item = $list_myitem[1];\n+                    $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n+                    $name_produk = $search_produk[0]['names'];\n+                    $description_produk = $search_produk[0]['descriptions'];\n+                    $prices_produk = $search_produk[0]['prices'];\n+                    $discount_produk = $search_produk[0]['discounts'];\n+                    $images_produk = $search_produk[0]['images'];\n+                    $mycart_list[] = [\n+                        \"name\" =>$name_produk,\n+                        \"description\" => $description_produk,\n+                        \"variant\" => \"-\",\n+                        \"price\" => $prices_produk,\n+                        \"discount\" => $discount_produk,\n+                        \"image\" => $images_produk,\n+                        \"qty\" => $qty_item\n+                    ];\n+            }\n+        }\n+        $mycart_variant = [];\n+        if(Session::get('variantproduct')){\n+            $mycart_variant = Session::get('variantproduct');\n+            for($i = 0 ; $i < count($mycart_variant); $i++ ){\n+                $list_myitem = explode(\"_\",$mycart[$i]);\n+                $id_item = $list_myitem[0];\n+                $qty_item = $list_myitem[1];\n+                $search_produk = ProductVariant::join(\"product_variant\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.names as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n+                $name_produk = $search_produk[0]['nama_product'];\n+                $name_variant = $search_produk[0]['nama_variant'];\n+                $prices_produk = $search_produk[0]['harga_variant'];\n+                $description_produk = $search_produk[0]['description_product'];\n+                $discount_produk = $search_produk[0]['discount_variant'];\n+                $images_produk = $search_produk[0]['images_product'];\n+                $mycart_list[] = [\n+                    \"name\" =>$name_produk,\n+                    \"description\" => $description_produk,\n+                    \"variant\" => $name_variant,\n+                    \"price\" => $prices_produk,\n+                    \"discount\" => $discount_produk,\n+                    \"image\" => $images_produk,\n+                    \"qty\" => $qty_item\n+                ];\n+            }\n+        }\n+        \n+        return view(\"cart\",compact(\"mycart_list\"));\n+    }\n+    public function listcart(){\n+        \n+    }\n+    /**\n+     * Show the form for creating a new resource.\n+     *\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function create()\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Store a newly created resource in storage.\n+     *\n+     * @param  \\Illuminate\\Http\\Request  $request\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function store(Request $request)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Display the specified resource.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function show($id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Show the form for editing the specified resource.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function edit($id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Update the specified resource in storage.\n+     *\n+     * @param  \\Illuminate\\Http\\Request  $request\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function update(Request $request, $id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Remove the specified resource from storage.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function destroy($id)\n+    {\n+        //\n+    }\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1719203280667,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -46,9 +46,9 @@\n             $mycart_variant = Session::get('variantproduct');\n             for($i = 0 ; $i < count($mycart_variant); $i++ ){\n                 $list_myitem = explode(\"_\",$mycart[$i]);\n                 $id_item = $list_myitem[0];\n-                $qty_item = $list_myitem[1];\n+                $qty_items = $list_myitem[1];\n                 $search_produk = ProductVariant::join(\"product_variant\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.names as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n                 $name_produk = $search_produk[0]['nama_product'];\n                 $name_variant = $search_produk[0]['nama_variant'];\n                 $prices_produk = $search_produk[0]['harga_variant'];\n@@ -61,9 +61,9 @@\n                     \"variant\" => $name_variant,\n                     \"price\" => $prices_produk,\n                     \"discount\" => $discount_produk,\n                     \"image\" => $images_produk,\n-                    \"qty\" => $qty_item\n+                    \"qty\" => $qty_items\n                 ];\n             }\n         }\n         \n@@ -136,143 +136,5 @@\n     public function destroy($id)\n     {\n         //\n     }\n-}\n-<?php\n-\n-namespace App\\Http\\Controllers;\n-\n-use Illuminate\\Http\\Request;\n-use Session;\n-use App\\Models\\Product;\n-use App\\Models\\ProductVariant;\n-\n-class CartController extends Controller\n-{\n-    /**\n-     * Display a listing of the resource.\n-     *\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function index()\n-    {\n-        $mycart_list = [];\n-        $mycart = [];\n-        if(Session::get('product')){\n-            $mycart = Session::get('product');\n-            for($i = 0 ; $i < count($mycart); $i++ ){\n-                    $list_myitem = explode(\"_\",$mycart[$i]);\n-                    $id_item = $list_myitem[0];\n-                    $qty_item = $list_myitem[1];\n-                    $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n-                    $name_produk = $search_produk[0]['names'];\n-                    $description_produk = $search_produk[0]['descriptions'];\n-                    $prices_produk = $search_produk[0]['prices'];\n-                    $discount_produk = $search_produk[0]['discounts'];\n-                    $images_produk = $search_produk[0]['images'];\n-                    $mycart_list[] = [\n-                        \"name\" =>$name_produk,\n-                        \"description\" => $description_produk,\n-                        \"variant\" => \"-\",\n-                        \"price\" => $prices_produk,\n-                        \"discount\" => $discount_produk,\n-                        \"image\" => $images_produk\n-                    ];\n-            }\n-        }\n-        $mycart_variant = [];\n-        if(Session::get('variantproduct')){\n-            $mycart_variant = Session::get('variantproduct');\n-            for($i = 0 ; $i < count($mycart_variant); $i++ ){\n-                $list_myitem = explode(\"_\",$mycart[$i]);\n-                $id_item = $list_myitem[0];\n-                $qty_item = $list_myitem[1];\n-                $search_produk = ProductVariant::join(\"product_variant\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.names as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n-                $name_produk = $search_produk[0]['nama_product'];\n-                $name_variant = $search_produk[0]['nama_variant'];\n-                $prices_produk = $search_produk[0]['harga_variant'];\n-                $description_produk = $search_produk[0]['description_product'];\n-                $discount_produk = $search_produk[0]['discount_variant'];\n-                $images_produk = $search_produk[0]['images_product'];\n-                $mycart_list[] = [\n-                    \"name\" =>$name_produk,\n-                    \"description\" => $description_produk,\n-                    \"variant\" => $name_variant,\n-                    \"price\" => $prices_produk,\n-                    \"discount\" => $discount_produk,\n-                    \"image\" => $images_produk\n-                ];\n-            }\n-        }\n-        \n-        return view(\"cart\",compact(\"mycart_list\"));\n-    }\n-    public function listcart(){\n-        \n-    }\n-    /**\n-     * Show the form for creating a new resource.\n-     *\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function create()\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Store a newly created resource in storage.\n-     *\n-     * @param  \\Illuminate\\Http\\Request  $request\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function store(Request $request)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Display the specified resource.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function show($id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Show the form for editing the specified resource.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function edit($id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Update the specified resource in storage.\n-     *\n-     * @param  \\Illuminate\\Http\\Request  $request\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function update(Request $request, $id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Remove the specified resource from storage.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function destroy($id)\n-    {\n-        //\n-    }\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1719216816505,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -47,9 +47,9 @@\n             for($i = 0 ; $i < count($mycart_variant); $i++ ){\n                 $list_myitem = explode(\"_\",$mycart[$i]);\n                 $id_item = $list_myitem[0];\n                 $qty_items = $list_myitem[1];\n-                $search_produk = ProductVariant::join(\"product_variant\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.names as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n+                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.names as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n                 $name_produk = $search_produk[0]['nama_product'];\n                 $name_variant = $search_produk[0]['nama_variant'];\n                 $prices_produk = $search_produk[0]['harga_variant'];\n                 $description_produk = $search_produk[0]['description_product'];\n"
                },
                {
                    "date": 1719216834142,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -47,9 +47,9 @@\n             for($i = 0 ; $i < count($mycart_variant); $i++ ){\n                 $list_myitem = explode(\"_\",$mycart[$i]);\n                 $id_item = $list_myitem[0];\n                 $qty_items = $list_myitem[1];\n-                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.names as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n+                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.name as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.names as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n                 $name_produk = $search_produk[0]['nama_product'];\n                 $name_variant = $search_produk[0]['nama_variant'];\n                 $prices_produk = $search_produk[0]['harga_variant'];\n                 $description_produk = $search_produk[0]['description_product'];\n"
                },
                {
                    "date": 1719216842251,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -47,9 +47,9 @@\n             for($i = 0 ; $i < count($mycart_variant); $i++ ){\n                 $list_myitem = explode(\"_\",$mycart[$i]);\n                 $id_item = $list_myitem[0];\n                 $qty_items = $list_myitem[1];\n-                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.name as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.names as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n+                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.names as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n                 $name_produk = $search_produk[0]['nama_product'];\n                 $name_variant = $search_produk[0]['nama_variant'];\n                 $prices_produk = $search_produk[0]['harga_variant'];\n                 $description_produk = $search_produk[0]['description_product'];\n"
                },
                {
                    "date": 1719217163781,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -47,9 +47,9 @@\n             for($i = 0 ; $i < count($mycart_variant); $i++ ){\n                 $list_myitem = explode(\"_\",$mycart[$i]);\n                 $id_item = $list_myitem[0];\n                 $qty_items = $list_myitem[1];\n-                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.names as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n+                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n                 $name_produk = $search_produk[0]['nama_product'];\n                 $name_variant = $search_produk[0]['nama_variant'];\n                 $prices_produk = $search_produk[0]['harga_variant'];\n                 $description_produk = $search_produk[0]['description_product'];\n"
                },
                {
                    "date": 1719220302586,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -65,8 +65,9 @@\n                     \"qty\" => $qty_items\n                 ];\n             }\n         }\n+        $mycart_list = json_encode($mycart_list);\n         \n         return view(\"cart\",compact(\"mycart_list\"));\n     }\n     public function listcart(){\n"
                },
                {
                    "date": 1719220401298,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -65,9 +65,9 @@\n                     \"qty\" => $qty_items\n                 ];\n             }\n         }\n-        $mycart_list = json_encode($mycart_list);\n+        // $mycart_list = json_encode($mycart_list);\n         \n         return view(\"cart\",compact(\"mycart_list\"));\n     }\n     public function listcart(){\n"
                },
                {
                    "date": 1719220721183,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,8 +17,9 @@\n     public function index()\n     {\n         $mycart_list = [];\n         $mycart = [];\n+        $hasil = 0;\n         if(Session::get('product')){\n             $mycart = Session::get('product');\n             for($i = 0 ; $i < count($mycart); $i++ ){\n                     $list_myitem = explode(\"_\",$mycart[$i]);\n"
                },
                {
                    "date": 1719220817843,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -39,8 +39,9 @@\n                         \"discount\" => $discount_produk,\n                         \"image\" => $images_produk,\n                         \"qty\" => $qty_item\n                     ];\n+                    $hasil += $qty_item * ($prices_produk-(($prices_produk*$discount_produk)/100));\n             }\n         }\n         $mycart_variant = [];\n         if(Session::get('variantproduct')){\n@@ -64,8 +65,9 @@\n                     \"discount\" => $discount_produk,\n                     \"image\" => $images_produk,\n                     \"qty\" => $qty_items\n                 ];\n+                $hasil += $qty_item * ($prices_produk-(($prices_produk*$discount_produk)/100));\n             }\n         }\n         // $mycart_list = json_encode($mycart_list);\n         \n"
                },
                {
                    "date": 1719220827811,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -70,9 +70,9 @@\n             }\n         }\n         // $mycart_list = json_encode($mycart_list);\n         \n-        return view(\"cart\",compact(\"mycart_list\"));\n+        return view(\"cart\",compact(\"mycart_list\",\"hasil\"));\n     }\n     public function listcart(){\n         \n     }\n"
                },
                {
                    "date": 1719224258159,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -72,8 +72,16 @@\n         // $mycart_list = json_encode($mycart_list);\n         \n         return view(\"cart\",compact(\"mycart_list\",\"hasil\"));\n     }\n+    public function deletecart(){\n+        $products[] = session()->pull('products', []); // Second argument is a default value\n+        $products[] = session()->pull('variantproduct', []);\n+      \n+            unset($products[$key]);\n+        \n+        session()->put('products', $products);\n+    }\n     public function listcart(){\n         \n     }\n     /**\n"
                },
                {
                    "date": 1719224465769,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,8 +31,9 @@\n                     $prices_produk = $search_produk[0]['prices'];\n                     $discount_produk = $search_produk[0]['discounts'];\n                     $images_produk = $search_produk[0]['images'];\n                     $mycart_list[] = [\n+                        \"index\"=>$i,\n                         \"name\" =>$name_produk,\n                         \"description\" => $description_produk,\n                         \"variant\" => \"-\",\n                         \"price\" => $prices_produk,\n@@ -57,8 +58,9 @@\n                 $description_produk = $search_produk[0]['description_product'];\n                 $discount_produk = $search_produk[0]['discount_variant'];\n                 $images_produk = $search_produk[0]['images_product'];\n                 $mycart_list[] = [\n+                    \"index\"=>$i,\n                     \"name\" =>$name_produk,\n                     \"description\" => $description_produk,\n                     \"variant\" => $name_variant,\n                     \"price\" => $prices_produk,\n"
                },
                {
                    "date": 1719224480650,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -32,8 +32,9 @@\n                     $discount_produk = $search_produk[0]['discounts'];\n                     $images_produk = $search_produk[0]['images'];\n                     $mycart_list[] = [\n                         \"index\"=>$i,\n+                        \"category\"=>\"p\",\n                         \"name\" =>$name_produk,\n                         \"description\" => $description_produk,\n                         \"variant\" => \"-\",\n                         \"price\" => $prices_produk,\n"
                },
                {
                    "date": 1719224494289,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -60,8 +60,9 @@\n                 $discount_produk = $search_produk[0]['discount_variant'];\n                 $images_produk = $search_produk[0]['images_product'];\n                 $mycart_list[] = [\n                     \"index\"=>$i,\n+                    \"category\"=>\"v\",\n                     \"name\" =>$name_produk,\n                     \"description\" => $description_produk,\n                     \"variant\" => $name_variant,\n                     \"price\" => $prices_produk,\n"
                },
                {
                    "date": 1719224769771,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -76,9 +76,13 @@\n         // $mycart_list = json_encode($mycart_list);\n         \n         return view(\"cart\",compact(\"mycart_list\",\"hasil\"));\n     }\n-    public function deletecart(){\n+    public function deletecart(Request $request){\n+  \n+    $category_delete = $request->category_id;\n+    $index_delete = $request->index_id;\n+\n         $products[] = session()->pull('products', []); // Second argument is a default value\n         $products[] = session()->pull('variantproduct', []);\n       \n             unset($products[$key]);\n"
                },
                {
                    "date": 1719224792334,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -78,11 +78,15 @@\n         return view(\"cart\",compact(\"mycart_list\",\"hasil\"));\n     }\n     public function deletecart(Request $request){\n   \n-    $category_delete = $request->category_id;\n-    $index_delete = $request->index_id;\n+        $category_delete = $request->category_id;\n+        $index_delete = $request->index_id;\n \n+        if($category_delete == \"p\"){\n+            \n+        }\n+\n         $products[] = session()->pull('products', []); // Second argument is a default value\n         $products[] = session()->pull('variantproduct', []);\n       \n             unset($products[$key]);\n"
                },
                {
                    "date": 1719224801422,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -82,15 +82,16 @@\n         $category_delete = $request->category_id;\n         $index_delete = $request->index_id;\n \n         if($category_delete == \"p\"){\n-            \n+            $products[] = session()->pull('products', []);\n+            unset($products[$key]);\n         }\n \n-        $products[] = session()->pull('products', []); // Second argument is a default value\n+         // Second argument is a default value\n         $products[] = session()->pull('variantproduct', []);\n       \n-            unset($products[$key]);\n+           \n         \n         session()->put('products', $products);\n     }\n     public function listcart(){\n"
                },
                {
                    "date": 1719224825625,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -85,15 +85,20 @@\n         if($category_delete == \"p\"){\n             $products[] = session()->pull('products', []);\n             unset($products[$key]);\n         }\n+        else{\n+            // Second argument is a default value\n+            $variant_products[] = session()->pull('variantproduct', []);\n+            unset($products[$key]);\n+            session()->put('products', $products);\n+        }\n \n-         // Second argument is a default value\n-        $products[] = session()->pull('variantproduct', []);\n+     \n       \n            \n         \n-        session()->put('products', $products);\n+     \n     }\n     public function listcart(){\n         \n     }\n"
                },
                {
                    "date": 1719224833640,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -88,10 +88,10 @@\n         }\n         else{\n             // Second argument is a default value\n             $variant_products[] = session()->pull('variantproduct', []);\n-            unset($products[$key]);\n-            session()->put('products', $products);\n+            unset($variant_products[$key]);\n+            session()->put('products', $variant_products);\n         }\n \n      \n       \n"
                },
                {
                    "date": 1719224844567,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,170 @@\n+<?php\n+\n+namespace App\\Http\\Controllers;\n+\n+use Illuminate\\Http\\Request;\n+use Session;\n+use App\\Models\\Product;\n+use App\\Models\\ProductVariant;\n+\n+class CartController extends Controller\n+{\n+    /**\n+     * Display a listing of the resource.\n+     *\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function index()\n+    {\n+        $mycart_list = [];\n+        $mycart = [];\n+        $hasil = 0;\n+        if(Session::get('product')){\n+            $mycart = Session::get('product');\n+            for($i = 0 ; $i < count($mycart); $i++ ){\n+                    $list_myitem = explode(\"_\",$mycart[$i]);\n+                    $id_item = $list_myitem[0];\n+                    $qty_item = $list_myitem[1];\n+                    $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n+                    $name_produk = $search_produk[0]['names'];\n+                    $description_produk = $search_produk[0]['descriptions'];\n+                    $prices_produk = $search_produk[0]['prices'];\n+                    $discount_produk = $search_produk[0]['discounts'];\n+                    $images_produk = $search_produk[0]['images'];\n+                    $mycart_list[] = [\n+                        \"index\"=>$i,\n+                        \"category\"=>\"p\",\n+                        \"name\" =>$name_produk,\n+                        \"description\" => $description_produk,\n+                        \"variant\" => \"-\",\n+                        \"price\" => $prices_produk,\n+                        \"discount\" => $discount_produk,\n+                        \"image\" => $images_produk,\n+                        \"qty\" => $qty_item\n+                    ];\n+                    $hasil += $qty_item * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+            }\n+        }\n+        $mycart_variant = [];\n+        if(Session::get('variantproduct')){\n+            $mycart_variant = Session::get('variantproduct');\n+            for($i = 0 ; $i < count($mycart_variant); $i++ ){\n+                $list_myitem = explode(\"_\",$mycart[$i]);\n+                $id_item = $list_myitem[0];\n+                $qty_items = $list_myitem[1];\n+                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n+                $name_produk = $search_produk[0]['nama_product'];\n+                $name_variant = $search_produk[0]['nama_variant'];\n+                $prices_produk = $search_produk[0]['harga_variant'];\n+                $description_produk = $search_produk[0]['description_product'];\n+                $discount_produk = $search_produk[0]['discount_variant'];\n+                $images_produk = $search_produk[0]['images_product'];\n+                $mycart_list[] = [\n+                    \"index\"=>$i,\n+                    \"category\"=>\"v\",\n+                    \"name\" =>$name_produk,\n+                    \"description\" => $description_produk,\n+                    \"variant\" => $name_variant,\n+                    \"price\" => $prices_produk,\n+                    \"discount\" => $discount_produk,\n+                    \"image\" => $images_produk,\n+                    \"qty\" => $qty_items\n+                ];\n+                $hasil += $qty_item * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+            }\n+        }\n+        // $mycart_list = json_encode($mycart_list);\n+        \n+        return view(\"cart\",compact(\"mycart_list\",\"hasil\"));\n+    }\n+    public function deletecart(Request $request){\n+  \n+        $category_delete = $request->category_id;\n+        $index_delete = $request->index_id;\n+\n+        if($category_delete == \"p\"){\n+            $products[] = session()->pull('products', []);\n+            unset($products[$key]);\n+        }\n+        else{\n+            // Second argument is a default value\n+            $variant_products[] = session()->pull('variantproduct', []);\n+            unset($variant_products[$key]);\n+            session()->put('variantproduct', $variant_products);\n+        }\n+\n+     \n+      \n+           \n+        \n+     \n+    }\n+    public function listcart(){\n+        \n+    }\n+    /**\n+     * Show the form for creating a new resource.\n+     *\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function create()\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Store a newly created resource in storage.\n+     *\n+     * @param  \\Illuminate\\Http\\Request  $request\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function store(Request $request)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Display the specified resource.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function show($id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Show the form for editing the specified resource.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function edit($id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Update the specified resource in storage.\n+     *\n+     * @param  \\Illuminate\\Http\\Request  $request\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function update(Request $request, $id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Remove the specified resource from storage.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function destroy($id)\n+    {\n+        //\n+    }\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1719224849927,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -84,8 +84,9 @@\n \n         if($category_delete == \"p\"){\n             $products[] = session()->pull('products', []);\n             unset($products[$key]);\n+            session()->put('product', $variant_products);\n         }\n         else{\n             // Second argument is a default value\n             $variant_products[] = session()->pull('variantproduct', []);\n@@ -166,175 +167,5 @@\n     public function destroy($id)\n     {\n         //\n     }\n-}\n-<?php\n-\n-namespace App\\Http\\Controllers;\n-\n-use Illuminate\\Http\\Request;\n-use Session;\n-use App\\Models\\Product;\n-use App\\Models\\ProductVariant;\n-\n-class CartController extends Controller\n-{\n-    /**\n-     * Display a listing of the resource.\n-     *\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function index()\n-    {\n-        $mycart_list = [];\n-        $mycart = [];\n-        $hasil = 0;\n-        if(Session::get('product')){\n-            $mycart = Session::get('product');\n-            for($i = 0 ; $i < count($mycart); $i++ ){\n-                    $list_myitem = explode(\"_\",$mycart[$i]);\n-                    $id_item = $list_myitem[0];\n-                    $qty_item = $list_myitem[1];\n-                    $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n-                    $name_produk = $search_produk[0]['names'];\n-                    $description_produk = $search_produk[0]['descriptions'];\n-                    $prices_produk = $search_produk[0]['prices'];\n-                    $discount_produk = $search_produk[0]['discounts'];\n-                    $images_produk = $search_produk[0]['images'];\n-                    $mycart_list[] = [\n-                        \"index\"=>$i,\n-                        \"category\"=>\"p\",\n-                        \"name\" =>$name_produk,\n-                        \"description\" => $description_produk,\n-                        \"variant\" => \"-\",\n-                        \"price\" => $prices_produk,\n-                        \"discount\" => $discount_produk,\n-                        \"image\" => $images_produk,\n-                        \"qty\" => $qty_item\n-                    ];\n-                    $hasil += $qty_item * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-            }\n-        }\n-        $mycart_variant = [];\n-        if(Session::get('variantproduct')){\n-            $mycart_variant = Session::get('variantproduct');\n-            for($i = 0 ; $i < count($mycart_variant); $i++ ){\n-                $list_myitem = explode(\"_\",$mycart[$i]);\n-                $id_item = $list_myitem[0];\n-                $qty_items = $list_myitem[1];\n-                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n-                $name_produk = $search_produk[0]['nama_product'];\n-                $name_variant = $search_produk[0]['nama_variant'];\n-                $prices_produk = $search_produk[0]['harga_variant'];\n-                $description_produk = $search_produk[0]['description_product'];\n-                $discount_produk = $search_produk[0]['discount_variant'];\n-                $images_produk = $search_produk[0]['images_product'];\n-                $mycart_list[] = [\n-                    \"index\"=>$i,\n-                    \"category\"=>\"v\",\n-                    \"name\" =>$name_produk,\n-                    \"description\" => $description_produk,\n-                    \"variant\" => $name_variant,\n-                    \"price\" => $prices_produk,\n-                    \"discount\" => $discount_produk,\n-                    \"image\" => $images_produk,\n-                    \"qty\" => $qty_items\n-                ];\n-                $hasil += $qty_item * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-            }\n-        }\n-        // $mycart_list = json_encode($mycart_list);\n-        \n-        return view(\"cart\",compact(\"mycart_list\",\"hasil\"));\n-    }\n-    public function deletecart(Request $request){\n-  \n-        $category_delete = $request->category_id;\n-        $index_delete = $request->index_id;\n-\n-        if($category_delete == \"p\"){\n-            $products[] = session()->pull('products', []);\n-            unset($products[$key]);\n-        }\n-        else{\n-            // Second argument is a default value\n-            $variant_products[] = session()->pull('variantproduct', []);\n-            unset($variant_products[$key]);\n-            session()->put('products', $variant_products);\n-        }\n-\n-     \n-      \n-           \n-        \n-     \n-    }\n-    public function listcart(){\n-        \n-    }\n-    /**\n-     * Show the form for creating a new resource.\n-     *\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function create()\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Store a newly created resource in storage.\n-     *\n-     * @param  \\Illuminate\\Http\\Request  $request\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function store(Request $request)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Display the specified resource.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function show($id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Show the form for editing the specified resource.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function edit($id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Update the specified resource in storage.\n-     *\n-     * @param  \\Illuminate\\Http\\Request  $request\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function update(Request $request, $id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Remove the specified resource from storage.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function destroy($id)\n-    {\n-        //\n-    }\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1719224865310,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -82,24 +82,19 @@\n         $category_delete = $request->category_id;\n         $index_delete = $request->index_id;\n \n         if($category_delete == \"p\"){\n-            $products[] = session()->pull('products', []);\n+            $products[] = session()->pull('product', []);\n             unset($products[$key]);\n             session()->put('product', $variant_products);\n         }\n         else{\n             // Second argument is a default value\n             $variant_products[] = session()->pull('variantproduct', []);\n             unset($variant_products[$key]);\n             session()->put('variantproduct', $variant_products);\n-        }\n-\n+        }  \n      \n-      \n-           \n-        \n-     \n     }\n     public function listcart(){\n         \n     }\n"
                },
                {
                    "date": 1719224883202,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -92,8 +92,9 @@\n             $variant_products[] = session()->pull('variantproduct', []);\n             unset($variant_products[$key]);\n             session()->put('variantproduct', $variant_products);\n         }  \n+        return response()->json(['status_register' => $status_register]);\n      \n     }\n     public function listcart(){\n         \n"
                },
                {
                    "date": 1719224891418,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -92,9 +92,9 @@\n             $variant_products[] = session()->pull('variantproduct', []);\n             unset($variant_products[$key]);\n             session()->put('variantproduct', $variant_products);\n         }  \n-        return response()->json(['status_register' => $status_register]);\n+        return response()->json(['status_delete' => \"ok\"]);\n      \n     }\n     public function listcart(){\n         \n"
                },
                {
                    "date": 1719224932940,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -84,9 +84,9 @@\n \n         if($category_delete == \"p\"){\n             $products[] = session()->pull('product', []);\n             unset($products[$key]);\n-            session()->put('product', $variant_products);\n+            session()->put('product', $products);\n         }\n         else{\n             // Second argument is a default value\n             $variant_products[] = session()->pull('variantproduct', []);\n"
                },
                {
                    "date": 1719225050645,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -83,15 +83,15 @@\n         $index_delete = $request->index_id;\n \n         if($category_delete == \"p\"){\n             $products[] = session()->pull('product', []);\n-            unset($products[$key]);\n+            unset($products[$index_delete]);\n             session()->put('product', $products);\n         }\n         else{\n             // Second argument is a default value\n             $variant_products[] = session()->pull('variantproduct', []);\n-            unset($variant_products[$key]);\n+            unset($variant_products[$index_delete]);\n             session()->put('variantproduct', $variant_products);\n         }  \n         return response()->json(['status_delete' => \"ok\"]);\n      \n"
                },
                {
                    "date": 1719225120727,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -47,8 +47,9 @@\n         }\n         $mycart_variant = [];\n         if(Session::get('variantproduct')){\n             $mycart_variant = Session::get('variantproduct');\n+            foreach($mycart_variant as $i => $mycart_variant)\n             for($i = 0 ; $i < count($mycart_variant); $i++ ){\n                 $list_myitem = explode(\"_\",$mycart[$i]);\n                 $id_item = $list_myitem[0];\n                 $qty_items = $list_myitem[1];\n"
                },
                {
                    "date": 1719225140845,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -49,9 +49,9 @@\n         if(Session::get('variantproduct')){\n             $mycart_variant = Session::get('variantproduct');\n             foreach($mycart_variant as $i => $mycart_variant)\n             for($i = 0 ; $i < count($mycart_variant); $i++ ){\n-                $list_myitem = explode(\"_\",$mycart[$i]);\n+                $list_myitem = explode(\"_\",$mycart_variant[$i]);\n                 $id_item = $list_myitem[0];\n                 $qty_items = $list_myitem[1];\n                 $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n                 $name_produk = $search_produk[0]['nama_product'];\n"
                },
                {
                    "date": 1719225157294,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -47,10 +47,9 @@\n         }\n         $mycart_variant = [];\n         if(Session::get('variantproduct')){\n             $mycart_variant = Session::get('variantproduct');\n-            foreach($mycart_variant as $i => $mycart_variant)\n-            for($i = 0 ; $i < count($mycart_variant); $i++ ){\n+            foreach($mycart_variant as $i => $mycart_variant){\n                 $list_myitem = explode(\"_\",$mycart_variant[$i]);\n                 $id_item = $list_myitem[0];\n                 $qty_items = $list_myitem[1];\n                 $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n"
                },
                {
                    "date": 1719225184496,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,12 +44,12 @@\n                     ];\n                     $hasil += $qty_item * ($prices_produk-(($prices_produk*$discount_produk)/100));\n             }\n         }\n-        $mycart_variant = [];\n+        $mycart_variants = [];\n         if(Session::get('variantproduct')){\n-            $mycart_variant = Session::get('variantproduct');\n-            foreach($mycart_variant as $i => $mycart_variant){\n+            $mycart_variants = Session::get('variantproduct');\n+            foreach($mycart_variants as $i => $mycart_variant){\n                 $list_myitem = explode(\"_\",$mycart_variant[$i]);\n                 $id_item = $list_myitem[0];\n                 $qty_items = $list_myitem[1];\n                 $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n"
                },
                {
                    "date": 1719225243856,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -48,9 +48,9 @@\n         $mycart_variants = [];\n         if(Session::get('variantproduct')){\n             $mycart_variants = Session::get('variantproduct');\n             foreach($mycart_variants as $i => $mycart_variant){\n-                $list_myitem = explode(\"_\",$mycart_variant[$i]);\n+                $list_myitem = explode(\"_\",$mycart_variants[$i]);\n                 $id_item = $list_myitem[0];\n                 $qty_items = $list_myitem[1];\n                 $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n                 $name_produk = $search_produk[0]['nama_product'];\n"
                },
                {
                    "date": 1719225272537,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -69,9 +69,9 @@\n                     \"discount\" => $discount_produk,\n                     \"image\" => $images_produk,\n                     \"qty\" => $qty_items\n                 ];\n-                $hasil += $qty_item * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n             }\n         }\n         // $mycart_list = json_encode($mycart_list);\n         \n"
                },
                {
                    "date": 1719225498964,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -82,15 +82,15 @@\n         $category_delete = $request->category_id;\n         $index_delete = $request->index_id;\n \n         if($category_delete == \"p\"){\n-            $products[] = session()->pull('product', []);\n+            $products[] =  Session::get('product');\n             unset($products[$index_delete]);\n             session()->put('product', $products);\n         }\n         else{\n             // Second argument is a default value\n-            $variant_products[] = session()->pull('variantproduct', []);\n+            $variant_products[] =  Session::get('variantproduct');\n             unset($variant_products[$index_delete]);\n             session()->put('variantproduct', $variant_products);\n         }  \n         return response()->json(['status_delete' => \"ok\"]);\n"
                },
                {
                    "date": 1719225605392,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,10 +19,10 @@\n         $mycart_list = [];\n         $mycart = [];\n         $hasil = 0;\n         if(Session::get('product')){\n-            $mycart = Session::get('product');\n-            for($i = 0 ; $i < count($mycart); $i++ ){\n+            $mycarts = Session::get('product');\n+            foreach($mycarts as $i => $mycart){\n                     $list_myitem = explode(\"_\",$mycart[$i]);\n                     $id_item = $list_myitem[0];\n                     $qty_item = $list_myitem[1];\n                     $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n"
                },
                {
                    "date": 1719225695557,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,167 @@\n+<?php\n+\n+namespace App\\Http\\Controllers;\n+\n+use Illuminate\\Http\\Request;\n+use Session;\n+use App\\Models\\Product;\n+use App\\Models\\ProductVariant;\n+\n+class CartController extends Controller\n+{\n+    /**\n+     * Display a listing of the resource.\n+     *\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function index()\n+    {\n+        $mycart_list = [];\n+        $mycart = [];\n+        $hasil = 0;\n+        if(Session::get('product')){\n+            $mycarts = Session::get('product');\n+            foreach($mycarts as $i => $mycart){\n+                    $list_myitem = explode(\"_\",$mycarts[$i]);\n+                    $id_item = $list_myitem[0];\n+                    $qty_item = $list_myitem[1];\n+                    $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n+                    $name_produk = $search_produk[0]['names'];\n+                    $description_produk = $search_produk[0]['descriptions'];\n+                    $prices_produk = $search_produk[0]['prices'];\n+                    $discount_produk = $search_produk[0]['discounts'];\n+                    $images_produk = $search_produk[0]['images'];\n+                    $mycart_list[] = [\n+                        \"index\"=>$i,\n+                        \"category\"=>\"p\",\n+                        \"name\" =>$name_produk,\n+                        \"description\" => $description_produk,\n+                        \"variant\" => \"-\",\n+                        \"price\" => $prices_produk,\n+                        \"discount\" => $discount_produk,\n+                        \"image\" => $images_produk,\n+                        \"qty\" => $qty_item\n+                    ];\n+                    $hasil += $qty_item * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+            }\n+        }\n+        $mycart_variants = [];\n+        if(Session::get('variantproduct')){\n+            $mycart_variants = Session::get('variantproduct');\n+            foreach($mycart_variants as $i => $mycart_variant){\n+                $list_myitem = explode(\"_\",$mycart_variants[$i]);\n+                $id_item = $list_myitem[0];\n+                $qty_items = $list_myitem[1];\n+                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n+                $name_produk = $search_produk[0]['nama_product'];\n+                $name_variant = $search_produk[0]['nama_variant'];\n+                $prices_produk = $search_produk[0]['harga_variant'];\n+                $description_produk = $search_produk[0]['description_product'];\n+                $discount_produk = $search_produk[0]['discount_variant'];\n+                $images_produk = $search_produk[0]['images_product'];\n+                $mycart_list[] = [\n+                    \"index\"=>$i,\n+                    \"category\"=>\"v\",\n+                    \"name\" =>$name_produk,\n+                    \"description\" => $description_produk,\n+                    \"variant\" => $name_variant,\n+                    \"price\" => $prices_produk,\n+                    \"discount\" => $discount_produk,\n+                    \"image\" => $images_produk,\n+                    \"qty\" => $qty_items\n+                ];\n+                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+            }\n+        }\n+        // $mycart_list = json_encode($mycart_list);\n+        \n+        return view(\"cart\",compact(\"mycart_list\",\"hasil\"));\n+    }\n+    public function deletecart(Request $request){\n+  \n+        $category_delete = $request->category_id;\n+        $index_delete = $request->index_id;\n+\n+        if($category_delete == \"p\"){\n+            $products[] =  Session::get('product');\n+            unset($products[$index_delete]);\n+            session()->put('product', $products);\n+        }\n+        else{\n+            // Second argument is a default value\n+            $variant_products[] =  Session::get('variantproduct');\n+            unset($variant_products[$index_delete]);\n+            session()->put('variantproduct', $variant_products);\n+        }  \n+        return response()->json(['status_delete' => \"ok\"]);\n+     \n+    }\n+    public function listcart(){\n+        \n+    }\n+    /**\n+     * Show the form for creating a new resource.\n+     *\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function create()\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Store a newly created resource in storage.\n+     *\n+     * @param  \\Illuminate\\Http\\Request  $request\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function store(Request $request)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Display the specified resource.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function show($id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Show the form for editing the specified resource.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function edit($id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Update the specified resource in storage.\n+     *\n+     * @param  \\Illuminate\\Http\\Request  $request\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function update(Request $request, $id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Remove the specified resource from storage.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function destroy($id)\n+    {\n+        //\n+    }\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1719225737625,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,168 @@\n+<?php\n+\n+namespace App\\Http\\Controllers;\n+\n+use Illuminate\\Http\\Request;\n+use Session;\n+use App\\Models\\Product;\n+use App\\Models\\ProductVariant;\n+\n+class CartController extends Controller\n+{\n+    /**\n+     * Display a listing of the resource.\n+     *\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function index()\n+    {\n+        $mycart_list = [];\n+        $mycart = [];\n+        $hasil = 0;\n+        $jumlahitems = 0;\n+        if(Session::get('product')){\n+            $mycarts = Session::get('product');\n+            foreach($mycarts as $i => $mycart){\n+                    $list_myitem = explode(\"_\",$mycarts[$i]);\n+                    $id_item = $list_myitem[0];\n+                    $qty_item = $list_myitem[1];\n+                    $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n+                    $name_produk = $search_produk[0]['names'];\n+                    $description_produk = $search_produk[0]['descriptions'];\n+                    $prices_produk = $search_produk[0]['prices'];\n+                    $discount_produk = $search_produk[0]['discounts'];\n+                    $images_produk = $search_produk[0]['images'];\n+                    $mycart_list[] = [\n+                        \"index\"=>$i,\n+                        \"category\"=>\"p\",\n+                        \"name\" =>$name_produk,\n+                        \"description\" => $description_produk,\n+                        \"variant\" => \"-\",\n+                        \"price\" => $prices_produk,\n+                        \"discount\" => $discount_produk,\n+                        \"image\" => $images_produk,\n+                        \"qty\" => $qty_item\n+                    ];\n+                    $hasil += $qty_item * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+            }\n+        }\n+        $mycart_variants = [];\n+        if(Session::get('variantproduct')){\n+            $mycart_variants = Session::get('variantproduct');\n+            foreach($mycart_variants as $i => $mycart_variant){\n+                $list_myitem = explode(\"_\",$mycart_variants[$i]);\n+                $id_item = $list_myitem[0];\n+                $qty_items = $list_myitem[1];\n+                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n+                $name_produk = $search_produk[0]['nama_product'];\n+                $name_variant = $search_produk[0]['nama_variant'];\n+                $prices_produk = $search_produk[0]['harga_variant'];\n+                $description_produk = $search_produk[0]['description_product'];\n+                $discount_produk = $search_produk[0]['discount_variant'];\n+                $images_produk = $search_produk[0]['images_product'];\n+                $mycart_list[] = [\n+                    \"index\"=>$i,\n+                    \"category\"=>\"v\",\n+                    \"name\" =>$name_produk,\n+                    \"description\" => $description_produk,\n+                    \"variant\" => $name_variant,\n+                    \"price\" => $prices_produk,\n+                    \"discount\" => $discount_produk,\n+                    \"image\" => $images_produk,\n+                    \"qty\" => $qty_items\n+                ];\n+                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+            }\n+        }\n+        // $mycart_list = json_encode($mycart_list);\n+        \n+        return view(\"cart\",compact(\"mycart_list\",\"hasil\"));\n+    }\n+    public function deletecart(Request $request){\n+  \n+        $category_delete = $request->category_id;\n+        $index_delete = $request->index_id;\n+\n+        if($category_delete == \"p\"){\n+            $products[] =  Session::get('product');\n+            unset($products[$index_delete]);\n+            session()->put('product', $products);\n+        }\n+        else{\n+            // Second argument is a default value\n+            $variant_products[] =  Session::get('variantproduct');\n+            unset($variant_products[$index_delete]);\n+            session()->put('variantproduct', $variant_products);\n+        }  \n+        return response()->json(['status_delete' => \"ok\"]);\n+     \n+    }\n+    public function listcart(){\n+        \n+    }\n+    /**\n+     * Show the form for creating a new resource.\n+     *\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function create()\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Store a newly created resource in storage.\n+     *\n+     * @param  \\Illuminate\\Http\\Request  $request\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function store(Request $request)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Display the specified resource.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function show($id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Show the form for editing the specified resource.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function edit($id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Update the specified resource in storage.\n+     *\n+     * @param  \\Illuminate\\Http\\Request  $request\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function update(Request $request, $id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Remove the specified resource from storage.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function destroy($id)\n+    {\n+        //\n+    }\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1719225743889,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,8 +42,9 @@\n                         \"discount\" => $discount_produk,\n                         \"image\" => $images_produk,\n                         \"qty\" => $qty_item\n                     ];\n+                    $jumlahitems += $qty_item;\n                     $hasil += $qty_item * ($prices_produk-(($prices_produk*$discount_produk)/100));\n             }\n         }\n         $mycart_variants = [];\n@@ -164,339 +165,5 @@\n     public function destroy($id)\n     {\n         //\n     }\n-}\n-<?php\n-\n-namespace App\\Http\\Controllers;\n-\n-use Illuminate\\Http\\Request;\n-use Session;\n-use App\\Models\\Product;\n-use App\\Models\\ProductVariant;\n-\n-class CartController extends Controller\n-{\n-    /**\n-     * Display a listing of the resource.\n-     *\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function index()\n-    {\n-        $mycart_list = [];\n-        $mycart = [];\n-        $hasil = 0;\n-        if(Session::get('product')){\n-            $mycarts = Session::get('product');\n-            foreach($mycarts as $i => $mycart){\n-                    $list_myitem = explode(\"_\",$mycarts[$i]);\n-                    $id_item = $list_myitem[0];\n-                    $qty_item = $list_myitem[1];\n-                    $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n-                    $name_produk = $search_produk[0]['names'];\n-                    $description_produk = $search_produk[0]['descriptions'];\n-                    $prices_produk = $search_produk[0]['prices'];\n-                    $discount_produk = $search_produk[0]['discounts'];\n-                    $images_produk = $search_produk[0]['images'];\n-                    $mycart_list[] = [\n-                        \"index\"=>$i,\n-                        \"category\"=>\"p\",\n-                        \"name\" =>$name_produk,\n-                        \"description\" => $description_produk,\n-                        \"variant\" => \"-\",\n-                        \"price\" => $prices_produk,\n-                        \"discount\" => $discount_produk,\n-                        \"image\" => $images_produk,\n-                        \"qty\" => $qty_item\n-                    ];\n-                    $hasil += $qty_item * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-            }\n-        }\n-        $mycart_variants = [];\n-        if(Session::get('variantproduct')){\n-            $mycart_variants = Session::get('variantproduct');\n-            foreach($mycart_variants as $i => $mycart_variant){\n-                $list_myitem = explode(\"_\",$mycart_variants[$i]);\n-                $id_item = $list_myitem[0];\n-                $qty_items = $list_myitem[1];\n-                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n-                $name_produk = $search_produk[0]['nama_product'];\n-                $name_variant = $search_produk[0]['nama_variant'];\n-                $prices_produk = $search_produk[0]['harga_variant'];\n-                $description_produk = $search_produk[0]['description_product'];\n-                $discount_produk = $search_produk[0]['discount_variant'];\n-                $images_produk = $search_produk[0]['images_product'];\n-                $mycart_list[] = [\n-                    \"index\"=>$i,\n-                    \"category\"=>\"v\",\n-                    \"name\" =>$name_produk,\n-                    \"description\" => $description_produk,\n-                    \"variant\" => $name_variant,\n-                    \"price\" => $prices_produk,\n-                    \"discount\" => $discount_produk,\n-                    \"image\" => $images_produk,\n-                    \"qty\" => $qty_items\n-                ];\n-                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-            }\n-        }\n-        // $mycart_list = json_encode($mycart_list);\n-        \n-        return view(\"cart\",compact(\"mycart_list\",\"hasil\"));\n-    }\n-    public function deletecart(Request $request){\n-  \n-        $category_delete = $request->category_id;\n-        $index_delete = $request->index_id;\n-\n-        if($category_delete == \"p\"){\n-            $products[] =  Session::get('product');\n-            unset($products[$index_delete]);\n-            session()->put('product', $products);\n-        }\n-        else{\n-            // Second argument is a default value\n-            $variant_products[] =  Session::get('variantproduct');\n-            unset($variant_products[$index_delete]);\n-            session()->put('variantproduct', $variant_products);\n-        }  \n-        return response()->json(['status_delete' => \"ok\"]);\n-     \n-    }\n-    public function listcart(){\n-        \n-    }\n-    /**\n-     * Show the form for creating a new resource.\n-     *\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function create()\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Store a newly created resource in storage.\n-     *\n-     * @param  \\Illuminate\\Http\\Request  $request\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function store(Request $request)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Display the specified resource.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function show($id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Show the form for editing the specified resource.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function edit($id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Update the specified resource in storage.\n-     *\n-     * @param  \\Illuminate\\Http\\Request  $request\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function update(Request $request, $id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Remove the specified resource from storage.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function destroy($id)\n-    {\n-        //\n-    }\n-}\n-<?php\n-\n-namespace App\\Http\\Controllers;\n-\n-use Illuminate\\Http\\Request;\n-use Session;\n-use App\\Models\\Product;\n-use App\\Models\\ProductVariant;\n-\n-class CartController extends Controller\n-{\n-    /**\n-     * Display a listing of the resource.\n-     *\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function index()\n-    {\n-        $mycart_list = [];\n-        $mycart = [];\n-        $hasil = 0;\n-        if(Session::get('product')){\n-            $mycarts = Session::get('product');\n-            foreach($mycarts as $i => $mycart){\n-                    $list_myitem = explode(\"_\",$mycart[$i]);\n-                    $id_item = $list_myitem[0];\n-                    $qty_item = $list_myitem[1];\n-                    $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n-                    $name_produk = $search_produk[0]['names'];\n-                    $description_produk = $search_produk[0]['descriptions'];\n-                    $prices_produk = $search_produk[0]['prices'];\n-                    $discount_produk = $search_produk[0]['discounts'];\n-                    $images_produk = $search_produk[0]['images'];\n-                    $mycart_list[] = [\n-                        \"index\"=>$i,\n-                        \"category\"=>\"p\",\n-                        \"name\" =>$name_produk,\n-                        \"description\" => $description_produk,\n-                        \"variant\" => \"-\",\n-                        \"price\" => $prices_produk,\n-                        \"discount\" => $discount_produk,\n-                        \"image\" => $images_produk,\n-                        \"qty\" => $qty_item\n-                    ];\n-                    $hasil += $qty_item * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-            }\n-        }\n-        $mycart_variants = [];\n-        if(Session::get('variantproduct')){\n-            $mycart_variants = Session::get('variantproduct');\n-            foreach($mycart_variants as $i => $mycart_variant){\n-                $list_myitem = explode(\"_\",$mycart_variants[$i]);\n-                $id_item = $list_myitem[0];\n-                $qty_items = $list_myitem[1];\n-                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n-                $name_produk = $search_produk[0]['nama_product'];\n-                $name_variant = $search_produk[0]['nama_variant'];\n-                $prices_produk = $search_produk[0]['harga_variant'];\n-                $description_produk = $search_produk[0]['description_product'];\n-                $discount_produk = $search_produk[0]['discount_variant'];\n-                $images_produk = $search_produk[0]['images_product'];\n-                $mycart_list[] = [\n-                    \"index\"=>$i,\n-                    \"category\"=>\"v\",\n-                    \"name\" =>$name_produk,\n-                    \"description\" => $description_produk,\n-                    \"variant\" => $name_variant,\n-                    \"price\" => $prices_produk,\n-                    \"discount\" => $discount_produk,\n-                    \"image\" => $images_produk,\n-                    \"qty\" => $qty_items\n-                ];\n-                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-            }\n-        }\n-        // $mycart_list = json_encode($mycart_list);\n-        \n-        return view(\"cart\",compact(\"mycart_list\",\"hasil\"));\n-    }\n-    public function deletecart(Request $request){\n-  \n-        $category_delete = $request->category_id;\n-        $index_delete = $request->index_id;\n-\n-        if($category_delete == \"p\"){\n-            $products[] =  Session::get('product');\n-            unset($products[$index_delete]);\n-            session()->put('product', $products);\n-        }\n-        else{\n-            // Second argument is a default value\n-            $variant_products[] =  Session::get('variantproduct');\n-            unset($variant_products[$index_delete]);\n-            session()->put('variantproduct', $variant_products);\n-        }  \n-        return response()->json(['status_delete' => \"ok\"]);\n-     \n-    }\n-    public function listcart(){\n-        \n-    }\n-    /**\n-     * Show the form for creating a new resource.\n-     *\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function create()\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Store a newly created resource in storage.\n-     *\n-     * @param  \\Illuminate\\Http\\Request  $request\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function store(Request $request)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Display the specified resource.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function show($id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Show the form for editing the specified resource.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function edit($id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Update the specified resource in storage.\n-     *\n-     * @param  \\Illuminate\\Http\\Request  $request\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function update(Request $request, $id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Remove the specified resource from storage.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function destroy($id)\n-    {\n-        //\n-    }\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1719225752801,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -71,8 +71,9 @@\n                     \"discount\" => $discount_produk,\n                     \"image\" => $images_produk,\n                     \"qty\" => $qty_items\n                 ];\n+                $jumlahitems += $qty_item;\n                 $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n             }\n         }\n         // $mycart_list = json_encode($mycart_list);\n"
                },
                {
                    "date": 1719225764221,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -77,9 +77,9 @@\n             }\n         }\n         // $mycart_list = json_encode($mycart_list);\n         \n-        return view(\"cart\",compact(\"mycart_list\",\"hasil\"));\n+        return view(\"cart\",compact(\"mycart_list\",\"hasil\", \"jumlahitems\"));\n     }\n     public function deletecart(Request $request){\n   \n         $category_delete = $request->category_id;\n"
                },
                {
                    "date": 1719225825063,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -71,9 +71,9 @@\n                     \"discount\" => $discount_produk,\n                     \"image\" => $images_produk,\n                     \"qty\" => $qty_items\n                 ];\n-                $jumlahitems += $qty_item;\n+                $jumlahitems += $qty_items;\n                 $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n             }\n         }\n         // $mycart_list = json_encode($mycart_list);\n"
                },
                {
                    "date": 1719237781451,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -98,8 +98,11 @@\n         }  \n         return response()->json(['status_delete' => \"ok\"]);\n      \n     }\n+    public function checkout(){\n+        \n+    }\n     public function listcart(){\n         \n     }\n     /**\n"
                },
                {
                    "date": 1719237903500,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -99,9 +99,9 @@\n         return response()->json(['status_delete' => \"ok\"]);\n      \n     }\n     public function checkout(){\n-        \n+        $login = Session::get(\"user\");\n     }\n     public function listcart(){\n         \n     }\n"
                },
                {
                    "date": 1719237916678,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -99,9 +99,12 @@\n         return response()->json(['status_delete' => \"ok\"]);\n      \n     }\n     public function checkout(){\n-        $login = Session::get(\"user\");\n+\n+        if(Session::get(\"user\")){\n+            \n+        }\n     }\n     public function listcart(){\n         \n     }\n"
                },
                {
                    "date": 1719237931265,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -101,8 +101,11 @@\n     }\n     public function checkout(){\n \n         if(Session::get(\"user\")){\n+            return \"ok\";\n+        }\n+        else{\n             \n         }\n     }\n     public function listcart(){\n"
                },
                {
                    "date": 1719237943586,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -100,8 +100,9 @@\n      \n     }\n     public function checkout(){\n \n+        $status_login = \"belum\";\n         if(Session::get(\"user\")){\n             return \"ok\";\n         }\n         else{\n"
                },
                {
                    "date": 1719237957467,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -102,13 +102,11 @@\n     public function checkout(){\n \n         $status_login = \"belum\";\n         if(Session::get(\"user\")){\n-            return \"ok\";\n+            $status_login = \"login\";\n         }\n-        else{\n-            \n-        }\n+       \n     }\n     public function listcart(){\n         \n     }\n"
                },
                {
                    "date": 1719237965456,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -104,8 +104,9 @@\n         $status_login = \"belum\";\n         if(Session::get(\"user\")){\n             $status_login = \"login\";\n         }\n+        return response()->json(['status_delete' => $status_login]);\n        \n     }\n     public function listcart(){\n         \n"
                },
                {
                    "date": 1719239902589,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -104,9 +104,9 @@\n         $status_login = \"belum\";\n         if(Session::get(\"user\")){\n             $status_login = \"login\";\n         }\n-        return response()->json(['status_delete' => $status_login]);\n+        return response()->json(['status_login' => $status_login]);\n        \n     }\n     public function listcart(){\n         \n"
                },
                {
                    "date": 1719239913783,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -101,9 +101,9 @@\n     }\n     public function checkout(){\n \n         $status_login = \"belum\";\n-        if(Session::get(\"user\")){\n+        if(isset(Session::get(\"user\"))){\n             $status_login = \"login\";\n         }\n         return response()->json(['status_login' => $status_login]);\n        \n"
                },
                {
                    "date": 1719239946061,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -101,9 +101,9 @@\n     }\n     public function checkout(){\n \n         $status_login = \"belum\";\n-        if(isset(Session::get(\"user\"))){\n+        if(isset( Session::get(\"user\"))){\n             $status_login = \"login\";\n         }\n         return response()->json(['status_login' => $status_login]);\n        \n"
                },
                {
                    "date": 1719239977942,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -101,11 +101,15 @@\n     }\n     public function checkout(){\n \n         $status_login = \"belum\";\n-        if(isset( Session::get(\"user\"))){\n+        if(isset(Session::get('user'))){\n             $status_login = \"login\";\n         }\n+        if(isset(Session::get(\"user\")))\n+        {\n+            \n+        }\n         return response()->json(['status_login' => $status_login]);\n        \n     }\n     public function listcart(){\n"
                },
                {
                    "date": 1719240030990,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -101,15 +101,12 @@\n     }\n     public function checkout(){\n \n         $status_login = \"belum\";\n-        if(isset(Session::get('user'))){\n+        if(isset(Session::has('user'))){\n             $status_login = \"login\";\n         }\n-        if(isset(Session::get(\"user\")))\n-        {\n-            \n-        }\n+     \n         return response()->json(['status_login' => $status_login]);\n        \n     }\n     public function listcart(){\n"
                },
                {
                    "date": 1719240039307,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -101,9 +101,9 @@\n     }\n     public function checkout(){\n \n         $status_login = \"belum\";\n-        if(isset(Session::has('user'))){\n+        if(Session::has('user')){\n             $status_login = \"login\";\n         }\n      \n         return response()->json(['status_login' => $status_login]);\n"
                },
                {
                    "date": 1719240272397,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,180 @@\n+<?php\n+\n+namespace App\\Http\\Controllers;\n+\n+use Illuminate\\Http\\Request;\n+use Session;\n+use App\\Models\\Product;\n+use App\\Models\\ProductVariant;\n+\n+class CartController extends Controller\n+{\n+    /**\n+     * Display a listing of the resource.\n+     *\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function index()\n+    {\n+        $mycart_list = [];\n+        $mycart = [];\n+        $hasil = 0;\n+        $jumlahitems = 0;\n+        if(Session::get('product')){\n+            $mycarts = Session::get('product');\n+            foreach($mycarts as $i => $mycart){\n+                    $list_myitem = explode(\"_\",$mycarts[$i]);\n+                    $id_item = $list_myitem[0];\n+                    $qty_item = $list_myitem[1];\n+                    $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n+                    $name_produk = $search_produk[0]['names'];\n+                    $description_produk = $search_produk[0]['descriptions'];\n+                    $prices_produk = $search_produk[0]['prices'];\n+                    $discount_produk = $search_produk[0]['discounts'];\n+                    $images_produk = $search_produk[0]['images'];\n+                    $mycart_list[] = [\n+                        \"index\"=>$i,\n+                        \"category\"=>\"p\",\n+                        \"name\" =>$name_produk,\n+                        \"description\" => $description_produk,\n+                        \"variant\" => \"-\",\n+                        \"price\" => $prices_produk,\n+                        \"discount\" => $discount_produk,\n+                        \"image\" => $images_produk,\n+                        \"qty\" => $qty_item\n+                    ];\n+                    $jumlahitems += $qty_item;\n+                    $hasil += $qty_item * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+            }\n+        }\n+        $mycart_variants = [];\n+        if(Session::get('variantproduct')){\n+            $mycart_variants = Session::get('variantproduct');\n+            foreach($mycart_variants as $i => $mycart_variant){\n+                $list_myitem = explode(\"_\",$mycart_variants[$i]);\n+                $id_item = $list_myitem[0];\n+                $qty_items = $list_myitem[1];\n+                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n+                $name_produk = $search_produk[0]['nama_product'];\n+                $name_variant = $search_produk[0]['nama_variant'];\n+                $prices_produk = $search_produk[0]['harga_variant'];\n+                $description_produk = $search_produk[0]['description_product'];\n+                $discount_produk = $search_produk[0]['discount_variant'];\n+                $images_produk = $search_produk[0]['images_product'];\n+                $mycart_list[] = [\n+                    \"index\"=>$i,\n+                    \"category\"=>\"v\",\n+                    \"name\" =>$name_produk,\n+                    \"description\" => $description_produk,\n+                    \"variant\" => $name_variant,\n+                    \"price\" => $prices_produk,\n+                    \"discount\" => $discount_produk,\n+                    \"image\" => $images_produk,\n+                    \"qty\" => $qty_items\n+                ];\n+                $jumlahitems += $qty_items;\n+                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+            }\n+        }\n+        // $mycart_list = json_encode($mycart_list);\n+        \n+        return view(\"cart\",compact(\"mycart_list\",\"hasil\", \"jumlahitems\"));\n+    }\n+    public function deletecart(Request $request){\n+  \n+        $category_delete = $request->category_id;\n+        $index_delete = $request->index_id;\n+\n+        if($category_delete == \"p\"){\n+            $products[] =  Session::get('product');\n+            unset($products[$index_delete]);\n+            session()->put('product', $products);\n+        }\n+        else{\n+            // Second argument is a default value\n+            $variant_products[] =  Session::get('variantproduct');\n+            unset($variant_products[$index_delete]);\n+            session()->put('variantproduct', $variant_products);\n+        }  \n+        return response()->json(['status_delete' => \"ok\"]);\n+     \n+    }\n+    public function checkout(){\n+\n+        $status_login = \"belum\";\n+        if(!empty(Session::has('user'))){\n+            $status_login = \"login\";\n+        }\n+     \n+        return response()->json(['status_login' => $status_login]);\n+       \n+    }\n+    public function listcart(){\n+        \n+    }\n+    /**\n+     * Show the form for creating a new resource.\n+     *\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function create()\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Store a newly created resource in storage.\n+     *\n+     * @param  \\Illuminate\\Http\\Request  $request\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function store(Request $request)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Display the specified resource.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function show($id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Show the form for editing the specified resource.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function edit($id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Update the specified resource in storage.\n+     *\n+     * @param  \\Illuminate\\Http\\Request  $request\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function update(Request $request, $id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Remove the specified resource from storage.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function destroy($id)\n+    {\n+        //\n+    }\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1719241080856,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -103,190 +103,14 @@\n \n         $status_login = \"belum\";\n         if(!empty(Session::has('user'))){\n             $status_login = \"login\";\n-        }\n-     \n-        return response()->json(['status_login' => $status_login]);\n-       \n-    }\n-    public function listcart(){\n-        \n-    }\n-    /**\n-     * Show the form for creating a new resource.\n-     *\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function create()\n-    {\n-        //\n-    }\n \n-    /**\n-     * Store a newly created resource in storage.\n-     *\n-     * @param  \\Illuminate\\Http\\Request  $request\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function store(Request $request)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Display the specified resource.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function show($id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Show the form for editing the specified resource.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function edit($id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Update the specified resource in storage.\n-     *\n-     * @param  \\Illuminate\\Http\\Request  $request\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function update(Request $request, $id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Remove the specified resource from storage.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function destroy($id)\n-    {\n-        //\n-    }\n-}\n-<?php\n-\n-namespace App\\Http\\Controllers;\n-\n-use Illuminate\\Http\\Request;\n-use Session;\n-use App\\Models\\Product;\n-use App\\Models\\ProductVariant;\n-\n-class CartController extends Controller\n-{\n-    /**\n-     * Display a listing of the resource.\n-     *\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function index()\n-    {\n-        $mycart_list = [];\n-        $mycart = [];\n-        $hasil = 0;\n-        $jumlahitems = 0;\n-        if(Session::get('product')){\n-            $mycarts = Session::get('product');\n             foreach($mycarts as $i => $mycart){\n-                    $list_myitem = explode(\"_\",$mycarts[$i]);\n-                    $id_item = $list_myitem[0];\n-                    $qty_item = $list_myitem[1];\n-                    $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n-                    $name_produk = $search_produk[0]['names'];\n-                    $description_produk = $search_produk[0]['descriptions'];\n-                    $prices_produk = $search_produk[0]['prices'];\n-                    $discount_produk = $search_produk[0]['discounts'];\n-                    $images_produk = $search_produk[0]['images'];\n-                    $mycart_list[] = [\n-                        \"index\"=>$i,\n-                        \"category\"=>\"p\",\n-                        \"name\" =>$name_produk,\n-                        \"description\" => $description_produk,\n-                        \"variant\" => \"-\",\n-                        \"price\" => $prices_produk,\n-                        \"discount\" => $discount_produk,\n-                        \"image\" => $images_produk,\n-                        \"qty\" => $qty_item\n-                    ];\n-                    $jumlahitems += $qty_item;\n-                    $hasil += $qty_item * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+                $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n             }\n         }\n-        $mycart_variants = [];\n-        if(Session::get('variantproduct')){\n-            $mycart_variants = Session::get('variantproduct');\n-            foreach($mycart_variants as $i => $mycart_variant){\n-                $list_myitem = explode(\"_\",$mycart_variants[$i]);\n-                $id_item = $list_myitem[0];\n-                $qty_items = $list_myitem[1];\n-                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n-                $name_produk = $search_produk[0]['nama_product'];\n-                $name_variant = $search_produk[0]['nama_variant'];\n-                $prices_produk = $search_produk[0]['harga_variant'];\n-                $description_produk = $search_produk[0]['description_product'];\n-                $discount_produk = $search_produk[0]['discount_variant'];\n-                $images_produk = $search_produk[0]['images_product'];\n-                $mycart_list[] = [\n-                    \"index\"=>$i,\n-                    \"category\"=>\"v\",\n-                    \"name\" =>$name_produk,\n-                    \"description\" => $description_produk,\n-                    \"variant\" => $name_variant,\n-                    \"price\" => $prices_produk,\n-                    \"discount\" => $discount_produk,\n-                    \"image\" => $images_produk,\n-                    \"qty\" => $qty_items\n-                ];\n-                $jumlahitems += $qty_items;\n-                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-            }\n-        }\n-        // $mycart_list = json_encode($mycart_list);\n-        \n-        return view(\"cart\",compact(\"mycart_list\",\"hasil\", \"jumlahitems\"));\n-    }\n-    public function deletecart(Request $request){\n-  \n-        $category_delete = $request->category_id;\n-        $index_delete = $request->index_id;\n-\n-        if($category_delete == \"p\"){\n-            $products[] =  Session::get('product');\n-            unset($products[$index_delete]);\n-            session()->put('product', $products);\n-        }\n-        else{\n-            // Second argument is a default value\n-            $variant_products[] =  Session::get('variantproduct');\n-            unset($variant_products[$index_delete]);\n-            session()->put('variantproduct', $variant_products);\n-        }  \n-        return response()->json(['status_delete' => \"ok\"]);\n      \n-    }\n-    public function checkout(){\n-\n-        $status_login = \"belum\";\n-        if(Session::has('user')){\n-            $status_login = \"login\";\n-        }\n-     \n         return response()->json(['status_login' => $status_login]);\n        \n     }\n     public function listcart(){\n"
                },
                {
                    "date": 1719241120577,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -106,8 +106,9 @@\n             $status_login = \"login\";\n \n             foreach($mycarts as $i => $mycart){\n                 $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n+            \n             }\n         }\n      \n         return response()->json(['status_login' => $status_login]);\n"
                },
                {
                    "date": 1719241189677,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -105,8 +105,11 @@\n         if(!empty(Session::has('user'))){\n             $status_login = \"login\";\n \n             foreach($mycarts as $i => $mycart){\n+                $list_myitem = explode(\"_\",$mycarts[$i]);\n+                $id_item = $list_myitem[0];\n+                $qty_items = $list_myitem[1];\n                 $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n             \n             }\n         }\n"
                },
                {
                    "date": 1719241280198,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -109,9 +109,9 @@\n                 $list_myitem = explode(\"_\",$mycarts[$i]);\n                 $id_item = $list_myitem[0];\n                 $qty_items = $list_myitem[1];\n                 $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n-            \n+                \n             }\n         }\n      \n         return response()->json(['status_login' => $status_login]);\n"
                },
                {
                    "date": 1719241288698,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,188 @@\n+<?php\n+\n+namespace App\\Http\\Controllers;\n+\n+use Illuminate\\Http\\Request;\n+use Session;\n+use App\\Models\\Product;\n+use App\\Models\\ProductVariant;\n+\n+class CartController extends Controller\n+{\n+    /**\n+     * Display a listing of the resource.\n+     *\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function index()\n+    {\n+        $mycart_list = [];\n+        $mycart = [];\n+        $hasil = 0;\n+        $jumlahitems = 0;\n+        if(Session::get('product')){\n+            $mycarts = Session::get('product');\n+            foreach($mycarts as $i => $mycart){\n+                    $list_myitem = explode(\"_\",$mycarts[$i]);\n+                    $id_item = $list_myitem[0];\n+                    $qty_item = $list_myitem[1];\n+                    $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n+                    $name_produk = $search_produk[0]['names'];\n+                    $description_produk = $search_produk[0]['descriptions'];\n+                    $prices_produk = $search_produk[0]['prices'];\n+                    $discount_produk = $search_produk[0]['discounts'];\n+                    $images_produk = $search_produk[0]['images'];\n+                    $mycart_list[] = [\n+                        \"index\"=>$i,\n+                        \"category\"=>\"p\",\n+                        \"name\" =>$name_produk,\n+                        \"description\" => $description_produk,\n+                        \"variant\" => \"-\",\n+                        \"price\" => $prices_produk,\n+                        \"discount\" => $discount_produk,\n+                        \"image\" => $images_produk,\n+                        \"qty\" => $qty_item\n+                    ];\n+                    $jumlahitems += $qty_item;\n+                    $hasil += $qty_item * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+            }\n+        }\n+        $mycart_variants = [];\n+        if(Session::get('variantproduct')){\n+            $mycart_variants = Session::get('variantproduct');\n+            foreach($mycart_variants as $i => $mycart_variant){\n+                $list_myitem = explode(\"_\",$mycart_variants[$i]);\n+                $id_item = $list_myitem[0];\n+                $qty_items = $list_myitem[1];\n+                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n+                $name_produk = $search_produk[0]['nama_product'];\n+                $name_variant = $search_produk[0]['nama_variant'];\n+                $prices_produk = $search_produk[0]['harga_variant'];\n+                $description_produk = $search_produk[0]['description_product'];\n+                $discount_produk = $search_produk[0]['discount_variant'];\n+                $images_produk = $search_produk[0]['images_product'];\n+                $mycart_list[] = [\n+                    \"index\"=>$i,\n+                    \"category\"=>\"v\",\n+                    \"name\" =>$name_produk,\n+                    \"description\" => $description_produk,\n+                    \"variant\" => $name_variant,\n+                    \"price\" => $prices_produk,\n+                    \"discount\" => $discount_produk,\n+                    \"image\" => $images_produk,\n+                    \"qty\" => $qty_items\n+                ];\n+                $jumlahitems += $qty_items;\n+                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+            }\n+        }\n+        // $mycart_list = json_encode($mycart_list);\n+        \n+        return view(\"cart\",compact(\"mycart_list\",\"hasil\", \"jumlahitems\"));\n+    }\n+    public function deletecart(Request $request){\n+  \n+        $category_delete = $request->category_id;\n+        $index_delete = $request->index_id;\n+\n+        if($category_delete == \"p\"){\n+            $products[] =  Session::get('product');\n+            unset($products[$index_delete]);\n+            session()->put('product', $products);\n+        }\n+        else{\n+            // Second argument is a default value\n+            $variant_products[] =  Session::get('variantproduct');\n+            unset($variant_products[$index_delete]);\n+            session()->put('variantproduct', $variant_products);\n+        }  \n+        return response()->json(['status_delete' => \"ok\"]);\n+     \n+    }\n+    public function checkout(){\n+\n+        $status_login = \"belum\";\n+        if(!empty(Session::has('user'))){\n+            $status_login = \"login\";\n+\n+            foreach($mycarts as $i => $mycart){\n+                $list_myitem = explode(\"_\",$mycarts[$i]);\n+                $id_item = $list_myitem[0];\n+                $qty_items = $list_myitem[1];\n+                $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n+                $name_produk = $search_produk[0]['nama_product'];\n+            }\n+        }\n+     \n+        return response()->json(['status_login' => $status_login]);\n+       \n+    }\n+    public function listcart(){\n+        \n+    }\n+    /**\n+     * Show the form for creating a new resource.\n+     *\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function create()\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Store a newly created resource in storage.\n+     *\n+     * @param  \\Illuminate\\Http\\Request  $request\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function store(Request $request)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Display the specified resource.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function show($id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Show the form for editing the specified resource.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function edit($id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Update the specified resource in storage.\n+     *\n+     * @param  \\Illuminate\\Http\\Request  $request\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function update(Request $request, $id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Remove the specified resource from storage.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function destroy($id)\n+    {\n+        //\n+    }\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1719241309202,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -109,9 +109,10 @@\n                 $list_myitem = explode(\"_\",$mycarts[$i]);\n                 $id_item = $list_myitem[0];\n                 $qty_items = $list_myitem[1];\n                 $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n-                $name_produk = $search_produk[0]['nama_product'];\n+                $prices_produk = $search_produk[0]['prices'];\n+                $discount_produk = $search_produk[0]['discounts'];\n             }\n         }\n      \n         return response()->json(['status_login' => $status_login]);\n@@ -184,193 +185,5 @@\n     public function destroy($id)\n     {\n         //\n     }\n-}\n-<?php\n-\n-namespace App\\Http\\Controllers;\n-\n-use Illuminate\\Http\\Request;\n-use Session;\n-use App\\Models\\Product;\n-use App\\Models\\ProductVariant;\n-\n-class CartController extends Controller\n-{\n-    /**\n-     * Display a listing of the resource.\n-     *\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function index()\n-    {\n-        $mycart_list = [];\n-        $mycart = [];\n-        $hasil = 0;\n-        $jumlahitems = 0;\n-        if(Session::get('product')){\n-            $mycarts = Session::get('product');\n-            foreach($mycarts as $i => $mycart){\n-                    $list_myitem = explode(\"_\",$mycarts[$i]);\n-                    $id_item = $list_myitem[0];\n-                    $qty_item = $list_myitem[1];\n-                    $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n-                    $name_produk = $search_produk[0]['names'];\n-                    $description_produk = $search_produk[0]['descriptions'];\n-                    $prices_produk = $search_produk[0]['prices'];\n-                    $discount_produk = $search_produk[0]['discounts'];\n-                    $images_produk = $search_produk[0]['images'];\n-                    $mycart_list[] = [\n-                        \"index\"=>$i,\n-                        \"category\"=>\"p\",\n-                        \"name\" =>$name_produk,\n-                        \"description\" => $description_produk,\n-                        \"variant\" => \"-\",\n-                        \"price\" => $prices_produk,\n-                        \"discount\" => $discount_produk,\n-                        \"image\" => $images_produk,\n-                        \"qty\" => $qty_item\n-                    ];\n-                    $jumlahitems += $qty_item;\n-                    $hasil += $qty_item * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-            }\n-        }\n-        $mycart_variants = [];\n-        if(Session::get('variantproduct')){\n-            $mycart_variants = Session::get('variantproduct');\n-            foreach($mycart_variants as $i => $mycart_variant){\n-                $list_myitem = explode(\"_\",$mycart_variants[$i]);\n-                $id_item = $list_myitem[0];\n-                $qty_items = $list_myitem[1];\n-                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n-                $name_produk = $search_produk[0]['nama_product'];\n-                $name_variant = $search_produk[0]['nama_variant'];\n-                $prices_produk = $search_produk[0]['harga_variant'];\n-                $description_produk = $search_produk[0]['description_product'];\n-                $discount_produk = $search_produk[0]['discount_variant'];\n-                $images_produk = $search_produk[0]['images_product'];\n-                $mycart_list[] = [\n-                    \"index\"=>$i,\n-                    \"category\"=>\"v\",\n-                    \"name\" =>$name_produk,\n-                    \"description\" => $description_produk,\n-                    \"variant\" => $name_variant,\n-                    \"price\" => $prices_produk,\n-                    \"discount\" => $discount_produk,\n-                    \"image\" => $images_produk,\n-                    \"qty\" => $qty_items\n-                ];\n-                $jumlahitems += $qty_items;\n-                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-            }\n-        }\n-        // $mycart_list = json_encode($mycart_list);\n-        \n-        return view(\"cart\",compact(\"mycart_list\",\"hasil\", \"jumlahitems\"));\n-    }\n-    public function deletecart(Request $request){\n-  \n-        $category_delete = $request->category_id;\n-        $index_delete = $request->index_id;\n-\n-        if($category_delete == \"p\"){\n-            $products[] =  Session::get('product');\n-            unset($products[$index_delete]);\n-            session()->put('product', $products);\n-        }\n-        else{\n-            // Second argument is a default value\n-            $variant_products[] =  Session::get('variantproduct');\n-            unset($variant_products[$index_delete]);\n-            session()->put('variantproduct', $variant_products);\n-        }  \n-        return response()->json(['status_delete' => \"ok\"]);\n-     \n-    }\n-    public function checkout(){\n-\n-        $status_login = \"belum\";\n-        if(!empty(Session::has('user'))){\n-            $status_login = \"login\";\n-\n-            foreach($mycarts as $i => $mycart){\n-                $list_myitem = explode(\"_\",$mycarts[$i]);\n-                $id_item = $list_myitem[0];\n-                $qty_items = $list_myitem[1];\n-                $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n-                \n-            }\n-        }\n-     \n-        return response()->json(['status_login' => $status_login]);\n-       \n-    }\n-    public function listcart(){\n-        \n-    }\n-    /**\n-     * Show the form for creating a new resource.\n-     *\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function create()\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Store a newly created resource in storage.\n-     *\n-     * @param  \\Illuminate\\Http\\Request  $request\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function store(Request $request)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Display the specified resource.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function show($id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Show the form for editing the specified resource.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function edit($id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Update the specified resource in storage.\n-     *\n-     * @param  \\Illuminate\\Http\\Request  $request\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function update(Request $request, $id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Remove the specified resource from storage.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function destroy($id)\n-    {\n-        //\n-    }\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1719241598471,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -99,20 +99,21 @@\n         return response()->json(['status_delete' => \"ok\"]);\n      \n     }\n     public function checkout(){\n-\n+        \n         $status_login = \"belum\";\n         if(!empty(Session::has('user'))){\n             $status_login = \"login\";\n-\n+            $hasil = 0;\n             foreach($mycarts as $i => $mycart){\n                 $list_myitem = explode(\"_\",$mycarts[$i]);\n                 $id_item = $list_myitem[0];\n                 $qty_items = $list_myitem[1];\n                 $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n                 $prices_produk = $search_produk[0]['prices'];\n                 $discount_produk = $search_produk[0]['discounts'];\n+                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n             }\n         }\n      \n         return response()->json(['status_login' => $status_login]);\n"
                },
                {
                    "date": 1719241603723,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -111,9 +111,9 @@\n                 $qty_items = $list_myitem[1];\n                 $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n                 $prices_produk = $search_produk[0]['prices'];\n                 $discount_produk = $search_produk[0]['discounts'];\n-                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+                $hasil += $qty_item * ($prices_produk-(($prices_produk*$discount_produk)/100));\n             }\n         }\n      \n         return response()->json(['status_login' => $status_login]);\n"
                },
                {
                    "date": 1719241637894,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -104,16 +104,18 @@\n         $status_login = \"belum\";\n         if(!empty(Session::has('user'))){\n             $status_login = \"login\";\n             $hasil = 0;\n+            $jumlahitems = 0;\n             foreach($mycarts as $i => $mycart){\n                 $list_myitem = explode(\"_\",$mycarts[$i]);\n                 $id_item = $list_myitem[0];\n                 $qty_items = $list_myitem[1];\n                 $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n                 $prices_produk = $search_produk[0]['prices'];\n                 $discount_produk = $search_produk[0]['discounts'];\n-                $hasil += $qty_item * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+                $jumlahitems += $qty_items;\n             }\n         }\n      \n         return response()->json(['status_login' => $status_login]);\n"
                },
                {
                    "date": 1719241741408,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,8 +4,10 @@\n \n use Illuminate\\Http\\Request;\n use Session;\n use App\\Models\\Product;\n+use App\\Models\\Transaction;\n+use App\\Models\\TransactionHistory;\n use App\\Models\\ProductVariant;\n \n class CartController extends Controller\n {\n@@ -114,8 +116,9 @@\n                 $prices_produk = $search_produk[0]['prices'];\n                 $discount_produk = $search_produk[0]['discounts'];\n                 $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $jumlahitems += $qty_items;\n+                Product::insert([\"\"]);\n             }\n         }\n      \n         return response()->json(['status_login' => $status_login]);\n"
                },
                {
                    "date": 1719241861115,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -116,12 +116,14 @@\n                 $prices_produk = $search_produk[0]['prices'];\n                 $discount_produk = $search_produk[0]['discounts'];\n                 $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $jumlahitems += $qty_items;\n-                Product::insert([\"\"]);\n+               \n             }\n+            Transaction::insert([\"total_price\" => $hasil]);\n         }\n      \n+   \n         return response()->json(['status_login' => $status_login]);\n        \n     }\n     public function listcart(){\n"
                },
                {
                    "date": 1719241933236,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -116,8 +116,9 @@\n                 $prices_produk = $search_produk[0]['prices'];\n                 $discount_produk = $search_produk[0]['discounts'];\n                 $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $jumlahitems += $qty_items;\n+                $data = [];\n                \n             }\n             Transaction::insert([\"total_price\" => $hasil]);\n         }\n"
                },
                {
                    "date": 1719241953422,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -116,9 +116,9 @@\n                 $prices_produk = $search_produk[0]['prices'];\n                 $discount_produk = $search_produk[0]['discounts'];\n                 $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $jumlahitems += $qty_items;\n-                $data = [];\n+                $data[] = [];\n                \n             }\n             Transaction::insert([\"total_price\" => $hasil]);\n         }\n"
                },
                {
                    "date": 1719241963523,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -116,9 +116,13 @@\n                 $prices_produk = $search_produk[0]['prices'];\n                 $discount_produk = $search_produk[0]['discounts'];\n                 $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $jumlahitems += $qty_items;\n-                $data[] = [];\n+                $data = [\n+                    ['user_id'=>'Coder 1', 'subject_id'=> 4096],\n+                    ['user_id'=>'Coder 2', 'subject_id'=> 2048],\n+                    //...\n+                ];\n                \n             }\n             Transaction::insert([\"total_price\" => $hasil]);\n         }\n"
                },
                {
                    "date": 1719241983421,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -107,8 +107,9 @@\n         if(!empty(Session::has('user'))){\n             $status_login = \"login\";\n             $hasil = 0;\n             $jumlahitems = 0;\n+            $data = [];\n             foreach($mycarts as $i => $mycart){\n                 $list_myitem = explode(\"_\",$mycarts[$i]);\n                 $id_item = $list_myitem[0];\n                 $qty_items = $list_myitem[1];\n"
                },
                {
                    "date": 1719242111523,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -115,14 +115,14 @@\n                 $qty_items = $list_myitem[1];\n                 $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n                 $prices_produk = $search_produk[0]['prices'];\n                 $discount_produk = $search_produk[0]['discounts'];\n+                $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $jumlahitems += $qty_items;\n-                $data = [\n-                    ['user_id'=>'Coder 1', 'subject_id'=> 4096],\n-                    ['user_id'=>'Coder 2', 'subject_id'=> 2048],\n-                    //...\n+                $data_detail[] = [\n+                    ['id_transaction'=>'SFS_1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $hasil]\n+                   \n                 ];\n                \n             }\n             Transaction::insert([\"total_price\" => $hasil]);\n"
                },
                {
                    "date": 1719242131562,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -119,9 +119,9 @@\n                 $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $jumlahitems += $qty_items;\n                 $data_detail[] = [\n-                    ['id_transaction'=>'SFS_1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $hasil]\n+                    ['id_transaction'=>'SFS_1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1]\n                    \n                 ];\n                \n             }\n"
                },
                {
                    "date": 1719242162284,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -119,9 +119,9 @@\n                 $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $jumlahitems += $qty_items;\n                 $data_detail[] = [\n-                    ['id_transaction'=>'SFS_1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1]\n+                    ['id_transaction'=>'SFS_1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1];\n                    \n                 ];\n                \n             }\n"
                },
                {
                    "date": 1719242170131,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -118,9 +118,9 @@\n                 $discount_produk = $search_produk[0]['discounts'];\n                 $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $jumlahitems += $qty_items;\n-                $data_detail[] = [\n+                $data_detail = [\n                     ['id_transaction'=>'SFS_1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1];\n                    \n                 ];\n                \n"
                },
                {
                    "date": 1719242181360,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -118,12 +118,11 @@\n                 $discount_produk = $search_produk[0]['discounts'];\n                 $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $jumlahitems += $qty_items;\n-                $data_detail = [\n+                $data_detail[] = [\n                     ['id_transaction'=>'SFS_1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1];\n-                   \n-                ];\n+             \n                \n             }\n             Transaction::insert([\"total_price\" => $hasil]);\n         }\n"
                },
                {
                    "date": 1719242189652,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,203 @@\n+<?php\n+\n+namespace App\\Http\\Controllers;\n+\n+use Illuminate\\Http\\Request;\n+use Session;\n+use App\\Models\\Product;\n+use App\\Models\\Transaction;\n+use App\\Models\\TransactionHistory;\n+use App\\Models\\ProductVariant;\n+\n+class CartController extends Controller\n+{\n+    /**\n+     * Display a listing of the resource.\n+     *\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function index()\n+    {\n+        $mycart_list = [];\n+        $mycart = [];\n+        $hasil = 0;\n+        $jumlahitems = 0;\n+        if(Session::get('product')){\n+            $mycarts = Session::get('product');\n+            foreach($mycarts as $i => $mycart){\n+                    $list_myitem = explode(\"_\",$mycarts[$i]);\n+                    $id_item = $list_myitem[0];\n+                    $qty_item = $list_myitem[1];\n+                    $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n+                    $name_produk = $search_produk[0]['names'];\n+                    $description_produk = $search_produk[0]['descriptions'];\n+                    $prices_produk = $search_produk[0]['prices'];\n+                    $discount_produk = $search_produk[0]['discounts'];\n+                    $images_produk = $search_produk[0]['images'];\n+                    $mycart_list[] = [\n+                        \"index\"=>$i,\n+                        \"category\"=>\"p\",\n+                        \"name\" =>$name_produk,\n+                        \"description\" => $description_produk,\n+                        \"variant\" => \"-\",\n+                        \"price\" => $prices_produk,\n+                        \"discount\" => $discount_produk,\n+                        \"image\" => $images_produk,\n+                        \"qty\" => $qty_item\n+                    ];\n+                    $jumlahitems += $qty_item;\n+                    $hasil += $qty_item * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+            }\n+        }\n+        $mycart_variants = [];\n+        if(Session::get('variantproduct')){\n+            $mycart_variants = Session::get('variantproduct');\n+            foreach($mycart_variants as $i => $mycart_variant){\n+                $list_myitem = explode(\"_\",$mycart_variants[$i]);\n+                $id_item = $list_myitem[0];\n+                $qty_items = $list_myitem[1];\n+                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n+                $name_produk = $search_produk[0]['nama_product'];\n+                $name_variant = $search_produk[0]['nama_variant'];\n+                $prices_produk = $search_produk[0]['harga_variant'];\n+                $description_produk = $search_produk[0]['description_product'];\n+                $discount_produk = $search_produk[0]['discount_variant'];\n+                $images_produk = $search_produk[0]['images_product'];\n+                $mycart_list[] = [\n+                    \"index\"=>$i,\n+                    \"category\"=>\"v\",\n+                    \"name\" =>$name_produk,\n+                    \"description\" => $description_produk,\n+                    \"variant\" => $name_variant,\n+                    \"price\" => $prices_produk,\n+                    \"discount\" => $discount_produk,\n+                    \"image\" => $images_produk,\n+                    \"qty\" => $qty_items\n+                ];\n+                $jumlahitems += $qty_items;\n+                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+            }\n+        }\n+        // $mycart_list = json_encode($mycart_list);\n+        \n+        return view(\"cart\",compact(\"mycart_list\",\"hasil\", \"jumlahitems\"));\n+    }\n+    public function deletecart(Request $request){\n+  \n+        $category_delete = $request->category_id;\n+        $index_delete = $request->index_id;\n+\n+        if($category_delete == \"p\"){\n+            $products[] =  Session::get('product');\n+            unset($products[$index_delete]);\n+            session()->put('product', $products);\n+        }\n+        else{\n+            // Second argument is a default value\n+            $variant_products[] =  Session::get('variantproduct');\n+            unset($variant_products[$index_delete]);\n+            session()->put('variantproduct', $variant_products);\n+        }  \n+        return response()->json(['status_delete' => \"ok\"]);\n+     \n+    }\n+    public function checkout(){\n+        \n+        $status_login = \"belum\";\n+        if(!empty(Session::has('user'))){\n+            $status_login = \"login\";\n+            $hasil = 0;\n+            $jumlahitems = 0;\n+            $data = [];\n+            foreach($mycarts as $i => $mycart){\n+                $list_myitem = explode(\"_\",$mycarts[$i]);\n+                $id_item = $list_myitem[0];\n+                $qty_items = $list_myitem[1];\n+                $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n+                $prices_produk = $search_produk[0]['prices'];\n+                $discount_produk = $search_produk[0]['discounts'];\n+                $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+                $jumlahitems += $qty_items;\n+                $data_detail[] = [\n+                    ['id_transaction'=>'SFS_1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1]\n+                   \n+                ];\n+               \n+            }\n+            Transaction::insert([\"total_price\" => $hasil]);\n+        }\n+     \n+   \n+        return response()->json(['status_login' => $status_login]);\n+       \n+    }\n+    public function listcart(){\n+        \n+    }\n+    /**\n+     * Show the form for creating a new resource.\n+     *\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function create()\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Store a newly created resource in storage.\n+     *\n+     * @param  \\Illuminate\\Http\\Request  $request\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function store(Request $request)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Display the specified resource.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function show($id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Show the form for editing the specified resource.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function edit($id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Update the specified resource in storage.\n+     *\n+     * @param  \\Illuminate\\Http\\Request  $request\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function update(Request $request, $id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Remove the specified resource from storage.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function destroy($id)\n+    {\n+        //\n+    }\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1719242204344,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -124,9 +124,9 @@\n                    \n                 ];\n                \n             }\n-            Transaction::insert([\"total_price\" => $hasil]);\n+            TransactionHistory::insert([\"total_price\" => $hasil]);\n         }\n      \n    \n         return response()->json(['status_login' => $status_login]);\n@@ -199,207 +199,5 @@\n     public function destroy($id)\n     {\n         //\n     }\n-}\n-<?php\n-\n-namespace App\\Http\\Controllers;\n-\n-use Illuminate\\Http\\Request;\n-use Session;\n-use App\\Models\\Product;\n-use App\\Models\\Transaction;\n-use App\\Models\\TransactionHistory;\n-use App\\Models\\ProductVariant;\n-\n-class CartController extends Controller\n-{\n-    /**\n-     * Display a listing of the resource.\n-     *\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function index()\n-    {\n-        $mycart_list = [];\n-        $mycart = [];\n-        $hasil = 0;\n-        $jumlahitems = 0;\n-        if(Session::get('product')){\n-            $mycarts = Session::get('product');\n-            foreach($mycarts as $i => $mycart){\n-                    $list_myitem = explode(\"_\",$mycarts[$i]);\n-                    $id_item = $list_myitem[0];\n-                    $qty_item = $list_myitem[1];\n-                    $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n-                    $name_produk = $search_produk[0]['names'];\n-                    $description_produk = $search_produk[0]['descriptions'];\n-                    $prices_produk = $search_produk[0]['prices'];\n-                    $discount_produk = $search_produk[0]['discounts'];\n-                    $images_produk = $search_produk[0]['images'];\n-                    $mycart_list[] = [\n-                        \"index\"=>$i,\n-                        \"category\"=>\"p\",\n-                        \"name\" =>$name_produk,\n-                        \"description\" => $description_produk,\n-                        \"variant\" => \"-\",\n-                        \"price\" => $prices_produk,\n-                        \"discount\" => $discount_produk,\n-                        \"image\" => $images_produk,\n-                        \"qty\" => $qty_item\n-                    ];\n-                    $jumlahitems += $qty_item;\n-                    $hasil += $qty_item * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-            }\n-        }\n-        $mycart_variants = [];\n-        if(Session::get('variantproduct')){\n-            $mycart_variants = Session::get('variantproduct');\n-            foreach($mycart_variants as $i => $mycart_variant){\n-                $list_myitem = explode(\"_\",$mycart_variants[$i]);\n-                $id_item = $list_myitem[0];\n-                $qty_items = $list_myitem[1];\n-                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n-                $name_produk = $search_produk[0]['nama_product'];\n-                $name_variant = $search_produk[0]['nama_variant'];\n-                $prices_produk = $search_produk[0]['harga_variant'];\n-                $description_produk = $search_produk[0]['description_product'];\n-                $discount_produk = $search_produk[0]['discount_variant'];\n-                $images_produk = $search_produk[0]['images_product'];\n-                $mycart_list[] = [\n-                    \"index\"=>$i,\n-                    \"category\"=>\"v\",\n-                    \"name\" =>$name_produk,\n-                    \"description\" => $description_produk,\n-                    \"variant\" => $name_variant,\n-                    \"price\" => $prices_produk,\n-                    \"discount\" => $discount_produk,\n-                    \"image\" => $images_produk,\n-                    \"qty\" => $qty_items\n-                ];\n-                $jumlahitems += $qty_items;\n-                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-            }\n-        }\n-        // $mycart_list = json_encode($mycart_list);\n-        \n-        return view(\"cart\",compact(\"mycart_list\",\"hasil\", \"jumlahitems\"));\n-    }\n-    public function deletecart(Request $request){\n-  \n-        $category_delete = $request->category_id;\n-        $index_delete = $request->index_id;\n-\n-        if($category_delete == \"p\"){\n-            $products[] =  Session::get('product');\n-            unset($products[$index_delete]);\n-            session()->put('product', $products);\n-        }\n-        else{\n-            // Second argument is a default value\n-            $variant_products[] =  Session::get('variantproduct');\n-            unset($variant_products[$index_delete]);\n-            session()->put('variantproduct', $variant_products);\n-        }  \n-        return response()->json(['status_delete' => \"ok\"]);\n-     \n-    }\n-    public function checkout(){\n-        \n-        $status_login = \"belum\";\n-        if(!empty(Session::has('user'))){\n-            $status_login = \"login\";\n-            $hasil = 0;\n-            $jumlahitems = 0;\n-            $data = [];\n-            foreach($mycarts as $i => $mycart){\n-                $list_myitem = explode(\"_\",$mycarts[$i]);\n-                $id_item = $list_myitem[0];\n-                $qty_items = $list_myitem[1];\n-                $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n-                $prices_produk = $search_produk[0]['prices'];\n-                $discount_produk = $search_produk[0]['discounts'];\n-                $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-                $jumlahitems += $qty_items;\n-                $data_detail[] = [\n-                    ['id_transaction'=>'SFS_1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1];\n-             \n-               \n-            }\n-            Transaction::insert([\"total_price\" => $hasil]);\n-        }\n-     \n-   \n-        return response()->json(['status_login' => $status_login]);\n-       \n-    }\n-    public function listcart(){\n-        \n-    }\n-    /**\n-     * Show the form for creating a new resource.\n-     *\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function create()\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Store a newly created resource in storage.\n-     *\n-     * @param  \\Illuminate\\Http\\Request  $request\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function store(Request $request)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Display the specified resource.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function show($id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Show the form for editing the specified resource.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function edit($id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Update the specified resource in storage.\n-     *\n-     * @param  \\Illuminate\\Http\\Request  $request\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function update(Request $request, $id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Remove the specified resource from storage.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function destroy($id)\n-    {\n-        //\n-    }\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1719242211076,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -124,9 +124,9 @@\n                    \n                 ];\n                \n             }\n-            TransactionHistory::insert([\"total_price\" => $hasil]);\n+            TransactionHistory::insert($data_detail);\n         }\n      \n    \n         return response()->json(['status_login' => $status_login]);\n"
                },
                {
                    "date": 1719242249905,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -108,8 +108,9 @@\n             $status_login = \"login\";\n             $hasil = 0;\n             $jumlahitems = 0;\n             $data = [];\n+            $mycarts = Session::get('product');\n             foreach($mycarts as $i => $mycart){\n                 $list_myitem = explode(\"_\",$mycarts[$i]);\n                 $id_item = $list_myitem[0];\n                 $qty_items = $list_myitem[1];\n"
                },
                {
                    "date": 1719242297786,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -119,12 +119,12 @@\n                 $discount_produk = $search_produk[0]['discounts'];\n                 $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $jumlahitems += $qty_items;\n-                $data_detail[] = [\n-                    ['id_transaction'=>'SFS_1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1]\n+                // $data_detail[] = [\n+                //     ['id_transaction'=>'SFS_1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1]\n                    \n-                ];\n+                // ];\n                \n             }\n             TransactionHistory::insert($data_detail);\n         }\n"
                },
                {
                    "date": 1719242323612,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -119,12 +119,12 @@\n                 $discount_produk = $search_produk[0]['discounts'];\n                 $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $jumlahitems += $qty_items;\n-                // $data_detail[] = [\n-                //     ['id_transaction'=>'SFS_1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1]\n+                $data_detail = [\n+                    ['id_transaction'=>'SFS_1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1]\n                    \n-                // ];\n+                ];\n                \n             }\n             TransactionHistory::insert($data_detail);\n         }\n"
                },
                {
                    "date": 1719242339779,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -121,8 +121,9 @@\n                 $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $jumlahitems += $qty_items;\n                 $data_detail = [\n                     ['id_transaction'=>'SFS_1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1]\n+                    ['id_transaction'=>'SFS_2', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1]\n                    \n                 ];\n                \n             }\n"
                },
                {
                    "date": 1719242361599,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -120,10 +120,10 @@\n                 $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $jumlahitems += $qty_items;\n                 $data_detail = [\n-                    ['id_transaction'=>'SFS_1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1]\n-                    ['id_transaction'=>'SFS_2', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1]\n+                    ['id_transaction'=>'1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1],\n+                    ['id_transaction'=>'2', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1]\n                    \n                 ];\n                \n             }\n"
                },
                {
                    "date": 1719242403228,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -120,10 +120,10 @@\n                 $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $jumlahitems += $qty_items;\n                 $data_detail = [\n-                    ['id_transaction'=>'1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1],\n-                    ['id_transaction'=>'2', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1]\n+                    ['id_transaction'=>'1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now()],\n+                    ['id_transaction'=>'2', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now()]\n                    \n                 ];\n                \n             }\n"
                },
                {
                    "date": 1719242557928,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -119,11 +119,10 @@\n                 $discount_produk = $search_produk[0]['discounts'];\n                 $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $jumlahitems += $qty_items;\n-                $data_detail = [\n+                $data_detail[] = [\n                     ['id_transaction'=>'1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now()],\n-                    ['id_transaction'=>'2', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now()]\n                    \n                 ];\n                \n             }\n"
                },
                {
                    "date": 1719242590065,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -119,9 +119,9 @@\n                 $discount_produk = $search_produk[0]['discounts'];\n                 $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $jumlahitems += $qty_items;\n-                $data_detail[] = [\n+                $data_detail = [\n                     ['id_transaction'=>'1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now()],\n                    \n                 ];\n                \n"
                },
                {
                    "date": 1719242836953,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -119,9 +119,9 @@\n                 $discount_produk = $search_produk[0]['discounts'];\n                 $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $jumlahitems += $qty_items;\n-                $data_detail = [\n+                $data_detail[0] = [\n                     ['id_transaction'=>'1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now()],\n                    \n                 ];\n                \n"
                },
                {
                    "date": 1719242945417,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -119,9 +119,9 @@\n                 $discount_produk = $search_produk[0]['discounts'];\n                 $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $jumlahitems += $qty_items;\n-                $data_detail[0] = [\n+                $data_detail = [\n                     ['id_transaction'=>'1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now()],\n                    \n                 ];\n                \n"
                },
                {
                    "date": 1719242964518,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -119,10 +119,10 @@\n                 $discount_produk = $search_produk[0]['discounts'];\n                 $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $jumlahitems += $qty_items;\n-                $data_detail = [\n-                    ['id_transaction'=>'1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now()],\n+                $data_detail = array(                    ['id_transaction'=>'1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now()],\n+                )[\n                    \n                 ];\n                \n             }\n"
                },
                {
                    "date": 1719242969786,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -119,10 +119,10 @@\n                 $discount_produk = $search_produk[0]['discounts'];\n                 $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $jumlahitems += $qty_items;\n-                $data_detail = array(                    ['id_transaction'=>'1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now()],\n-                )[\n+                $data_detail = [\n+                    ['id_transaction'=>'1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now()],\n                    \n                 ];\n                \n             }\n"
                },
                {
                    "date": 1719243008492,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -119,9 +119,9 @@\n                 $discount_produk = $search_produk[0]['discounts'];\n                 $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $jumlahitems += $qty_items;\n-                $data_detail = [\n+                $data_detail[][$i] = [\n                     ['id_transaction'=>'1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now()],\n                    \n                 ];\n                \n"
                },
                {
                    "date": 1719243118835,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -119,9 +119,9 @@\n                 $discount_produk = $search_produk[0]['discounts'];\n                 $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $jumlahitems += $qty_items;\n-                $data_detail[][$i] = [\n+                $data_detail[] = [\n                     ['id_transaction'=>'1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now()],\n                    \n                 ];\n                \n"
                },
                {
                    "date": 1719243133006,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -120,9 +120,9 @@\n                 $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $jumlahitems += $qty_items;\n                 $data_detail[] = [\n-                    ['id_transaction'=>'1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now()],\n+                    'id_transaction'=>'1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now(),\n                    \n                 ];\n                \n             }\n"
                },
                {
                    "date": 1719243244683,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,205 @@\n+<?php\n+\n+namespace App\\Http\\Controllers;\n+\n+use Illuminate\\Http\\Request;\n+use Session;\n+use App\\Models\\Product;\n+use App\\Models\\Transaction;\n+use App\\Models\\TransactionHistory;\n+use App\\Models\\ProductVariant;\n+\n+class CartController extends Controller\n+{\n+    /**\n+     * Display a listing of the resource.\n+     *\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function index()\n+    {\n+        $mycart_list = [];\n+        $mycart = [];\n+        $hasil = 0;\n+        $jumlahitems = 0;\n+        if(Session::get('product')){\n+            $mycarts = Session::get('product');\n+            foreach($mycarts as $i => $mycart){\n+                    $list_myitem = explode(\"_\",$mycarts[$i]);\n+                    $id_item = $list_myitem[0];\n+                    $qty_item = $list_myitem[1];\n+                    $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n+                    $name_produk = $search_produk[0]['names'];\n+                    $description_produk = $search_produk[0]['descriptions'];\n+                    $prices_produk = $search_produk[0]['prices'];\n+                    $discount_produk = $search_produk[0]['discounts'];\n+                    $images_produk = $search_produk[0]['images'];\n+                    $mycart_list[] = [\n+                        \"index\"=>$i,\n+                        \"category\"=>\"p\",\n+                        \"name\" =>$name_produk,\n+                        \"description\" => $description_produk,\n+                        \"variant\" => \"-\",\n+                        \"price\" => $prices_produk,\n+                        \"discount\" => $discount_produk,\n+                        \"image\" => $images_produk,\n+                        \"qty\" => $qty_item\n+                    ];\n+                    $jumlahitems += $qty_item;\n+                    $hasil += $qty_item * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+            }\n+        }\n+        $mycart_variants = [];\n+        if(Session::get('variantproduct')){\n+            $mycart_variants = Session::get('variantproduct');\n+            foreach($mycart_variants as $i => $mycart_variant){\n+                $list_myitem = explode(\"_\",$mycart_variants[$i]);\n+                $id_item = $list_myitem[0];\n+                $qty_items = $list_myitem[1];\n+                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n+                $name_produk = $search_produk[0]['nama_product'];\n+                $name_variant = $search_produk[0]['nama_variant'];\n+                $prices_produk = $search_produk[0]['harga_variant'];\n+                $description_produk = $search_produk[0]['description_product'];\n+                $discount_produk = $search_produk[0]['discount_variant'];\n+                $images_produk = $search_produk[0]['images_product'];\n+                $mycart_list[] = [\n+                    \"index\"=>$i,\n+                    \"category\"=>\"v\",\n+                    \"name\" =>$name_produk,\n+                    \"description\" => $description_produk,\n+                    \"variant\" => $name_variant,\n+                    \"price\" => $prices_produk,\n+                    \"discount\" => $discount_produk,\n+                    \"image\" => $images_produk,\n+                    \"qty\" => $qty_items\n+                ];\n+                $jumlahitems += $qty_items;\n+                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+            }\n+        }\n+        // $mycart_list = json_encode($mycart_list);\n+        \n+        return view(\"cart\",compact(\"mycart_list\",\"hasil\", \"jumlahitems\"));\n+    }\n+    public function deletecart(Request $request){\n+  \n+        $category_delete = $request->category_id;\n+        $index_delete = $request->index_id;\n+\n+        if($category_delete == \"p\"){\n+            $products[] =  Session::get('product');\n+            unset($products[$index_delete]);\n+            session()->put('product', $products);\n+        }\n+        else{\n+            // Second argument is a default value\n+            $variant_products[] =  Session::get('variantproduct');\n+            unset($variant_products[$index_delete]);\n+            session()->put('variantproduct', $variant_products);\n+        }  \n+        return response()->json(['status_delete' => \"ok\"]);\n+     \n+    }\n+    public function checkout(){\n+        \n+        $status_login = \"belum\";\n+        if(!empty(Session::has('user'))){\n+            $status_login = \"login\";\n+            $hasil = 0;\n+            $jumlahitems = 0;\n+            $data = [];\n+            $mycarts = Session::get('product');\n+            foreach($mycarts as $i => $mycart){\n+                $list_myitem = explode(\"_\",$mycarts[$i]);\n+                $id_item = $list_myitem[0];\n+                $qty_items = $list_myitem[1];\n+                $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n+                $prices_produk = $search_produk[0]['prices'];\n+                $discount_produk = $search_produk[0]['discounts'];\n+                $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+                $jumlahitems += $qty_items;\n+                $data_detail[] = [\n+                    'id_transaction'=>'1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now(),\n+                   \n+                ];\n+               \n+            }\n+            Transaction::insert($data_detail);\n+            TransactionHistory::insert($data_detail);\n+        }\n+     \n+   \n+        return response()->json(['status_login' => $status_login]);\n+       \n+    }\n+    public function listcart(){\n+        \n+    }\n+    /**\n+     * Show the form for creating a new resource.\n+     *\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function create()\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Store a newly created resource in storage.\n+     *\n+     * @param  \\Illuminate\\Http\\Request  $request\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function store(Request $request)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Display the specified resource.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function show($id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Show the form for editing the specified resource.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function edit($id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Update the specified resource in storage.\n+     *\n+     * @param  \\Illuminate\\Http\\Request  $request\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function update(Request $request, $id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Remove the specified resource from storage.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function destroy($id)\n+    {\n+        //\n+    }\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1719243251500,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,205 @@\n+<?php\n+\n+namespace App\\Http\\Controllers;\n+\n+use Illuminate\\Http\\Request;\n+use Session;\n+use App\\Models\\Product;\n+use App\\Models\\Transaction;\n+use App\\Models\\TransactionHistory;\n+use App\\Models\\ProductVariant;\n+\n+class CartController extends Controller\n+{\n+    /**\n+     * Display a listing of the resource.\n+     *\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function index()\n+    {\n+        $mycart_list = [];\n+        $mycart = [];\n+        $hasil = 0;\n+        $jumlahitems = 0;\n+        if(Session::get('product')){\n+            $mycarts = Session::get('product');\n+            foreach($mycarts as $i => $mycart){\n+                    $list_myitem = explode(\"_\",$mycarts[$i]);\n+                    $id_item = $list_myitem[0];\n+                    $qty_item = $list_myitem[1];\n+                    $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n+                    $name_produk = $search_produk[0]['names'];\n+                    $description_produk = $search_produk[0]['descriptions'];\n+                    $prices_produk = $search_produk[0]['prices'];\n+                    $discount_produk = $search_produk[0]['discounts'];\n+                    $images_produk = $search_produk[0]['images'];\n+                    $mycart_list[] = [\n+                        \"index\"=>$i,\n+                        \"category\"=>\"p\",\n+                        \"name\" =>$name_produk,\n+                        \"description\" => $description_produk,\n+                        \"variant\" => \"-\",\n+                        \"price\" => $prices_produk,\n+                        \"discount\" => $discount_produk,\n+                        \"image\" => $images_produk,\n+                        \"qty\" => $qty_item\n+                    ];\n+                    $jumlahitems += $qty_item;\n+                    $hasil += $qty_item * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+            }\n+        }\n+        $mycart_variants = [];\n+        if(Session::get('variantproduct')){\n+            $mycart_variants = Session::get('variantproduct');\n+            foreach($mycart_variants as $i => $mycart_variant){\n+                $list_myitem = explode(\"_\",$mycart_variants[$i]);\n+                $id_item = $list_myitem[0];\n+                $qty_items = $list_myitem[1];\n+                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n+                $name_produk = $search_produk[0]['nama_product'];\n+                $name_variant = $search_produk[0]['nama_variant'];\n+                $prices_produk = $search_produk[0]['harga_variant'];\n+                $description_produk = $search_produk[0]['description_product'];\n+                $discount_produk = $search_produk[0]['discount_variant'];\n+                $images_produk = $search_produk[0]['images_product'];\n+                $mycart_list[] = [\n+                    \"index\"=>$i,\n+                    \"category\"=>\"v\",\n+                    \"name\" =>$name_produk,\n+                    \"description\" => $description_produk,\n+                    \"variant\" => $name_variant,\n+                    \"price\" => $prices_produk,\n+                    \"discount\" => $discount_produk,\n+                    \"image\" => $images_produk,\n+                    \"qty\" => $qty_items\n+                ];\n+                $jumlahitems += $qty_items;\n+                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+            }\n+        }\n+        // $mycart_list = json_encode($mycart_list);\n+        \n+        return view(\"cart\",compact(\"mycart_list\",\"hasil\", \"jumlahitems\"));\n+    }\n+    public function deletecart(Request $request){\n+  \n+        $category_delete = $request->category_id;\n+        $index_delete = $request->index_id;\n+\n+        if($category_delete == \"p\"){\n+            $products[] =  Session::get('product');\n+            unset($products[$index_delete]);\n+            session()->put('product', $products);\n+        }\n+        else{\n+            // Second argument is a default value\n+            $variant_products[] =  Session::get('variantproduct');\n+            unset($variant_products[$index_delete]);\n+            session()->put('variantproduct', $variant_products);\n+        }  \n+        return response()->json(['status_delete' => \"ok\"]);\n+     \n+    }\n+    public function checkout(){\n+        \n+        $status_login = \"belum\";\n+        if(!empty(Session::has('user'))){\n+            $status_login = \"login\";\n+            $hasil = 0;\n+            $jumlahitems = 0;\n+            $data = [];\n+            $mycarts = Session::get('product');\n+            foreach($mycarts as $i => $mycart){\n+                $list_myitem = explode(\"_\",$mycarts[$i]);\n+                $id_item = $list_myitem[0];\n+                $qty_items = $list_myitem[1];\n+                $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n+                $prices_produk = $search_produk[0]['prices'];\n+                $discount_produk = $search_produk[0]['discounts'];\n+                $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+                $jumlahitems += $qty_items;\n+                $data_detail[] = [\n+                    'id_transaction'=>'1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now(),\n+                   \n+                ];\n+               \n+            }\n+            Transaction::insert($hasil);\n+            TransactionHistory::insert($data_detail);\n+        }\n+     \n+   \n+        return response()->json(['status_login' => $status_login]);\n+       \n+    }\n+    public function listcart(){\n+        \n+    }\n+    /**\n+     * Show the form for creating a new resource.\n+     *\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function create()\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Store a newly created resource in storage.\n+     *\n+     * @param  \\Illuminate\\Http\\Request  $request\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function store(Request $request)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Display the specified resource.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function show($id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Show the form for editing the specified resource.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function edit($id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Update the specified resource in storage.\n+     *\n+     * @param  \\Illuminate\\Http\\Request  $request\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function update(Request $request, $id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Remove the specified resource from storage.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function destroy($id)\n+    {\n+        //\n+    }\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1719243262721,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -107,9 +107,9 @@\n         if(!empty(Session::has('user'))){\n             $status_login = \"login\";\n             $hasil = 0;\n             $jumlahitems = 0;\n-            $data = [];\n+            \n             $mycarts = Session::get('product');\n             foreach($mycarts as $i => $mycart){\n                 $list_myitem = explode(\"_\",$mycarts[$i]);\n                 $id_item = $list_myitem[0];\n@@ -201,414 +201,5 @@\n     public function destroy($id)\n     {\n         //\n     }\n-}\n-<?php\n-\n-namespace App\\Http\\Controllers;\n-\n-use Illuminate\\Http\\Request;\n-use Session;\n-use App\\Models\\Product;\n-use App\\Models\\Transaction;\n-use App\\Models\\TransactionHistory;\n-use App\\Models\\ProductVariant;\n-\n-class CartController extends Controller\n-{\n-    /**\n-     * Display a listing of the resource.\n-     *\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function index()\n-    {\n-        $mycart_list = [];\n-        $mycart = [];\n-        $hasil = 0;\n-        $jumlahitems = 0;\n-        if(Session::get('product')){\n-            $mycarts = Session::get('product');\n-            foreach($mycarts as $i => $mycart){\n-                    $list_myitem = explode(\"_\",$mycarts[$i]);\n-                    $id_item = $list_myitem[0];\n-                    $qty_item = $list_myitem[1];\n-                    $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n-                    $name_produk = $search_produk[0]['names'];\n-                    $description_produk = $search_produk[0]['descriptions'];\n-                    $prices_produk = $search_produk[0]['prices'];\n-                    $discount_produk = $search_produk[0]['discounts'];\n-                    $images_produk = $search_produk[0]['images'];\n-                    $mycart_list[] = [\n-                        \"index\"=>$i,\n-                        \"category\"=>\"p\",\n-                        \"name\" =>$name_produk,\n-                        \"description\" => $description_produk,\n-                        \"variant\" => \"-\",\n-                        \"price\" => $prices_produk,\n-                        \"discount\" => $discount_produk,\n-                        \"image\" => $images_produk,\n-                        \"qty\" => $qty_item\n-                    ];\n-                    $jumlahitems += $qty_item;\n-                    $hasil += $qty_item * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-            }\n-        }\n-        $mycart_variants = [];\n-        if(Session::get('variantproduct')){\n-            $mycart_variants = Session::get('variantproduct');\n-            foreach($mycart_variants as $i => $mycart_variant){\n-                $list_myitem = explode(\"_\",$mycart_variants[$i]);\n-                $id_item = $list_myitem[0];\n-                $qty_items = $list_myitem[1];\n-                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n-                $name_produk = $search_produk[0]['nama_product'];\n-                $name_variant = $search_produk[0]['nama_variant'];\n-                $prices_produk = $search_produk[0]['harga_variant'];\n-                $description_produk = $search_produk[0]['description_product'];\n-                $discount_produk = $search_produk[0]['discount_variant'];\n-                $images_produk = $search_produk[0]['images_product'];\n-                $mycart_list[] = [\n-                    \"index\"=>$i,\n-                    \"category\"=>\"v\",\n-                    \"name\" =>$name_produk,\n-                    \"description\" => $description_produk,\n-                    \"variant\" => $name_variant,\n-                    \"price\" => $prices_produk,\n-                    \"discount\" => $discount_produk,\n-                    \"image\" => $images_produk,\n-                    \"qty\" => $qty_items\n-                ];\n-                $jumlahitems += $qty_items;\n-                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-            }\n-        }\n-        // $mycart_list = json_encode($mycart_list);\n-        \n-        return view(\"cart\",compact(\"mycart_list\",\"hasil\", \"jumlahitems\"));\n-    }\n-    public function deletecart(Request $request){\n-  \n-        $category_delete = $request->category_id;\n-        $index_delete = $request->index_id;\n-\n-        if($category_delete == \"p\"){\n-            $products[] =  Session::get('product');\n-            unset($products[$index_delete]);\n-            session()->put('product', $products);\n-        }\n-        else{\n-            // Second argument is a default value\n-            $variant_products[] =  Session::get('variantproduct');\n-            unset($variant_products[$index_delete]);\n-            session()->put('variantproduct', $variant_products);\n-        }  \n-        return response()->json(['status_delete' => \"ok\"]);\n-     \n-    }\n-    public function checkout(){\n-        \n-        $status_login = \"belum\";\n-        if(!empty(Session::has('user'))){\n-            $status_login = \"login\";\n-            $hasil = 0;\n-            $jumlahitems = 0;\n-            $data = [];\n-            $mycarts = Session::get('product');\n-            foreach($mycarts as $i => $mycart){\n-                $list_myitem = explode(\"_\",$mycarts[$i]);\n-                $id_item = $list_myitem[0];\n-                $qty_items = $list_myitem[1];\n-                $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n-                $prices_produk = $search_produk[0]['prices'];\n-                $discount_produk = $search_produk[0]['discounts'];\n-                $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-                $jumlahitems += $qty_items;\n-                $data_detail[] = [\n-                    'id_transaction'=>'1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now(),\n-                   \n-                ];\n-               \n-            }\n-            Transaction::insert($data_detail);\n-            TransactionHistory::insert($data_detail);\n-        }\n-     \n-   \n-        return response()->json(['status_login' => $status_login]);\n-       \n-    }\n-    public function listcart(){\n-        \n-    }\n-    /**\n-     * Show the form for creating a new resource.\n-     *\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function create()\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Store a newly created resource in storage.\n-     *\n-     * @param  \\Illuminate\\Http\\Request  $request\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function store(Request $request)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Display the specified resource.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function show($id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Show the form for editing the specified resource.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function edit($id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Update the specified resource in storage.\n-     *\n-     * @param  \\Illuminate\\Http\\Request  $request\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function update(Request $request, $id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Remove the specified resource from storage.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function destroy($id)\n-    {\n-        //\n-    }\n-}\n-<?php\n-\n-namespace App\\Http\\Controllers;\n-\n-use Illuminate\\Http\\Request;\n-use Session;\n-use App\\Models\\Product;\n-use App\\Models\\Transaction;\n-use App\\Models\\TransactionHistory;\n-use App\\Models\\ProductVariant;\n-\n-class CartController extends Controller\n-{\n-    /**\n-     * Display a listing of the resource.\n-     *\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function index()\n-    {\n-        $mycart_list = [];\n-        $mycart = [];\n-        $hasil = 0;\n-        $jumlahitems = 0;\n-        if(Session::get('product')){\n-            $mycarts = Session::get('product');\n-            foreach($mycarts as $i => $mycart){\n-                    $list_myitem = explode(\"_\",$mycarts[$i]);\n-                    $id_item = $list_myitem[0];\n-                    $qty_item = $list_myitem[1];\n-                    $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n-                    $name_produk = $search_produk[0]['names'];\n-                    $description_produk = $search_produk[0]['descriptions'];\n-                    $prices_produk = $search_produk[0]['prices'];\n-                    $discount_produk = $search_produk[0]['discounts'];\n-                    $images_produk = $search_produk[0]['images'];\n-                    $mycart_list[] = [\n-                        \"index\"=>$i,\n-                        \"category\"=>\"p\",\n-                        \"name\" =>$name_produk,\n-                        \"description\" => $description_produk,\n-                        \"variant\" => \"-\",\n-                        \"price\" => $prices_produk,\n-                        \"discount\" => $discount_produk,\n-                        \"image\" => $images_produk,\n-                        \"qty\" => $qty_item\n-                    ];\n-                    $jumlahitems += $qty_item;\n-                    $hasil += $qty_item * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-            }\n-        }\n-        $mycart_variants = [];\n-        if(Session::get('variantproduct')){\n-            $mycart_variants = Session::get('variantproduct');\n-            foreach($mycart_variants as $i => $mycart_variant){\n-                $list_myitem = explode(\"_\",$mycart_variants[$i]);\n-                $id_item = $list_myitem[0];\n-                $qty_items = $list_myitem[1];\n-                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n-                $name_produk = $search_produk[0]['nama_product'];\n-                $name_variant = $search_produk[0]['nama_variant'];\n-                $prices_produk = $search_produk[0]['harga_variant'];\n-                $description_produk = $search_produk[0]['description_product'];\n-                $discount_produk = $search_produk[0]['discount_variant'];\n-                $images_produk = $search_produk[0]['images_product'];\n-                $mycart_list[] = [\n-                    \"index\"=>$i,\n-                    \"category\"=>\"v\",\n-                    \"name\" =>$name_produk,\n-                    \"description\" => $description_produk,\n-                    \"variant\" => $name_variant,\n-                    \"price\" => $prices_produk,\n-                    \"discount\" => $discount_produk,\n-                    \"image\" => $images_produk,\n-                    \"qty\" => $qty_items\n-                ];\n-                $jumlahitems += $qty_items;\n-                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-            }\n-        }\n-        // $mycart_list = json_encode($mycart_list);\n-        \n-        return view(\"cart\",compact(\"mycart_list\",\"hasil\", \"jumlahitems\"));\n-    }\n-    public function deletecart(Request $request){\n-  \n-        $category_delete = $request->category_id;\n-        $index_delete = $request->index_id;\n-\n-        if($category_delete == \"p\"){\n-            $products[] =  Session::get('product');\n-            unset($products[$index_delete]);\n-            session()->put('product', $products);\n-        }\n-        else{\n-            // Second argument is a default value\n-            $variant_products[] =  Session::get('variantproduct');\n-            unset($variant_products[$index_delete]);\n-            session()->put('variantproduct', $variant_products);\n-        }  \n-        return response()->json(['status_delete' => \"ok\"]);\n-     \n-    }\n-    public function checkout(){\n-        \n-        $status_login = \"belum\";\n-        if(!empty(Session::has('user'))){\n-            $status_login = \"login\";\n-            $hasil = 0;\n-            $jumlahitems = 0;\n-            $data = [];\n-            $mycarts = Session::get('product');\n-            foreach($mycarts as $i => $mycart){\n-                $list_myitem = explode(\"_\",$mycarts[$i]);\n-                $id_item = $list_myitem[0];\n-                $qty_items = $list_myitem[1];\n-                $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n-                $prices_produk = $search_produk[0]['prices'];\n-                $discount_produk = $search_produk[0]['discounts'];\n-                $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-                $jumlahitems += $qty_items;\n-                $data_detail[] = [\n-                    'id_transaction'=>'1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now(),\n-                   \n-                ];\n-               \n-            }\n-            TransactionHistory::insert($data_detail);\n-        }\n-     \n-   \n-        return response()->json(['status_login' => $status_login]);\n-       \n-    }\n-    public function listcart(){\n-        \n-    }\n-    /**\n-     * Show the form for creating a new resource.\n-     *\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function create()\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Store a newly created resource in storage.\n-     *\n-     * @param  \\Illuminate\\Http\\Request  $request\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function store(Request $request)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Display the specified resource.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function show($id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Show the form for editing the specified resource.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function edit($id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Update the specified resource in storage.\n-     *\n-     * @param  \\Illuminate\\Http\\Request  $request\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function update(Request $request, $id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Remove the specified resource from storage.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function destroy($id)\n-    {\n-        //\n-    }\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1719243298089,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -125,9 +125,15 @@\n                    \n                 ];\n                \n             }\n-            Transaction::insert($hasil);\n+            Transaction::insert( [\n+                'nama'             => $request->nama_anak[$key],\n+                'jenis_kelamin'    => $request->gender_anak[$key],\n+                'tempat_tgl_lahir' => $request->tmt[$key],\n+                'tgl_baptis'       => $request->baptis_anak[$key],\n+                'tgl_sidi'         => $request->sidi_anak[$key],\n+            ]);\n             TransactionHistory::insert($data_detail);\n         }\n      \n    \n"
                },
                {
                    "date": 1719243315823,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,211 @@\n+<?php\n+\n+namespace App\\Http\\Controllers;\n+\n+use Illuminate\\Http\\Request;\n+use Session;\n+use App\\Models\\Product;\n+use App\\Models\\Transaction;\n+use App\\Models\\TransactionHistory;\n+use App\\Models\\ProductVariant;\n+\n+class CartController extends Controller\n+{\n+    /**\n+     * Display a listing of the resource.\n+     *\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function index()\n+    {\n+        $mycart_list = [];\n+        $mycart = [];\n+        $hasil = 0;\n+        $jumlahitems = 0;\n+        if(Session::get('product')){\n+            $mycarts = Session::get('product');\n+            foreach($mycarts as $i => $mycart){\n+                    $list_myitem = explode(\"_\",$mycarts[$i]);\n+                    $id_item = $list_myitem[0];\n+                    $qty_item = $list_myitem[1];\n+                    $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n+                    $name_produk = $search_produk[0]['names'];\n+                    $description_produk = $search_produk[0]['descriptions'];\n+                    $prices_produk = $search_produk[0]['prices'];\n+                    $discount_produk = $search_produk[0]['discounts'];\n+                    $images_produk = $search_produk[0]['images'];\n+                    $mycart_list[] = [\n+                        \"index\"=>$i,\n+                        \"category\"=>\"p\",\n+                        \"name\" =>$name_produk,\n+                        \"description\" => $description_produk,\n+                        \"variant\" => \"-\",\n+                        \"price\" => $prices_produk,\n+                        \"discount\" => $discount_produk,\n+                        \"image\" => $images_produk,\n+                        \"qty\" => $qty_item\n+                    ];\n+                    $jumlahitems += $qty_item;\n+                    $hasil += $qty_item * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+            }\n+        }\n+        $mycart_variants = [];\n+        if(Session::get('variantproduct')){\n+            $mycart_variants = Session::get('variantproduct');\n+            foreach($mycart_variants as $i => $mycart_variant){\n+                $list_myitem = explode(\"_\",$mycart_variants[$i]);\n+                $id_item = $list_myitem[0];\n+                $qty_items = $list_myitem[1];\n+                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n+                $name_produk = $search_produk[0]['nama_product'];\n+                $name_variant = $search_produk[0]['nama_variant'];\n+                $prices_produk = $search_produk[0]['harga_variant'];\n+                $description_produk = $search_produk[0]['description_product'];\n+                $discount_produk = $search_produk[0]['discount_variant'];\n+                $images_produk = $search_produk[0]['images_product'];\n+                $mycart_list[] = [\n+                    \"index\"=>$i,\n+                    \"category\"=>\"v\",\n+                    \"name\" =>$name_produk,\n+                    \"description\" => $description_produk,\n+                    \"variant\" => $name_variant,\n+                    \"price\" => $prices_produk,\n+                    \"discount\" => $discount_produk,\n+                    \"image\" => $images_produk,\n+                    \"qty\" => $qty_items\n+                ];\n+                $jumlahitems += $qty_items;\n+                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+            }\n+        }\n+        // $mycart_list = json_encode($mycart_list);\n+        \n+        return view(\"cart\",compact(\"mycart_list\",\"hasil\", \"jumlahitems\"));\n+    }\n+    public function deletecart(Request $request){\n+  \n+        $category_delete = $request->category_id;\n+        $index_delete = $request->index_id;\n+\n+        if($category_delete == \"p\"){\n+            $products[] =  Session::get('product');\n+            unset($products[$index_delete]);\n+            session()->put('product', $products);\n+        }\n+        else{\n+            // Second argument is a default value\n+            $variant_products[] =  Session::get('variantproduct');\n+            unset($variant_products[$index_delete]);\n+            session()->put('variantproduct', $variant_products);\n+        }  \n+        return response()->json(['status_delete' => \"ok\"]);\n+     \n+    }\n+    public function checkout(){\n+        \n+        $status_login = \"belum\";\n+        if(!empty(Session::has('user'))){\n+            $status_login = \"login\";\n+            $hasil = 0;\n+            $jumlahitems = 0;\n+            \n+            $mycarts = Session::get('product');\n+            foreach($mycarts as $i => $mycart){\n+                $list_myitem = explode(\"_\",$mycarts[$i]);\n+                $id_item = $list_myitem[0];\n+                $qty_items = $list_myitem[1];\n+                $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n+                $prices_produk = $search_produk[0]['prices'];\n+                $discount_produk = $search_produk[0]['discounts'];\n+                $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+                $jumlahitems += $qty_items;\n+                $data_detail[] = [\n+                    'id_transaction'=>'1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now(),\n+                   \n+                ];\n+               \n+            }\n+            Transaction::insert( [\n+                'total_price'             => $hasil,\n+                'jenis_kelamin'    => $request->gender_anak[$key],\n+                'tempat_tgl_lahir' => $request->tmt[$key],\n+                'tgl_baptis'       => $request->baptis_anak[$key],\n+                'tgl_sidi'         => $request->sidi_anak[$key],\n+            ]);\n+            TransactionHistory::insert($data_detail);\n+        }\n+     \n+   \n+        return response()->json(['status_login' => $status_login]);\n+       \n+    }\n+    public function listcart(){\n+        \n+    }\n+    /**\n+     * Show the form for creating a new resource.\n+     *\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function create()\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Store a newly created resource in storage.\n+     *\n+     * @param  \\Illuminate\\Http\\Request  $request\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function store(Request $request)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Display the specified resource.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function show($id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Show the form for editing the specified resource.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function edit($id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Update the specified resource in storage.\n+     *\n+     * @param  \\Illuminate\\Http\\Request  $request\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function update(Request $request, $id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Remove the specified resource from storage.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function destroy($id)\n+    {\n+        //\n+    }\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1719243334571,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -127,9 +127,9 @@\n                \n             }\n             Transaction::insert( [\n                 'total_price'             => $hasil,\n-                'jenis_kelamin'    => $request->gender_anak[$key],\n+                'total_qty'    => $jumlahitems,\n                 'tempat_tgl_lahir' => $request->tmt[$key],\n                 'tgl_baptis'       => $request->baptis_anak[$key],\n                 'tgl_sidi'         => $request->sidi_anak[$key],\n             ]);\n@@ -207,216 +207,5 @@\n     public function destroy($id)\n     {\n         //\n     }\n-}\n-<?php\n-\n-namespace App\\Http\\Controllers;\n-\n-use Illuminate\\Http\\Request;\n-use Session;\n-use App\\Models\\Product;\n-use App\\Models\\Transaction;\n-use App\\Models\\TransactionHistory;\n-use App\\Models\\ProductVariant;\n-\n-class CartController extends Controller\n-{\n-    /**\n-     * Display a listing of the resource.\n-     *\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function index()\n-    {\n-        $mycart_list = [];\n-        $mycart = [];\n-        $hasil = 0;\n-        $jumlahitems = 0;\n-        if(Session::get('product')){\n-            $mycarts = Session::get('product');\n-            foreach($mycarts as $i => $mycart){\n-                    $list_myitem = explode(\"_\",$mycarts[$i]);\n-                    $id_item = $list_myitem[0];\n-                    $qty_item = $list_myitem[1];\n-                    $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n-                    $name_produk = $search_produk[0]['names'];\n-                    $description_produk = $search_produk[0]['descriptions'];\n-                    $prices_produk = $search_produk[0]['prices'];\n-                    $discount_produk = $search_produk[0]['discounts'];\n-                    $images_produk = $search_produk[0]['images'];\n-                    $mycart_list[] = [\n-                        \"index\"=>$i,\n-                        \"category\"=>\"p\",\n-                        \"name\" =>$name_produk,\n-                        \"description\" => $description_produk,\n-                        \"variant\" => \"-\",\n-                        \"price\" => $prices_produk,\n-                        \"discount\" => $discount_produk,\n-                        \"image\" => $images_produk,\n-                        \"qty\" => $qty_item\n-                    ];\n-                    $jumlahitems += $qty_item;\n-                    $hasil += $qty_item * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-            }\n-        }\n-        $mycart_variants = [];\n-        if(Session::get('variantproduct')){\n-            $mycart_variants = Session::get('variantproduct');\n-            foreach($mycart_variants as $i => $mycart_variant){\n-                $list_myitem = explode(\"_\",$mycart_variants[$i]);\n-                $id_item = $list_myitem[0];\n-                $qty_items = $list_myitem[1];\n-                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n-                $name_produk = $search_produk[0]['nama_product'];\n-                $name_variant = $search_produk[0]['nama_variant'];\n-                $prices_produk = $search_produk[0]['harga_variant'];\n-                $description_produk = $search_produk[0]['description_product'];\n-                $discount_produk = $search_produk[0]['discount_variant'];\n-                $images_produk = $search_produk[0]['images_product'];\n-                $mycart_list[] = [\n-                    \"index\"=>$i,\n-                    \"category\"=>\"v\",\n-                    \"name\" =>$name_produk,\n-                    \"description\" => $description_produk,\n-                    \"variant\" => $name_variant,\n-                    \"price\" => $prices_produk,\n-                    \"discount\" => $discount_produk,\n-                    \"image\" => $images_produk,\n-                    \"qty\" => $qty_items\n-                ];\n-                $jumlahitems += $qty_items;\n-                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-            }\n-        }\n-        // $mycart_list = json_encode($mycart_list);\n-        \n-        return view(\"cart\",compact(\"mycart_list\",\"hasil\", \"jumlahitems\"));\n-    }\n-    public function deletecart(Request $request){\n-  \n-        $category_delete = $request->category_id;\n-        $index_delete = $request->index_id;\n-\n-        if($category_delete == \"p\"){\n-            $products[] =  Session::get('product');\n-            unset($products[$index_delete]);\n-            session()->put('product', $products);\n-        }\n-        else{\n-            // Second argument is a default value\n-            $variant_products[] =  Session::get('variantproduct');\n-            unset($variant_products[$index_delete]);\n-            session()->put('variantproduct', $variant_products);\n-        }  \n-        return response()->json(['status_delete' => \"ok\"]);\n-     \n-    }\n-    public function checkout(){\n-        \n-        $status_login = \"belum\";\n-        if(!empty(Session::has('user'))){\n-            $status_login = \"login\";\n-            $hasil = 0;\n-            $jumlahitems = 0;\n-            \n-            $mycarts = Session::get('product');\n-            foreach($mycarts as $i => $mycart){\n-                $list_myitem = explode(\"_\",$mycarts[$i]);\n-                $id_item = $list_myitem[0];\n-                $qty_items = $list_myitem[1];\n-                $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n-                $prices_produk = $search_produk[0]['prices'];\n-                $discount_produk = $search_produk[0]['discounts'];\n-                $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-                $jumlahitems += $qty_items;\n-                $data_detail[] = [\n-                    'id_transaction'=>'1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now(),\n-                   \n-                ];\n-               \n-            }\n-            Transaction::insert( [\n-                'nama'             => $request->nama_anak[$key],\n-                'jenis_kelamin'    => $request->gender_anak[$key],\n-                'tempat_tgl_lahir' => $request->tmt[$key],\n-                'tgl_baptis'       => $request->baptis_anak[$key],\n-                'tgl_sidi'         => $request->sidi_anak[$key],\n-            ]);\n-            TransactionHistory::insert($data_detail);\n-        }\n-     \n-   \n-        return response()->json(['status_login' => $status_login]);\n-       \n-    }\n-    public function listcart(){\n-        \n-    }\n-    /**\n-     * Show the form for creating a new resource.\n-     *\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function create()\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Store a newly created resource in storage.\n-     *\n-     * @param  \\Illuminate\\Http\\Request  $request\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function store(Request $request)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Display the specified resource.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function show($id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Show the form for editing the specified resource.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function edit($id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Update the specified resource in storage.\n-     *\n-     * @param  \\Illuminate\\Http\\Request  $request\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function update(Request $request, $id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Remove the specified resource from storage.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function destroy($id)\n-    {\n-        //\n-    }\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1719243393713,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -126,13 +126,13 @@\n                 ];\n                \n             }\n             Transaction::insert( [\n-                'total_price'             => $hasil,\n-                'total_qty'    => $jumlahitems,\n-                'tempat_tgl_lahir' => $request->tmt[$key],\n-                'tgl_baptis'       => $request->baptis_anak[$key],\n-                'tgl_sidi'         => $request->sidi_anak[$key],\n+                'total_price'                => $hasil,\n+                'total_qty'                  => $jumlahitems,\n+                'updated_at'                 => now(),\n+                'created_at'                 => now(),\n+                'transaction_status'         => 1,\n             ]);\n             TransactionHistory::insert($data_detail);\n         }\n      \n"
                },
                {
                    "date": 1719243572965,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -125,8 +125,11 @@\n                    \n                 ];\n                \n             }\n+            foreach($data_detail as $item){\n+                \n+            }\n             Transaction::insert( [\n                 'total_price'                => $hasil,\n                 'total_qty'                  => $jumlahitems,\n                 'updated_at'                 => now(),\n"
                },
                {
                    "date": 1719243578437,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -126,9 +126,11 @@\n                 ];\n                \n             }\n             foreach($data_detail as $item){\n-                \n+                if(){\n+                    \n+                }\n             }\n             Transaction::insert( [\n                 'total_price'                => $hasil,\n                 'total_qty'                  => $jumlahitems,\n"
                },
                {
                    "date": 1719243679909,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -126,9 +126,9 @@\n                 ];\n                \n             }\n             foreach($data_detail as $item){\n-                if(){\n+                if($item->){\n                     \n                 }\n             }\n             Transaction::insert( [\n"
                },
                {
                    "date": 1719243707548,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -126,11 +126,9 @@\n                 ];\n                \n             }\n             foreach($data_detail as $item){\n-                if($item->){\n-                    \n-                }\n+                $item->'id_transaction' = '1';\n             }\n             Transaction::insert( [\n                 'total_price'                => $hasil,\n                 'total_qty'                  => $jumlahitems,\n"
                },
                {
                    "date": 1719243714808,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -126,9 +126,9 @@\n                 ];\n                \n             }\n             foreach($data_detail as $item){\n-                $item->'id_transaction' = '1';\n+                $item->id_transaction = '1';\n             }\n             Transaction::insert( [\n                 'total_price'                => $hasil,\n                 'total_qty'                  => $jumlahitems,\n"
                },
                {
                    "date": 1719243735988,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -125,18 +125,19 @@\n                    \n                 ];\n                \n             }\n-            foreach($data_detail as $item){\n-                $item->id_transaction = '1';\n-            }\n-            Transaction::insert( [\n+          \n+            $mytransaction = Transaction::insert( [\n                 'total_price'                => $hasil,\n                 'total_qty'                  => $jumlahitems,\n                 'updated_at'                 => now(),\n                 'created_at'                 => now(),\n                 'transaction_status'         => 1,\n             ]);\n+            foreach($data_detail as $item){\n+                $item->id_transaction = $mytransaction->id();\n+            }\n             TransactionHistory::insert($data_detail);\n         }\n      \n    \n"
                },
                {
                    "date": 1719243759794,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -134,9 +134,9 @@\n                 'created_at'                 => now(),\n                 'transaction_status'         => 1,\n             ]);\n             foreach($data_detail as $item){\n-                $item->id_transaction = $mytransaction->id();\n+                $item->id_transaction = $mytransaction->id;\n             }\n             TransactionHistory::insert($data_detail);\n         }\n      \n"
                },
                {
                    "date": 1719243820080,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -126,9 +126,9 @@\n                 ];\n                \n             }\n           \n-            $mytransaction = Transaction::insert( [\n+            $mytransaction = Transaction::create( [\n                 'total_price'                => $hasil,\n                 'total_qty'                  => $jumlahitems,\n                 'updated_at'                 => now(),\n                 'created_at'                 => now(),\n"
                },
                {
                    "date": 1719243856901,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -134,9 +134,9 @@\n                 'created_at'                 => now(),\n                 'transaction_status'         => 1,\n             ]);\n             foreach($data_detail as $item){\n-                $item->id_transaction = $mytransaction->id;\n+                $item['id_transaction'] = $mytransaction->id;\n             }\n             TransactionHistory::insert($data_detail);\n         }\n      \n"
                },
                {
                    "date": 1719243951192,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -134,9 +134,9 @@\n                 'created_at'                 => now(),\n                 'transaction_status'         => 1,\n             ]);\n             foreach($data_detail as $item){\n-                $item['id_transaction'] = $mytransaction->id;\n+                $data_detail['id_transaction'] = $mytransaction->id;\n             }\n             TransactionHistory::insert($data_detail);\n         }\n      \n"
                },
                {
                    "date": 1719244009216,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -134,9 +134,9 @@\n                 'created_at'                 => now(),\n                 'transaction_status'         => 1,\n             ]);\n             foreach($data_detail as $item){\n-                $data_detail['id_transaction'] = $mytransaction->id;\n+                $item['id_transaction'] = $mytransaction->id;\n             }\n             TransactionHistory::insert($data_detail);\n         }\n      \n"
                },
                {
                    "date": 1719244014766,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -134,9 +134,9 @@\n                 'created_at'                 => now(),\n                 'transaction_status'         => 1,\n             ]);\n             foreach($data_detail as $item){\n-                $item['id_transaction'] = $mytransaction->id;\n+                $item['id_transaction'] = 5;\n             }\n             TransactionHistory::insert($data_detail);\n         }\n      \n"
                },
                {
                    "date": 1719244046950,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -126,9 +126,9 @@\n                 ];\n                \n             }\n           \n-            $mytransaction = Transaction::create( [\n+            $mytransaction = Transaction::insert( [\n                 'total_price'                => $hasil,\n                 'total_qty'                  => $jumlahitems,\n                 'updated_at'                 => now(),\n                 'created_at'                 => now(),\n"
                },
                {
                    "date": 1719244061551,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -132,9 +132,9 @@\n                 'total_qty'                  => $jumlahitems,\n                 'updated_at'                 => now(),\n                 'created_at'                 => now(),\n                 'transaction_status'         => 1,\n-            ]);\n+            ])->lastInsertId();\n             foreach($data_detail as $item){\n                 $item['id_transaction'] = 5;\n             }\n             TransactionHistory::insert($data_detail);\n"
                },
                {
                    "date": 1719244102019,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -134,9 +134,9 @@\n                 'created_at'                 => now(),\n                 'transaction_status'         => 1,\n             ])->lastInsertId();\n             foreach($data_detail as $item){\n-                $item['id_transaction'] = 5;\n+                $item[0]['id_transaction'] = 5;\n             }\n             TransactionHistory::insert($data_detail);\n         }\n      \n"
                },
                {
                    "date": 1719244118462,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -132,9 +132,9 @@\n                 'total_qty'                  => $jumlahitems,\n                 'updated_at'                 => now(),\n                 'created_at'                 => now(),\n                 'transaction_status'         => 1,\n-            ])->lastInsertId();\n+            ]);\n             foreach($data_detail as $item){\n                 $item[0]['id_transaction'] = 5;\n             }\n             TransactionHistory::insert($data_detail);\n"
                },
                {
                    "date": 1719244150470,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -133,9 +133,9 @@\n                 'updated_at'                 => now(),\n                 'created_at'                 => now(),\n                 'transaction_status'         => 1,\n             ]);\n-            foreach($data_detail as $item){\n+            foreach($data_detail){\n                 $item[0]['id_transaction'] = 5;\n             }\n             TransactionHistory::insert($data_detail);\n         }\n"
                },
                {
                    "date": 1719244155877,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -133,9 +133,9 @@\n                 'updated_at'                 => now(),\n                 'created_at'                 => now(),\n                 'transaction_status'         => 1,\n             ]);\n-            foreach($data_detail){\n+            foreach($data_detail as $item){\n                 $item[0]['id_transaction'] = 5;\n             }\n             TransactionHistory::insert($data_detail);\n         }\n"
                },
                {
                    "date": 1719244175723,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -134,9 +134,9 @@\n                 'created_at'                 => now(),\n                 'transaction_status'         => 1,\n             ]);\n             foreach($data_detail as $item){\n-                $item[0]['id_transaction'] = 5;\n+                $data_detail[0]['id_transaction'] = 5;\n             }\n             TransactionHistory::insert($data_detail);\n         }\n      \n"
                },
                {
                    "date": 1719244196987,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -133,10 +133,10 @@\n                 'updated_at'                 => now(),\n                 'created_at'                 => now(),\n                 'transaction_status'         => 1,\n             ]);\n-            foreach($data_detail as $item){\n-                $data_detail[0]['id_transaction'] = 5;\n+            foreach($data_detail as $key => $item){\n+                $data_detail[$key]['id_transaction'] = 5;\n             }\n             TransactionHistory::insert($data_detail);\n         }\n      \n"
                },
                {
                    "date": 1719244269714,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -127,8 +127,9 @@\n                \n             }\n           \n             $mytransaction = Transaction::insert( [\n+                'id_user'                    => Session::get('id_user'),\n                 'total_price'                => $hasil,\n                 'total_qty'                  => $jumlahitems,\n                 'updated_at'                 => now(),\n                 'created_at'                 => now(),\n"
                },
                {
                    "date": 1719244334733,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -135,9 +135,9 @@\n                 'created_at'                 => now(),\n                 'transaction_status'         => 1,\n             ]);\n             foreach($data_detail as $key => $item){\n-                $data_detail[$key]['id_transaction'] = 5;\n+                $data_detail['id_transaction'] = 5;\n             }\n             TransactionHistory::insert($data_detail);\n         }\n      \n"
                },
                {
                    "date": 1719244383737,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -127,17 +127,17 @@\n                \n             }\n           \n             $mytransaction = Transaction::insert( [\n-                'id_user'                    => Session::get('id_user'),\n+                'id_user'                    => \"1\",\n                 'total_price'                => $hasil,\n                 'total_qty'                  => $jumlahitems,\n                 'updated_at'                 => now(),\n                 'created_at'                 => now(),\n                 'transaction_status'         => 1,\n             ]);\n             foreach($data_detail as $key => $item){\n-                $data_detail['id_transaction'] = 5;\n+                $data_detail[$key]['id_transaction'] = 5;\n             }\n             TransactionHistory::insert($data_detail);\n         }\n      \n"
                },
                {
                    "date": 1719244435267,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,8 +17,9 @@\n      * @return \\Illuminate\\Http\\Response\n      */\n     public function index()\n     {\n+        date_default_timezone_set('Asia/Jakarta');\n         $mycart_list = [];\n         $mycart = [];\n         $hasil = 0;\n         $jumlahitems = 0;\n"
                },
                {
                    "date": 1719244501425,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -126,11 +126,11 @@\n                    \n                 ];\n                \n             }\n-          \n+            $mysession_id = Session::get(\"id_user\");\n             $mytransaction = Transaction::insert( [\n-                'id_user'                    => \"1\",\n+                'id_user'                    => $id_user,\n                 'total_price'                => $hasil,\n                 'total_qty'                  => $jumlahitems,\n                 'updated_at'                 => now(),\n                 'created_at'                 => now(),\n"
                },
                {
                    "date": 1719244548775,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,217 @@\n+<?php\n+\n+namespace App\\Http\\Controllers;\n+\n+use Illuminate\\Http\\Request;\n+use Session;\n+use App\\Models\\Product;\n+use App\\Models\\Transaction;\n+use App\\Models\\TransactionHistory;\n+use App\\Models\\ProductVariant;\n+\n+class CartController extends Controller\n+{\n+    /**\n+     * Display a listing of the resource.\n+     *\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function index()\n+    {\n+        date_default_timezone_set('Asia/Jakarta');\n+        $mycart_list = [];\n+        $mycart = [];\n+        $hasil = 0;\n+        $jumlahitems = 0;\n+        if(Session::get('product')){\n+            $mycarts = Session::get('product');\n+            foreach($mycarts as $i => $mycart){\n+                    $list_myitem = explode(\"_\",$mycarts[$i]);\n+                    $id_item = $list_myitem[0];\n+                    $qty_item = $list_myitem[1];\n+                    $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n+                    $name_produk = $search_produk[0]['names'];\n+                    $description_produk = $search_produk[0]['descriptions'];\n+                    $prices_produk = $search_produk[0]['prices'];\n+                    $discount_produk = $search_produk[0]['discounts'];\n+                    $images_produk = $search_produk[0]['images'];\n+                    $mycart_list[] = [\n+                        \"index\"=>$i,\n+                        \"category\"=>\"p\",\n+                        \"name\" =>$name_produk,\n+                        \"description\" => $description_produk,\n+                        \"variant\" => \"-\",\n+                        \"price\" => $prices_produk,\n+                        \"discount\" => $discount_produk,\n+                        \"image\" => $images_produk,\n+                        \"qty\" => $qty_item\n+                    ];\n+                    $jumlahitems += $qty_item;\n+                    $hasil += $qty_item * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+            }\n+        }\n+        $mycart_variants = [];\n+        if(Session::get('variantproduct')){\n+            $mycart_variants = Session::get('variantproduct');\n+            foreach($mycart_variants as $i => $mycart_variant){\n+                $list_myitem = explode(\"_\",$mycart_variants[$i]);\n+                $id_item = $list_myitem[0];\n+                $qty_items = $list_myitem[1];\n+                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n+                $name_produk = $search_produk[0]['nama_product'];\n+                $name_variant = $search_produk[0]['nama_variant'];\n+                $prices_produk = $search_produk[0]['harga_variant'];\n+                $description_produk = $search_produk[0]['description_product'];\n+                $discount_produk = $search_produk[0]['discount_variant'];\n+                $images_produk = $search_produk[0]['images_product'];\n+                $mycart_list[] = [\n+                    \"index\"=>$i,\n+                    \"category\"=>\"v\",\n+                    \"name\" =>$name_produk,\n+                    \"description\" => $description_produk,\n+                    \"variant\" => $name_variant,\n+                    \"price\" => $prices_produk,\n+                    \"discount\" => $discount_produk,\n+                    \"image\" => $images_produk,\n+                    \"qty\" => $qty_items\n+                ];\n+                $jumlahitems += $qty_items;\n+                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+            }\n+        }\n+        // $mycart_list = json_encode($mycart_list);\n+        \n+        return view(\"cart\",compact(\"mycart_list\",\"hasil\", \"jumlahitems\"));\n+    }\n+    public function deletecart(Request $request){\n+  \n+        $category_delete = $request->category_id;\n+        $index_delete = $request->index_id;\n+\n+        if($category_delete == \"p\"){\n+            $products[] =  Session::get('product');\n+            unset($products[$index_delete]);\n+            session()->put('product', $products);\n+        }\n+        else{\n+            // Second argument is a default value\n+            $variant_products[] =  Session::get('variantproduct');\n+            unset($variant_products[$index_delete]);\n+            session()->put('variantproduct', $variant_products);\n+        }  \n+        return response()->json(['status_delete' => \"ok\"]);\n+     \n+    }\n+    public function checkout(){\n+        \n+        $status_login = \"belum\";\n+        if(!empty(Session::has('user'))){\n+            $status_login = \"login\";\n+            $hasil = 0;\n+            $jumlahitems = 0;\n+            \n+            $mycarts = Session::get('product');\n+            foreach($mycarts as $i => $mycart){\n+                $list_myitem = explode(\"_\",$mycarts[$i]);\n+                $id_item = $list_myitem[0];\n+                $qty_items = $list_myitem[1];\n+                $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n+                $prices_produk = $search_produk[0]['prices'];\n+                $discount_produk = $search_produk[0]['discounts'];\n+                $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+                $jumlahitems += $qty_items;\n+                $data_detail[] = [\n+                    'id_transaction'=>'1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now(),\n+                   \n+                ];\n+               \n+            }\n+            $mysession_id = session()->get(\"id_user\");\n+            $mytransaction = Transaction::insert( [\n+                'id_user'                    => $mysession_id,\n+                'total_price'                => $hasil,\n+                'total_qty'                  => $jumlahitems,\n+                'updated_at'                 => now(),\n+                'created_at'                 => now(),\n+                'transaction_status'         => 1,\n+            ]);\n+            foreach($data_detail as $key => $item){\n+                $data_detail[$key]['id_transaction'] = 5;\n+            }\n+            TransactionHistory::insert($data_detail);\n+        }\n+     \n+   \n+        return response()->json(['status_login' => $status_login]);\n+       \n+    }\n+    public function listcart(){\n+        \n+    }\n+    /**\n+     * Show the form for creating a new resource.\n+     *\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function create()\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Store a newly created resource in storage.\n+     *\n+     * @param  \\Illuminate\\Http\\Request  $request\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function store(Request $request)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Display the specified resource.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function show($id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Show the form for editing the specified resource.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function edit($id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Update the specified resource in storage.\n+     *\n+     * @param  \\Illuminate\\Http\\Request  $request\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function update(Request $request, $id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Remove the specified resource from storage.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function destroy($id)\n+    {\n+        //\n+    }\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1719244563985,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -126,9 +126,9 @@\n                    \n                 ];\n                \n             }\n-            $mysession_id = session()->get(\"id_user\");\n+            $mysession_id = Session::get(\"id_user\");\n             $mytransaction = Transaction::insert( [\n                 'id_user'                    => $mysession_id,\n                 'total_price'                => $hasil,\n                 'total_qty'                  => $jumlahitems,\n@@ -213,222 +213,5 @@\n     public function destroy($id)\n     {\n         //\n     }\n-}\n-<?php\n-\n-namespace App\\Http\\Controllers;\n-\n-use Illuminate\\Http\\Request;\n-use Session;\n-use App\\Models\\Product;\n-use App\\Models\\Transaction;\n-use App\\Models\\TransactionHistory;\n-use App\\Models\\ProductVariant;\n-\n-class CartController extends Controller\n-{\n-    /**\n-     * Display a listing of the resource.\n-     *\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function index()\n-    {\n-        date_default_timezone_set('Asia/Jakarta');\n-        $mycart_list = [];\n-        $mycart = [];\n-        $hasil = 0;\n-        $jumlahitems = 0;\n-        if(Session::get('product')){\n-            $mycarts = Session::get('product');\n-            foreach($mycarts as $i => $mycart){\n-                    $list_myitem = explode(\"_\",$mycarts[$i]);\n-                    $id_item = $list_myitem[0];\n-                    $qty_item = $list_myitem[1];\n-                    $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n-                    $name_produk = $search_produk[0]['names'];\n-                    $description_produk = $search_produk[0]['descriptions'];\n-                    $prices_produk = $search_produk[0]['prices'];\n-                    $discount_produk = $search_produk[0]['discounts'];\n-                    $images_produk = $search_produk[0]['images'];\n-                    $mycart_list[] = [\n-                        \"index\"=>$i,\n-                        \"category\"=>\"p\",\n-                        \"name\" =>$name_produk,\n-                        \"description\" => $description_produk,\n-                        \"variant\" => \"-\",\n-                        \"price\" => $prices_produk,\n-                        \"discount\" => $discount_produk,\n-                        \"image\" => $images_produk,\n-                        \"qty\" => $qty_item\n-                    ];\n-                    $jumlahitems += $qty_item;\n-                    $hasil += $qty_item * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-            }\n-        }\n-        $mycart_variants = [];\n-        if(Session::get('variantproduct')){\n-            $mycart_variants = Session::get('variantproduct');\n-            foreach($mycart_variants as $i => $mycart_variant){\n-                $list_myitem = explode(\"_\",$mycart_variants[$i]);\n-                $id_item = $list_myitem[0];\n-                $qty_items = $list_myitem[1];\n-                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n-                $name_produk = $search_produk[0]['nama_product'];\n-                $name_variant = $search_produk[0]['nama_variant'];\n-                $prices_produk = $search_produk[0]['harga_variant'];\n-                $description_produk = $search_produk[0]['description_product'];\n-                $discount_produk = $search_produk[0]['discount_variant'];\n-                $images_produk = $search_produk[0]['images_product'];\n-                $mycart_list[] = [\n-                    \"index\"=>$i,\n-                    \"category\"=>\"v\",\n-                    \"name\" =>$name_produk,\n-                    \"description\" => $description_produk,\n-                    \"variant\" => $name_variant,\n-                    \"price\" => $prices_produk,\n-                    \"discount\" => $discount_produk,\n-                    \"image\" => $images_produk,\n-                    \"qty\" => $qty_items\n-                ];\n-                $jumlahitems += $qty_items;\n-                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-            }\n-        }\n-        // $mycart_list = json_encode($mycart_list);\n-        \n-        return view(\"cart\",compact(\"mycart_list\",\"hasil\", \"jumlahitems\"));\n-    }\n-    public function deletecart(Request $request){\n-  \n-        $category_delete = $request->category_id;\n-        $index_delete = $request->index_id;\n-\n-        if($category_delete == \"p\"){\n-            $products[] =  Session::get('product');\n-            unset($products[$index_delete]);\n-            session()->put('product', $products);\n-        }\n-        else{\n-            // Second argument is a default value\n-            $variant_products[] =  Session::get('variantproduct');\n-            unset($variant_products[$index_delete]);\n-            session()->put('variantproduct', $variant_products);\n-        }  \n-        return response()->json(['status_delete' => \"ok\"]);\n-     \n-    }\n-    public function checkout(){\n-        \n-        $status_login = \"belum\";\n-        if(!empty(Session::has('user'))){\n-            $status_login = \"login\";\n-            $hasil = 0;\n-            $jumlahitems = 0;\n-            \n-            $mycarts = Session::get('product');\n-            foreach($mycarts as $i => $mycart){\n-                $list_myitem = explode(\"_\",$mycarts[$i]);\n-                $id_item = $list_myitem[0];\n-                $qty_items = $list_myitem[1];\n-                $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n-                $prices_produk = $search_produk[0]['prices'];\n-                $discount_produk = $search_produk[0]['discounts'];\n-                $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-                $jumlahitems += $qty_items;\n-                $data_detail[] = [\n-                    'id_transaction'=>'1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now(),\n-                   \n-                ];\n-               \n-            }\n-            $mysession_id = Session::get(\"id_user\");\n-            $mytransaction = Transaction::insert( [\n-                'id_user'                    => $id_user,\n-                'total_price'                => $hasil,\n-                'total_qty'                  => $jumlahitems,\n-                'updated_at'                 => now(),\n-                'created_at'                 => now(),\n-                'transaction_status'         => 1,\n-            ]);\n-            foreach($data_detail as $key => $item){\n-                $data_detail[$key]['id_transaction'] = 5;\n-            }\n-            TransactionHistory::insert($data_detail);\n-        }\n-     \n-   \n-        return response()->json(['status_login' => $status_login]);\n-       \n-    }\n-    public function listcart(){\n-        \n-    }\n-    /**\n-     * Show the form for creating a new resource.\n-     *\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function create()\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Store a newly created resource in storage.\n-     *\n-     * @param  \\Illuminate\\Http\\Request  $request\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function store(Request $request)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Display the specified resource.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function show($id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Show the form for editing the specified resource.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function edit($id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Update the specified resource in storage.\n-     *\n-     * @param  \\Illuminate\\Http\\Request  $request\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function update(Request $request, $id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Remove the specified resource from storage.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function destroy($id)\n-    {\n-        //\n-    }\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1719244665767,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,217 @@\n+<?php\n+\n+namespace App\\Http\\Controllers;\n+\n+use Illuminate\\Http\\Request;\n+use Session;\n+use App\\Models\\Product;\n+use App\\Models\\Transaction;\n+use App\\Models\\TransactionHistory;\n+use App\\Models\\ProductVariant;\n+\n+class CartController extends Controller\n+{\n+    /**\n+     * Display a listing of the resource.\n+     *\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function index()\n+    {\n+        date_default_timezone_set('Asia/Jakarta');\n+        $mycart_list = [];\n+        $mycart = [];\n+        $hasil = 0;\n+        $jumlahitems = 0;\n+        if(Session::get('product')){\n+            $mycarts = Session::get('product');\n+            foreach($mycarts as $i => $mycart){\n+                    $list_myitem = explode(\"_\",$mycarts[$i]);\n+                    $id_item = $list_myitem[0];\n+                    $qty_item = $list_myitem[1];\n+                    $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n+                    $name_produk = $search_produk[0]['names'];\n+                    $description_produk = $search_produk[0]['descriptions'];\n+                    $prices_produk = $search_produk[0]['prices'];\n+                    $discount_produk = $search_produk[0]['discounts'];\n+                    $images_produk = $search_produk[0]['images'];\n+                    $mycart_list[] = [\n+                        \"index\"=>$i,\n+                        \"category\"=>\"p\",\n+                        \"name\" =>$name_produk,\n+                        \"description\" => $description_produk,\n+                        \"variant\" => \"-\",\n+                        \"price\" => $prices_produk,\n+                        \"discount\" => $discount_produk,\n+                        \"image\" => $images_produk,\n+                        \"qty\" => $qty_item\n+                    ];\n+                    $jumlahitems += $qty_item;\n+                    $hasil += $qty_item * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+            }\n+        }\n+        $mycart_variants = [];\n+        if(Session::get('variantproduct')){\n+            $mycart_variants = Session::get('variantproduct');\n+            foreach($mycart_variants as $i => $mycart_variant){\n+                $list_myitem = explode(\"_\",$mycart_variants[$i]);\n+                $id_item = $list_myitem[0];\n+                $qty_items = $list_myitem[1];\n+                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n+                $name_produk = $search_produk[0]['nama_product'];\n+                $name_variant = $search_produk[0]['nama_variant'];\n+                $prices_produk = $search_produk[0]['harga_variant'];\n+                $description_produk = $search_produk[0]['description_product'];\n+                $discount_produk = $search_produk[0]['discount_variant'];\n+                $images_produk = $search_produk[0]['images_product'];\n+                $mycart_list[] = [\n+                    \"index\"=>$i,\n+                    \"category\"=>\"v\",\n+                    \"name\" =>$name_produk,\n+                    \"description\" => $description_produk,\n+                    \"variant\" => $name_variant,\n+                    \"price\" => $prices_produk,\n+                    \"discount\" => $discount_produk,\n+                    \"image\" => $images_produk,\n+                    \"qty\" => $qty_items\n+                ];\n+                $jumlahitems += $qty_items;\n+                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+            }\n+        }\n+        // $mycart_list = json_encode($mycart_list);\n+        \n+        return view(\"cart\",compact(\"mycart_list\",\"hasil\", \"jumlahitems\"));\n+    }\n+    public function deletecart(Request $request){\n+  \n+        $category_delete = $request->category_id;\n+        $index_delete = $request->index_id;\n+\n+        if($category_delete == \"p\"){\n+            $products[] =  Session::get('product');\n+            unset($products[$index_delete]);\n+            session()->put('product', $products);\n+        }\n+        else{\n+            // Second argument is a default value\n+            $variant_products[] =  Session::get('variantproduct');\n+            unset($variant_products[$index_delete]);\n+            session()->put('variantproduct', $variant_products);\n+        }  \n+        return response()->json(['status_delete' => \"ok\"]);\n+     \n+    }\n+    public function checkout(){\n+        \n+        $status_login = \"belum\";\n+        if(!empty(Session::has('user'))){\n+            $status_login = \"login\";\n+            $hasil = 0;\n+            $jumlahitems = 0;\n+            \n+            $mycarts = Session::get('product');\n+            foreach($mycarts as $i => $mycart){\n+                $list_myitem = explode(\"_\",$mycarts[$i]);\n+                $id_item = $list_myitem[0];\n+                $qty_items = $list_myitem[1];\n+                $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n+                $prices_produk = $search_produk[0]['prices'];\n+                $discount_produk = $search_produk[0]['discounts'];\n+                $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+                $jumlahitems += $qty_items;\n+                $data_detail[] = [\n+                    'id_transaction'=>'1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now(),\n+                   \n+                ];\n+               \n+            }\n+            $mysession_id = Session::get(\"id_user\");\n+            $mytransaction = Transaction::insert( [\n+                'id_user'                    => $mysession_id,\n+                'total_price'                => $hasil,\n+                'total_qty'                  => $jumlahitems,\n+                'updated_at'                 => now(),\n+                'created_at'                 => now(),\n+                'transaction_status'         => 1,\n+            ]);\n+            foreach($data_detail as $key => $item){\n+                $data_detail[$key]['id_transaction'] = 5;\n+            }\n+            TransactionHistory::insert($data_detail);\n+        }\n+     \n+   \n+        return response()->json(['status_login' => $status_login]);\n+       \n+    }\n+    public function listcart(){\n+        \n+    }\n+    /**\n+     * Show the form for creating a new resource.\n+     *\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function create()\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Store a newly created resource in storage.\n+     *\n+     * @param  \\Illuminate\\Http\\Request  $request\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function store(Request $request)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Display the specified resource.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function show($id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Show the form for editing the specified resource.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function edit($id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Update the specified resource in storage.\n+     *\n+     * @param  \\Illuminate\\Http\\Request  $request\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function update(Request $request, $id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Remove the specified resource from storage.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function destroy($id)\n+    {\n+        //\n+    }\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1719244765835,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,9 +17,9 @@\n      * @return \\Illuminate\\Http\\Response\n      */\n     public function index()\n     {\n-        date_default_timezone_set('Asia/Jakarta');\n+    \n         $mycart_list = [];\n         $mycart = [];\n         $hasil = 0;\n         $jumlahitems = 0;\n@@ -102,226 +102,9 @@\n         return response()->json(['status_delete' => \"ok\"]);\n      \n     }\n     public function checkout(){\n-        \n-        $status_login = \"belum\";\n-        if(!empty(Session::has('user'))){\n-            $status_login = \"login\";\n-            $hasil = 0;\n-            $jumlahitems = 0;\n-            \n-            $mycarts = Session::get('product');\n-            foreach($mycarts as $i => $mycart){\n-                $list_myitem = explode(\"_\",$mycarts[$i]);\n-                $id_item = $list_myitem[0];\n-                $qty_items = $list_myitem[1];\n-                $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n-                $prices_produk = $search_produk[0]['prices'];\n-                $discount_produk = $search_produk[0]['discounts'];\n-                $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-                $jumlahitems += $qty_items;\n-                $data_detail[] = [\n-                    'id_transaction'=>'1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now(),\n-                   \n-                ];\n-               \n-            }\n-            $mysession_id = Session::get(\"id_user\");\n-            $mytransaction = Transaction::insert( [\n-                'id_user'                    => $mysession_id,\n-                'total_price'                => $hasil,\n-                'total_qty'                  => $jumlahitems,\n-                'updated_at'                 => now(),\n-                'created_at'                 => now(),\n-                'transaction_status'         => 1,\n-            ]);\n-            foreach($data_detail as $key => $item){\n-                $data_detail[$key]['id_transaction'] = 5;\n-            }\n-            TransactionHistory::insert($data_detail);\n-        }\n-     \n-   \n-        return response()->json(['status_login' => $status_login]);\n-       \n-    }\n-    public function listcart(){\n-        \n-    }\n-    /**\n-     * Show the form for creating a new resource.\n-     *\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function create()\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Store a newly created resource in storage.\n-     *\n-     * @param  \\Illuminate\\Http\\Request  $request\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function store(Request $request)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Display the specified resource.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function show($id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Show the form for editing the specified resource.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function edit($id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Update the specified resource in storage.\n-     *\n-     * @param  \\Illuminate\\Http\\Request  $request\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function update(Request $request, $id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Remove the specified resource from storage.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function destroy($id)\n-    {\n-        //\n-    }\n-}\n-<?php\n-\n-namespace App\\Http\\Controllers;\n-\n-use Illuminate\\Http\\Request;\n-use Session;\n-use App\\Models\\Product;\n-use App\\Models\\Transaction;\n-use App\\Models\\TransactionHistory;\n-use App\\Models\\ProductVariant;\n-\n-class CartController extends Controller\n-{\n-    /**\n-     * Display a listing of the resource.\n-     *\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function index()\n-    {\n         date_default_timezone_set('Asia/Jakarta');\n-        $mycart_list = [];\n-        $mycart = [];\n-        $hasil = 0;\n-        $jumlahitems = 0;\n-        if(Session::get('product')){\n-            $mycarts = Session::get('product');\n-            foreach($mycarts as $i => $mycart){\n-                    $list_myitem = explode(\"_\",$mycarts[$i]);\n-                    $id_item = $list_myitem[0];\n-                    $qty_item = $list_myitem[1];\n-                    $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n-                    $name_produk = $search_produk[0]['names'];\n-                    $description_produk = $search_produk[0]['descriptions'];\n-                    $prices_produk = $search_produk[0]['prices'];\n-                    $discount_produk = $search_produk[0]['discounts'];\n-                    $images_produk = $search_produk[0]['images'];\n-                    $mycart_list[] = [\n-                        \"index\"=>$i,\n-                        \"category\"=>\"p\",\n-                        \"name\" =>$name_produk,\n-                        \"description\" => $description_produk,\n-                        \"variant\" => \"-\",\n-                        \"price\" => $prices_produk,\n-                        \"discount\" => $discount_produk,\n-                        \"image\" => $images_produk,\n-                        \"qty\" => $qty_item\n-                    ];\n-                    $jumlahitems += $qty_item;\n-                    $hasil += $qty_item * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-            }\n-        }\n-        $mycart_variants = [];\n-        if(Session::get('variantproduct')){\n-            $mycart_variants = Session::get('variantproduct');\n-            foreach($mycart_variants as $i => $mycart_variant){\n-                $list_myitem = explode(\"_\",$mycart_variants[$i]);\n-                $id_item = $list_myitem[0];\n-                $qty_items = $list_myitem[1];\n-                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n-                $name_produk = $search_produk[0]['nama_product'];\n-                $name_variant = $search_produk[0]['nama_variant'];\n-                $prices_produk = $search_produk[0]['harga_variant'];\n-                $description_produk = $search_produk[0]['description_product'];\n-                $discount_produk = $search_produk[0]['discount_variant'];\n-                $images_produk = $search_produk[0]['images_product'];\n-                $mycart_list[] = [\n-                    \"index\"=>$i,\n-                    \"category\"=>\"v\",\n-                    \"name\" =>$name_produk,\n-                    \"description\" => $description_produk,\n-                    \"variant\" => $name_variant,\n-                    \"price\" => $prices_produk,\n-                    \"discount\" => $discount_produk,\n-                    \"image\" => $images_produk,\n-                    \"qty\" => $qty_items\n-                ];\n-                $jumlahitems += $qty_items;\n-                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-            }\n-        }\n-        // $mycart_list = json_encode($mycart_list);\n-        \n-        return view(\"cart\",compact(\"mycart_list\",\"hasil\", \"jumlahitems\"));\n-    }\n-    public function deletecart(Request $request){\n-  \n-        $category_delete = $request->category_id;\n-        $index_delete = $request->index_id;\n-\n-        if($category_delete == \"p\"){\n-            $products[] =  Session::get('product');\n-            unset($products[$index_delete]);\n-            session()->put('product', $products);\n-        }\n-        else{\n-            // Second argument is a default value\n-            $variant_products[] =  Session::get('variantproduct');\n-            unset($variant_products[$index_delete]);\n-            session()->put('variantproduct', $variant_products);\n-        }  \n-        return response()->json(['status_delete' => \"ok\"]);\n-     \n-    }\n-    public function checkout(){\n-        \n         $status_login = \"belum\";\n         if(!empty(Session::has('user'))){\n             $status_login = \"login\";\n             $hasil = 0;\n"
                },
                {
                    "date": 1719244783902,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -136,9 +136,9 @@\n                 'created_at'                 => now(),\n                 'transaction_status'         => 1,\n             ]);\n             foreach($data_detail as $key => $item){\n-                $data_detail[$key]['id_transaction'] = 5;\n+                $data_detail[$key]['id_transaction'] = $mytransaction->id;\n             }\n             TransactionHistory::insert($data_detail);\n         }\n      \n"
                },
                {
                    "date": 1719244816014,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -127,9 +127,9 @@\n                 ];\n                \n             }\n             $mysession_id = Session::get(\"id_user\");\n-            $mytransaction = Transaction::insert( [\n+            $mytransaction = Transaction::create( [\n                 'id_user'                    => $mysession_id,\n                 'total_price'                => $hasil,\n                 'total_qty'                  => $jumlahitems,\n                 'updated_at'                 => now(),\n"
                },
                {
                    "date": 1719247360524,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,223 @@\n+<?php\n+\n+namespace App\\Http\\Controllers;\n+\n+use Illuminate\\Http\\Request;\n+use Session;\n+use App\\Models\\Product;\n+use App\\Models\\Transaction;\n+use App\\Models\\TransactionHistory;\n+use App\\Models\\ProductVariant;\n+\n+class CartController extends Controller\n+{\n+    /**\n+     * Display a listing of the resource.\n+     *\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function index()\n+    {\n+    \n+        $mycart_list = [];\n+        $mycart = [];\n+        $hasil = 0;\n+        $jumlahitems = 0;\n+        if(Session::get('product')){\n+            $mycarts = Session::get('product');\n+            foreach($mycarts as $i => $mycart){\n+                    $list_myitem = explode(\"_\",$mycarts[$i]);\n+                    $id_item = $list_myitem[0];\n+                    $qty_item = $list_myitem[1];\n+                    $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n+                    $name_produk = $search_produk[0]['names'];\n+                    $description_produk = $search_produk[0]['descriptions'];\n+                    $prices_produk = $search_produk[0]['prices'];\n+                    $discount_produk = $search_produk[0]['discounts'];\n+                    $images_produk = $search_produk[0]['images'];\n+                    $mycart_list[] = [\n+                        \"index\"=>$i,\n+                        \"category\"=>\"p\",\n+                        \"name\" =>$name_produk,\n+                        \"description\" => $description_produk,\n+                        \"variant\" => \"-\",\n+                        \"price\" => $prices_produk,\n+                        \"discount\" => $discount_produk,\n+                        \"image\" => $images_produk,\n+                        \"qty\" => $qty_item\n+                    ];\n+                    $jumlahitems += $qty_item;\n+                    $hasil += $qty_item * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+            }\n+        }\n+        $mycart_variants = [];\n+        if(Session::get('variantproduct')){\n+            $mycart_variants = Session::get('variantproduct');\n+            foreach($mycart_variants as $i => $mycart_variant){\n+                $list_myitem = explode(\"_\",$mycart_variants[$i]);\n+                $id_item = $list_myitem[0];\n+                $qty_items = $list_myitem[1];\n+                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n+                $name_produk = $search_produk[0]['nama_product'];\n+                $name_variant = $search_produk[0]['nama_variant'];\n+                $prices_produk = $search_produk[0]['harga_variant'];\n+                $description_produk = $search_produk[0]['description_product'];\n+                $discount_produk = $search_produk[0]['discount_variant'];\n+                $images_produk = $search_produk[0]['images_product'];\n+                $mycart_list[] = [\n+                    \"index\"=>$i,\n+                    \"category\"=>\"v\",\n+                    \"name\" =>$name_produk,\n+                    \"description\" => $description_produk,\n+                    \"variant\" => $name_variant,\n+                    \"price\" => $prices_produk,\n+                    \"discount\" => $discount_produk,\n+                    \"image\" => $images_produk,\n+                    \"qty\" => $qty_items\n+                ];\n+                $jumlahitems += $qty_items;\n+                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+            }\n+        }\n+        // $mycart_list = json_encode($mycart_list);\n+        \n+        return view(\"cart\",compact(\"mycart_list\",\"hasil\", \"jumlahitems\"));\n+    }\n+    public function deletecart(Request $request){\n+  \n+        $category_delete = $request->category_id;\n+        $index_delete = $request->index_id;\n+\n+        if($category_delete == \"p\"){\n+            $products[] =  Session::get('product');\n+            unset($products[$index_delete]);\n+            session()->put('product', $products);\n+        }\n+        else{\n+            // Second argument is a default value\n+            $variant_products[] =  Session::get('variantproduct');\n+            unset($variant_products[$index_delete]);\n+            session()->put('variantproduct', $variant_products);\n+        }  \n+        return response()->json(['status_delete' => \"ok\"]);\n+     \n+    }\n+    public function checkout(){\n+        date_default_timezone_set('Asia/Jakarta');\n+        $status_login = \"belum\";\n+        if(!empty(Session::has('user'))){\n+            $status_login = \"login\";\n+            $hasil = 0;\n+            $jumlahitems = 0;\n+            \n+            $mycarts = Session::get('product');\n+            foreach($mycarts as $i => $mycart){\n+                $list_myitem = explode(\"_\",$mycarts[$i]);\n+                $id_item = $list_myitem[0];\n+                $qty_items = $list_myitem[1];\n+                $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n+                $prices_produk = $search_produk[0]['prices'];\n+                $discount_produk = $search_produk[0]['discounts'];\n+                $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+                $jumlahitems += $qty_items;\n+                $data_detail[] = [\n+                    'id_transaction'=>'1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now(),\n+                   \n+                ];\n+               \n+            }\n+            foreach($mycart_variants as $i => $mycart_variant){\n+                $list_myitem = explode(\"_\",$mycart_variants[$i]);\n+                $id_item = $list_myitem[0];\n+                $qty_items = $list_myitem[1];\n+                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n+            }\n+            $mysession_id = Session::get(\"id_user\");\n+            $mytransaction = Transaction::create( [\n+                'id_user'                    => $mysession_id,\n+                'total_price'                => $hasil,\n+                'total_qty'                  => $jumlahitems,\n+                'updated_at'                 => now(),\n+                'created_at'                 => now(),\n+                'transaction_status'         => 1,\n+            ]);\n+            foreach($data_detail as $key => $item){\n+                $data_detail[$key]['id_transaction'] = $mytransaction->id;\n+            }\n+            TransactionHistory::insert($data_detail);\n+        }\n+     \n+   \n+        return response()->json(['status_login' => $status_login]);\n+       \n+    }\n+    public function listcart(){\n+        \n+    }\n+    /**\n+     * Show the form for creating a new resource.\n+     *\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function create()\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Store a newly created resource in storage.\n+     *\n+     * @param  \\Illuminate\\Http\\Request  $request\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function store(Request $request)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Display the specified resource.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function show($id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Show the form for editing the specified resource.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function edit($id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Update the specified resource in storage.\n+     *\n+     * @param  \\Illuminate\\Http\\Request  $request\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function update(Request $request, $id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Remove the specified resource from storage.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function destroy($id)\n+    {\n+        //\n+    }\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1719247421917,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -131,157 +131,8 @@\n                 $list_myitem = explode(\"_\",$mycart_variants[$i]);\n                 $id_item = $list_myitem[0];\n                 $qty_items = $list_myitem[1];\n                 $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n-            }\n-            $mysession_id = Session::get(\"id_user\");\n-            $mytransaction = Transaction::create( [\n-                'id_user'                    => $mysession_id,\n-                'total_price'                => $hasil,\n-                'total_qty'                  => $jumlahitems,\n-                'updated_at'                 => now(),\n-                'created_at'                 => now(),\n-                'transaction_status'         => 1,\n-            ]);\n-            foreach($data_detail as $key => $item){\n-                $data_detail[$key]['id_transaction'] = $mytransaction->id;\n-            }\n-            TransactionHistory::insert($data_detail);\n-        }\n-     \n-   \n-        return response()->json(['status_login' => $status_login]);\n-       \n-    }\n-    public function listcart(){\n-        \n-    }\n-    /**\n-     * Show the form for creating a new resource.\n-     *\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function create()\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Store a newly created resource in storage.\n-     *\n-     * @param  \\Illuminate\\Http\\Request  $request\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function store(Request $request)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Display the specified resource.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function show($id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Show the form for editing the specified resource.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function edit($id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Update the specified resource in storage.\n-     *\n-     * @param  \\Illuminate\\Http\\Request  $request\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function update(Request $request, $id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Remove the specified resource from storage.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function destroy($id)\n-    {\n-        //\n-    }\n-}\n-<?php\n-\n-namespace App\\Http\\Controllers;\n-\n-use Illuminate\\Http\\Request;\n-use Session;\n-use App\\Models\\Product;\n-use App\\Models\\Transaction;\n-use App\\Models\\TransactionHistory;\n-use App\\Models\\ProductVariant;\n-\n-class CartController extends Controller\n-{\n-    /**\n-     * Display a listing of the resource.\n-     *\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function index()\n-    {\n-    \n-        $mycart_list = [];\n-        $mycart = [];\n-        $hasil = 0;\n-        $jumlahitems = 0;\n-        if(Session::get('product')){\n-            $mycarts = Session::get('product');\n-            foreach($mycarts as $i => $mycart){\n-                    $list_myitem = explode(\"_\",$mycarts[$i]);\n-                    $id_item = $list_myitem[0];\n-                    $qty_item = $list_myitem[1];\n-                    $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n-                    $name_produk = $search_produk[0]['names'];\n-                    $description_produk = $search_produk[0]['descriptions'];\n-                    $prices_produk = $search_produk[0]['prices'];\n-                    $discount_produk = $search_produk[0]['discounts'];\n-                    $images_produk = $search_produk[0]['images'];\n-                    $mycart_list[] = [\n-                        \"index\"=>$i,\n-                        \"category\"=>\"p\",\n-                        \"name\" =>$name_produk,\n-                        \"description\" => $description_produk,\n-                        \"variant\" => \"-\",\n-                        \"price\" => $prices_produk,\n-                        \"discount\" => $discount_produk,\n-                        \"image\" => $images_produk,\n-                        \"qty\" => $qty_item\n-                    ];\n-                    $jumlahitems += $qty_item;\n-                    $hasil += $qty_item * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-            }\n-        }\n-        $mycart_variants = [];\n-        if(Session::get('variantproduct')){\n-            $mycart_variants = Session::get('variantproduct');\n-            foreach($mycart_variants as $i => $mycart_variant){\n-                $list_myitem = explode(\"_\",$mycart_variants[$i]);\n-                $id_item = $list_myitem[0];\n-                $qty_items = $list_myitem[1];\n-                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n                 $name_produk = $search_produk[0]['nama_product'];\n                 $name_variant = $search_produk[0]['nama_variant'];\n                 $prices_produk = $search_produk[0]['harga_variant'];\n                 $description_produk = $search_produk[0]['description_product'];\n@@ -299,57 +150,13 @@\n                     \"qty\" => $qty_items\n                 ];\n                 $jumlahitems += $qty_items;\n                 $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-            }\n-        }\n-        // $mycart_list = json_encode($mycart_list);\n-        \n-        return view(\"cart\",compact(\"mycart_list\",\"hasil\", \"jumlahitems\"));\n-    }\n-    public function deletecart(Request $request){\n-  \n-        $category_delete = $request->category_id;\n-        $index_delete = $request->index_id;\n \n-        if($category_delete == \"p\"){\n-            $products[] =  Session::get('product');\n-            unset($products[$index_delete]);\n-            session()->put('product', $products);\n-        }\n-        else{\n-            // Second argument is a default value\n-            $variant_products[] =  Session::get('variantproduct');\n-            unset($variant_products[$index_delete]);\n-            session()->put('variantproduct', $variant_products);\n-        }  \n-        return response()->json(['status_delete' => \"ok\"]);\n-     \n-    }\n-    public function checkout(){\n-        date_default_timezone_set('Asia/Jakarta');\n-        $status_login = \"belum\";\n-        if(!empty(Session::has('user'))){\n-            $status_login = \"login\";\n-            $hasil = 0;\n-            $jumlahitems = 0;\n-            \n-            $mycarts = Session::get('product');\n-            foreach($mycarts as $i => $mycart){\n-                $list_myitem = explode(\"_\",$mycarts[$i]);\n-                $id_item = $list_myitem[0];\n-                $qty_items = $list_myitem[1];\n-                $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n-                $prices_produk = $search_produk[0]['prices'];\n-                $discount_produk = $search_produk[0]['discounts'];\n-                $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-                $jumlahitems += $qty_items;\n                 $data_detail[] = [\n                     'id_transaction'=>'1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now(),\n                    \n                 ];\n-               \n             }\n             $mysession_id = Session::get(\"id_user\");\n             $mytransaction = Transaction::create( [\n                 'id_user'                    => $mysession_id,\n"
                },
                {
                    "date": 1719247544513,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -121,18 +121,18 @@\n                 $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                 $jumlahitems += $qty_items;\n                 $data_detail[] = [\n-                    'id_transaction'=>'1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now(),\n+                    'id_transaction'=>'1', 'id_product'=> $id_item, 'id_product_variant'=>0, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now(),\n                    \n                 ];\n                \n             }\n             foreach($mycart_variants as $i => $mycart_variant){\n                 $list_myitem = explode(\"_\",$mycart_variants[$i]);\n                 $id_item = $list_myitem[0];\n                 $qty_items = $list_myitem[1];\n-                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n+                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.id as id_product\",\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n                 $name_produk = $search_produk[0]['nama_product'];\n                 $name_variant = $search_produk[0]['nama_variant'];\n                 $prices_produk = $search_produk[0]['harga_variant'];\n                 $description_produk = $search_produk[0]['description_product'];\n@@ -150,11 +150,12 @@\n                     \"qty\" => $qty_items\n                 ];\n                 $jumlahitems += $qty_items;\n                 $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-\n+                \n+                \n                 $data_detail[] = [\n-                    'id_transaction'=>'1', 'id_product'=> 1, 'id_product_variant'=>2, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now(),\n+                    'id_transaction'=>'1', 'id_product'=> $id_product, 'id_product_variant'=>$id_item, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now(),\n                    \n                 ];\n             }\n             $mysession_id = Session::get(\"id_user\");\n"
                },
                {
                    "date": 1719247570603,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -171,9 +171,9 @@\n                 $data_detail[$key]['id_transaction'] = $mytransaction->id;\n             }\n             TransactionHistory::insert($data_detail);\n         }\n-     \n+        Session::flush();\n    \n         return response()->json(['status_login' => $status_login]);\n        \n     }\n"
                },
                {
                    "date": 1719247584691,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -171,9 +171,9 @@\n                 $data_detail[$key]['id_transaction'] = $mytransaction->id;\n             }\n             TransactionHistory::insert($data_detail);\n         }\n-        Session::flush();\n+        Session::forget(\"user\");\n    \n         return response()->json(['status_login' => $status_login]);\n        \n     }\n"
                },
                {
                    "date": 1719247603365,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,250 @@\n+<?php\n+\n+namespace App\\Http\\Controllers;\n+\n+use Illuminate\\Http\\Request;\n+use Session;\n+use App\\Models\\Product;\n+use App\\Models\\Transaction;\n+use App\\Models\\TransactionHistory;\n+use App\\Models\\ProductVariant;\n+\n+class CartController extends Controller\n+{\n+    /**\n+     * Display a listing of the resource.\n+     *\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function index()\n+    {\n+    \n+        $mycart_list = [];\n+        $mycart = [];\n+        $hasil = 0;\n+        $jumlahitems = 0;\n+        if(Session::get('product')){\n+            $mycarts = Session::get('product');\n+            foreach($mycarts as $i => $mycart){\n+                    $list_myitem = explode(\"_\",$mycarts[$i]);\n+                    $id_item = $list_myitem[0];\n+                    $qty_item = $list_myitem[1];\n+                    $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n+                    $name_produk = $search_produk[0]['names'];\n+                    $description_produk = $search_produk[0]['descriptions'];\n+                    $prices_produk = $search_produk[0]['prices'];\n+                    $discount_produk = $search_produk[0]['discounts'];\n+                    $images_produk = $search_produk[0]['images'];\n+                    $mycart_list[] = [\n+                        \"index\"=>$i,\n+                        \"category\"=>\"p\",\n+                        \"name\" =>$name_produk,\n+                        \"description\" => $description_produk,\n+                        \"variant\" => \"-\",\n+                        \"price\" => $prices_produk,\n+                        \"discount\" => $discount_produk,\n+                        \"image\" => $images_produk,\n+                        \"qty\" => $qty_item\n+                    ];\n+                    $jumlahitems += $qty_item;\n+                    $hasil += $qty_item * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+            }\n+        }\n+        $mycart_variants = [];\n+        if(Session::get('variantproduct')){\n+            $mycart_variants = Session::get('variantproduct');\n+            foreach($mycart_variants as $i => $mycart_variant){\n+                $list_myitem = explode(\"_\",$mycart_variants[$i]);\n+                $id_item = $list_myitem[0];\n+                $qty_items = $list_myitem[1];\n+                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n+                $name_produk = $search_produk[0]['nama_product'];\n+                $name_variant = $search_produk[0]['nama_variant'];\n+                $prices_produk = $search_produk[0]['harga_variant'];\n+                $description_produk = $search_produk[0]['description_product'];\n+                $discount_produk = $search_produk[0]['discount_variant'];\n+                $images_produk = $search_produk[0]['images_product'];\n+                $mycart_list[] = [\n+                    \"index\"=>$i,\n+                    \"category\"=>\"v\",\n+                    \"name\" =>$name_produk,\n+                    \"description\" => $description_produk,\n+                    \"variant\" => $name_variant,\n+                    \"price\" => $prices_produk,\n+                    \"discount\" => $discount_produk,\n+                    \"image\" => $images_produk,\n+                    \"qty\" => $qty_items\n+                ];\n+                $jumlahitems += $qty_items;\n+                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+            }\n+        }\n+        // $mycart_list = json_encode($mycart_list);\n+        \n+        return view(\"cart\",compact(\"mycart_list\",\"hasil\", \"jumlahitems\"));\n+    }\n+    public function deletecart(Request $request){\n+  \n+        $category_delete = $request->category_id;\n+        $index_delete = $request->index_id;\n+\n+        if($category_delete == \"p\"){\n+            $products[] =  Session::get('product');\n+            unset($products[$index_delete]);\n+            session()->put('product', $products);\n+        }\n+        else{\n+            // Second argument is a default value\n+            $variant_products[] =  Session::get('variantproduct');\n+            unset($variant_products[$index_delete]);\n+            session()->put('variantproduct', $variant_products);\n+        }  \n+        return response()->json(['status_delete' => \"ok\"]);\n+     \n+    }\n+    public function checkout(){\n+        date_default_timezone_set('Asia/Jakarta');\n+        $status_login = \"belum\";\n+        if(!empty(Session::has('user'))){\n+            $status_login = \"login\";\n+            $hasil = 0;\n+            $jumlahitems = 0;\n+            \n+            $mycarts = Session::get('product');\n+            foreach($mycarts as $i => $mycart){\n+                $list_myitem = explode(\"_\",$mycarts[$i]);\n+                $id_item = $list_myitem[0];\n+                $qty_items = $list_myitem[1];\n+                $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n+                $prices_produk = $search_produk[0]['prices'];\n+                $discount_produk = $search_produk[0]['discounts'];\n+                $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+                $jumlahitems += $qty_items;\n+                $data_detail[] = [\n+                    'id_transaction'=>'1', 'id_product'=> $id_item, 'id_product_variant'=>0, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now(),\n+                   \n+                ];\n+               \n+            }\n+            foreach($mycart_variants as $i => $mycart_variant){\n+                $list_myitem = explode(\"_\",$mycart_variants[$i]);\n+                $id_item = $list_myitem[0];\n+                $qty_items = $list_myitem[1];\n+                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.id as id_product\",\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n+                $name_produk = $search_produk[0]['nama_product'];\n+                $name_variant = $search_produk[0]['nama_variant'];\n+                $prices_produk = $search_produk[0]['harga_variant'];\n+                $description_produk = $search_produk[0]['description_product'];\n+                $discount_produk = $search_produk[0]['discount_variant'];\n+                $images_produk = $search_produk[0]['images_product'];\n+                $mycart_list[] = [\n+                    \"index\"=>$i,\n+                    \"category\"=>\"v\",\n+                    \"name\" =>$name_produk,\n+                    \"description\" => $description_produk,\n+                    \"variant\" => $name_variant,\n+                    \"price\" => $prices_produk,\n+                    \"discount\" => $discount_produk,\n+                    \"image\" => $images_produk,\n+                    \"qty\" => $qty_items\n+                ];\n+                $jumlahitems += $qty_items;\n+                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+                \n+                \n+                $data_detail[] = [\n+                    'id_transaction'=>'1', 'id_product'=> $id_product, 'id_product_variant'=>$id_item, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now(),\n+                   \n+                ];\n+            }\n+            $mysession_id = Session::get(\"id_user\");\n+            $mytransaction = Transaction::create( [\n+                'id_user'                    => $mysession_id,\n+                'total_price'                => $hasil,\n+                'total_qty'                  => $jumlahitems,\n+                'updated_at'                 => now(),\n+                'created_at'                 => now(),\n+                'transaction_status'         => 1,\n+            ]);\n+            foreach($data_detail as $key => $item){\n+                $data_detail[$key]['id_transaction'] = $mytransaction->id;\n+            }\n+            TransactionHistory::insert($data_detail);\n+        }\n+        Session::forget(\"product\");\n+        Session::forget(\"variantproduct\");\n+        \n+   \n+        return response()->json(['status_login' => $status_login]);\n+       \n+    }\n+    public function listcart(){\n+        \n+    }\n+    /**\n+     * Show the form for creating a new resource.\n+     *\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function create()\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Store a newly created resource in storage.\n+     *\n+     * @param  \\Illuminate\\Http\\Request  $request\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function store(Request $request)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Display the specified resource.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function show($id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Show the form for editing the specified resource.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function edit($id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Update the specified resource in storage.\n+     *\n+     * @param  \\Illuminate\\Http\\Request  $request\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function update(Request $request, $id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Remove the specified resource from storage.\n+     *\n+     * @param  int  $id\n+     * @return \\Illuminate\\Http\\Response\n+     */\n+    public function destroy($id)\n+    {\n+        //\n+    }\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1719247650188,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -175,9 +175,9 @@\n         Session::forget(\"product\");\n         Session::forget(\"variantproduct\");\n         \n    \n-        return response()->json(['status_login' => $status_login]);\n+        return response()->json(['status_login' => $status_login, \"id_transaksi\" => $$mytransaction->id]);\n        \n     }\n     public function listcart(){\n         \n@@ -246,253 +246,5 @@\n     public function destroy($id)\n     {\n         //\n     }\n-}\n-<?php\n-\n-namespace App\\Http\\Controllers;\n-\n-use Illuminate\\Http\\Request;\n-use Session;\n-use App\\Models\\Product;\n-use App\\Models\\Transaction;\n-use App\\Models\\TransactionHistory;\n-use App\\Models\\ProductVariant;\n-\n-class CartController extends Controller\n-{\n-    /**\n-     * Display a listing of the resource.\n-     *\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function index()\n-    {\n-    \n-        $mycart_list = [];\n-        $mycart = [];\n-        $hasil = 0;\n-        $jumlahitems = 0;\n-        if(Session::get('product')){\n-            $mycarts = Session::get('product');\n-            foreach($mycarts as $i => $mycart){\n-                    $list_myitem = explode(\"_\",$mycarts[$i]);\n-                    $id_item = $list_myitem[0];\n-                    $qty_item = $list_myitem[1];\n-                    $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n-                    $name_produk = $search_produk[0]['names'];\n-                    $description_produk = $search_produk[0]['descriptions'];\n-                    $prices_produk = $search_produk[0]['prices'];\n-                    $discount_produk = $search_produk[0]['discounts'];\n-                    $images_produk = $search_produk[0]['images'];\n-                    $mycart_list[] = [\n-                        \"index\"=>$i,\n-                        \"category\"=>\"p\",\n-                        \"name\" =>$name_produk,\n-                        \"description\" => $description_produk,\n-                        \"variant\" => \"-\",\n-                        \"price\" => $prices_produk,\n-                        \"discount\" => $discount_produk,\n-                        \"image\" => $images_produk,\n-                        \"qty\" => $qty_item\n-                    ];\n-                    $jumlahitems += $qty_item;\n-                    $hasil += $qty_item * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-            }\n-        }\n-        $mycart_variants = [];\n-        if(Session::get('variantproduct')){\n-            $mycart_variants = Session::get('variantproduct');\n-            foreach($mycart_variants as $i => $mycart_variant){\n-                $list_myitem = explode(\"_\",$mycart_variants[$i]);\n-                $id_item = $list_myitem[0];\n-                $qty_items = $list_myitem[1];\n-                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n-                $name_produk = $search_produk[0]['nama_product'];\n-                $name_variant = $search_produk[0]['nama_variant'];\n-                $prices_produk = $search_produk[0]['harga_variant'];\n-                $description_produk = $search_produk[0]['description_product'];\n-                $discount_produk = $search_produk[0]['discount_variant'];\n-                $images_produk = $search_produk[0]['images_product'];\n-                $mycart_list[] = [\n-                    \"index\"=>$i,\n-                    \"category\"=>\"v\",\n-                    \"name\" =>$name_produk,\n-                    \"description\" => $description_produk,\n-                    \"variant\" => $name_variant,\n-                    \"price\" => $prices_produk,\n-                    \"discount\" => $discount_produk,\n-                    \"image\" => $images_produk,\n-                    \"qty\" => $qty_items\n-                ];\n-                $jumlahitems += $qty_items;\n-                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-            }\n-        }\n-        // $mycart_list = json_encode($mycart_list);\n-        \n-        return view(\"cart\",compact(\"mycart_list\",\"hasil\", \"jumlahitems\"));\n-    }\n-    public function deletecart(Request $request){\n-  \n-        $category_delete = $request->category_id;\n-        $index_delete = $request->index_id;\n-\n-        if($category_delete == \"p\"){\n-            $products[] =  Session::get('product');\n-            unset($products[$index_delete]);\n-            session()->put('product', $products);\n-        }\n-        else{\n-            // Second argument is a default value\n-            $variant_products[] =  Session::get('variantproduct');\n-            unset($variant_products[$index_delete]);\n-            session()->put('variantproduct', $variant_products);\n-        }  \n-        return response()->json(['status_delete' => \"ok\"]);\n-     \n-    }\n-    public function checkout(){\n-        date_default_timezone_set('Asia/Jakarta');\n-        $status_login = \"belum\";\n-        if(!empty(Session::has('user'))){\n-            $status_login = \"login\";\n-            $hasil = 0;\n-            $jumlahitems = 0;\n-            \n-            $mycarts = Session::get('product');\n-            foreach($mycarts as $i => $mycart){\n-                $list_myitem = explode(\"_\",$mycarts[$i]);\n-                $id_item = $list_myitem[0];\n-                $qty_items = $list_myitem[1];\n-                $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n-                $prices_produk = $search_produk[0]['prices'];\n-                $discount_produk = $search_produk[0]['discounts'];\n-                $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-                $jumlahitems += $qty_items;\n-                $data_detail[] = [\n-                    'id_transaction'=>'1', 'id_product'=> $id_item, 'id_product_variant'=>0, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now(),\n-                   \n-                ];\n-               \n-            }\n-            foreach($mycart_variants as $i => $mycart_variant){\n-                $list_myitem = explode(\"_\",$mycart_variants[$i]);\n-                $id_item = $list_myitem[0];\n-                $qty_items = $list_myitem[1];\n-                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.id as id_product\",\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n-                $name_produk = $search_produk[0]['nama_product'];\n-                $name_variant = $search_produk[0]['nama_variant'];\n-                $prices_produk = $search_produk[0]['harga_variant'];\n-                $description_produk = $search_produk[0]['description_product'];\n-                $discount_produk = $search_produk[0]['discount_variant'];\n-                $images_produk = $search_produk[0]['images_product'];\n-                $mycart_list[] = [\n-                    \"index\"=>$i,\n-                    \"category\"=>\"v\",\n-                    \"name\" =>$name_produk,\n-                    \"description\" => $description_produk,\n-                    \"variant\" => $name_variant,\n-                    \"price\" => $prices_produk,\n-                    \"discount\" => $discount_produk,\n-                    \"image\" => $images_produk,\n-                    \"qty\" => $qty_items\n-                ];\n-                $jumlahitems += $qty_items;\n-                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-                \n-                \n-                $data_detail[] = [\n-                    'id_transaction'=>'1', 'id_product'=> $id_product, 'id_product_variant'=>$id_item, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now(),\n-                   \n-                ];\n-            }\n-            $mysession_id = Session::get(\"id_user\");\n-            $mytransaction = Transaction::create( [\n-                'id_user'                    => $mysession_id,\n-                'total_price'                => $hasil,\n-                'total_qty'                  => $jumlahitems,\n-                'updated_at'                 => now(),\n-                'created_at'                 => now(),\n-                'transaction_status'         => 1,\n-            ]);\n-            foreach($data_detail as $key => $item){\n-                $data_detail[$key]['id_transaction'] = $mytransaction->id;\n-            }\n-            TransactionHistory::insert($data_detail);\n-        }\n-        Session::forget(\"user\");\n-   \n-        return response()->json(['status_login' => $status_login]);\n-       \n-    }\n-    public function listcart(){\n-        \n-    }\n-    /**\n-     * Show the form for creating a new resource.\n-     *\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function create()\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Store a newly created resource in storage.\n-     *\n-     * @param  \\Illuminate\\Http\\Request  $request\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function store(Request $request)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Display the specified resource.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function show($id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Show the form for editing the specified resource.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function edit($id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Update the specified resource in storage.\n-     *\n-     * @param  \\Illuminate\\Http\\Request  $request\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function update(Request $request, $id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Remove the specified resource from storage.\n-     *\n-     * @param  int  $id\n-     * @return \\Illuminate\\Http\\Response\n-     */\n-    public function destroy($id)\n-    {\n-        //\n-    }\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1719247707174,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -104,8 +104,9 @@\n     }\n     public function checkout(){\n         date_default_timezone_set('Asia/Jakarta');\n         $status_login = \"belum\";\n+        $id_transaction = \"-\";\n         if(!empty(Session::has('user'))){\n             $status_login = \"login\";\n             $hasil = 0;\n             $jumlahitems = 0;\n@@ -169,15 +170,16 @@\n             ]);\n             foreach($data_detail as $key => $item){\n                 $data_detail[$key]['id_transaction'] = $mytransaction->id;\n             }\n+            $id_transaction = $mytransaction->id;;\n             TransactionHistory::insert($data_detail);\n         }\n         Session::forget(\"product\");\n         Session::forget(\"variantproduct\");\n         \n    \n-        return response()->json(['status_login' => $status_login, \"id_transaksi\" => $$mytransaction->id]);\n+        return response()->json(['status_login' => $status_login, \"id_transaksi\" => $mytransaction->id]);\n        \n     }\n     public function listcart(){\n         \n"
                },
                {
                    "date": 1719247714350,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -170,16 +170,16 @@\n             ]);\n             foreach($data_detail as $key => $item){\n                 $data_detail[$key]['id_transaction'] = $mytransaction->id;\n             }\n-            $id_transaction = $mytransaction->id;;\n+            $id_transaction = $mytransaction->id;\n             TransactionHistory::insert($data_detail);\n         }\n         Session::forget(\"product\");\n         Session::forget(\"variantproduct\");\n         \n    \n-        return response()->json(['status_login' => $status_login, \"id_transaksi\" => $mytransaction->id]);\n+        return response()->json(['status_login' => $status_login, \"id_transaksi\" => $id_transaction]);\n        \n     }\n     public function listcart(){\n         \n"
                },
                {
                    "date": 1719248046272,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -127,8 +127,9 @@\n                    \n                 ];\n                \n             }\n+            $mycart_variants = Session::get('variantproduct');\n             foreach($mycart_variants as $i => $mycart_variant){\n                 $list_myitem = explode(\"_\",$mycart_variants[$i]);\n                 $id_item = $list_myitem[0];\n                 $qty_items = $list_myitem[1];\n"
                },
                {
                    "date": 1719248091068,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -133,8 +133,9 @@\n                 $list_myitem = explode(\"_\",$mycart_variants[$i]);\n                 $id_item = $list_myitem[0];\n                 $qty_items = $list_myitem[1];\n                 $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.id as id_product\",\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n+                $id_product = $search_produk[0]['id_product'];\n                 $name_produk = $search_produk[0]['nama_product'];\n                 $name_variant = $search_produk[0]['nama_variant'];\n                 $prices_produk = $search_produk[0]['harga_variant'];\n                 $description_produk = $search_produk[0]['description_product'];\n"
                },
                {
                    "date": 1719248252463,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -110,25 +110,28 @@\n             $status_login = \"login\";\n             $hasil = 0;\n             $jumlahitems = 0;\n             \n-            $mycarts = Session::get('product');\n-            foreach($mycarts as $i => $mycart){\n-                $list_myitem = explode(\"_\",$mycarts[$i]);\n-                $id_item = $list_myitem[0];\n-                $qty_items = $list_myitem[1];\n-                $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n-                $prices_produk = $search_produk[0]['prices'];\n-                $discount_produk = $search_produk[0]['discounts'];\n-                $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-                $jumlahitems += $qty_items;\n-                $data_detail[] = [\n-                    'id_transaction'=>'1', 'id_product'=> $id_item, 'id_product_variant'=>0, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now(),\n+            if(!empty(Session::has('user'))){\n+                $mycarts = Session::get('product');\n+                foreach($mycarts as $i => $mycart){\n+                    $list_myitem = explode(\"_\",$mycarts[$i]);\n+                    $id_item = $list_myitem[0];\n+                    $qty_items = $list_myitem[1];\n+                    $search_produk = Product::where(\"id\" , \"=\", $id_item)->get();\n+                    $prices_produk = $search_produk[0]['prices'];\n+                    $discount_produk = $search_produk[0]['discounts'];\n+                    $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+                    $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+                    $jumlahitems += $qty_items;\n+                    $data_detail[] = [\n+                        'id_transaction'=>'1', 'id_product'=> $id_item, 'id_product_variant'=>0, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now(),\n+                       \n+                    ];\n                    \n-                ];\n-               \n+                }\n             }\n+           \n             $mycart_variants = Session::get('variantproduct');\n             foreach($mycart_variants as $i => $mycart_variant){\n                 $list_myitem = explode(\"_\",$mycart_variants[$i]);\n                 $id_item = $list_myitem[0];\n"
                },
                {
                    "date": 1719248258909,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -110,9 +110,9 @@\n             $status_login = \"login\";\n             $hasil = 0;\n             $jumlahitems = 0;\n             \n-            if(!empty(Session::has('user'))){\n+            if(!empty(Session::has('product'))){\n                 $mycarts = Session::get('product');\n                 foreach($mycarts as $i => $mycart){\n                     $list_myitem = explode(\"_\",$mycarts[$i]);\n                     $id_item = $list_myitem[0];\n"
                },
                {
                    "date": 1719248307422,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -129,42 +129,45 @@\n                     ];\n                    \n                 }\n             }\n+            if(!empty(Session::has('variantproduct'))){\n+                $mycart_variants = Session::get('variantproduct');\n+                foreach($mycart_variants as $i => $mycart_variant){\n+                    $list_myitem = explode(\"_\",$mycart_variants[$i]);\n+                    $id_item = $list_myitem[0];\n+                    $qty_items = $list_myitem[1];\n+                    $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.id as id_product\",\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n+                    $id_product = $search_produk[0]['id_product'];\n+                    $name_produk = $search_produk[0]['nama_product'];\n+                    $name_variant = $search_produk[0]['nama_variant'];\n+                    $prices_produk = $search_produk[0]['harga_variant'];\n+                    $description_produk = $search_produk[0]['description_product'];\n+                    $discount_produk = $search_produk[0]['discount_variant'];\n+                    $images_produk = $search_produk[0]['images_product'];\n+                    $mycart_list[] = [\n+                        \"index\"=>$i,\n+                        \"category\"=>\"v\",\n+                        \"name\" =>$name_produk,\n+                        \"description\" => $description_produk,\n+                        \"variant\" => $name_variant,\n+                        \"price\" => $prices_produk,\n+                        \"discount\" => $discount_produk,\n+                        \"image\" => $images_produk,\n+                        \"qty\" => $qty_items\n+                    ];\n+                    $jumlahitems += $qty_items;\n+                    $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n+                    \n+                    \n+                    $data_detail[] = [\n+                        'id_transaction'=>'1', 'id_product'=> $id_product, 'id_product_variant'=>$id_item, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now(),\n+                       \n+                    ];\n+                }\n+            }\n            \n-            $mycart_variants = Session::get('variantproduct');\n-            foreach($mycart_variants as $i => $mycart_variant){\n-                $list_myitem = explode(\"_\",$mycart_variants[$i]);\n-                $id_item = $list_myitem[0];\n-                $qty_items = $list_myitem[1];\n-                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.id as id_product\",\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n-                $id_product = $search_produk[0]['id_product'];\n-                $name_produk = $search_produk[0]['nama_product'];\n-                $name_variant = $search_produk[0]['nama_variant'];\n-                $prices_produk = $search_produk[0]['harga_variant'];\n-                $description_produk = $search_produk[0]['description_product'];\n-                $discount_produk = $search_produk[0]['discount_variant'];\n-                $images_produk = $search_produk[0]['images_product'];\n-                $mycart_list[] = [\n-                    \"index\"=>$i,\n-                    \"category\"=>\"v\",\n-                    \"name\" =>$name_produk,\n-                    \"description\" => $description_produk,\n-                    \"variant\" => $name_variant,\n-                    \"price\" => $prices_produk,\n-                    \"discount\" => $discount_produk,\n-                    \"image\" => $images_produk,\n-                    \"qty\" => $qty_items\n-                ];\n-                $jumlahitems += $qty_items;\n-                $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n-                \n-                \n-                $data_detail[] = [\n-                    'id_transaction'=>'1', 'id_product'=> $id_product, 'id_product_variant'=>$id_item, \"qty\" =>$qty_items, \"price\" => $prices_produk, \"subtotal\"=> $subtotal, \"transaction_history_status\" => 1, \"updated_at\" => now(), \"created_at\" => now(),\n-                   \n-                ];\n-            }\n+          \n             $mysession_id = Session::get(\"id_user\");\n             $mytransaction = Transaction::create( [\n                 'id_user'                    => $mysession_id,\n                 'total_price'                => $hasil,\n"
                },
                {
                    "date": 1719248596761,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -105,8 +105,9 @@\n     public function checkout(){\n         date_default_timezone_set('Asia/Jakarta');\n         $status_login = \"belum\";\n         $id_transaction = \"-\";\n+        $jumlah_semua = 0;\n         if(!empty(Session::has('user'))){\n             $status_login = \"login\";\n             $hasil = 0;\n             $jumlahitems = 0;\n"
                },
                {
                    "date": 1719248607693,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -112,8 +112,9 @@\n             $hasil = 0;\n             $jumlahitems = 0;\n             \n             if(!empty(Session::has('product'))){\n+                $jumlah_semua = 1;\n                 $mycarts = Session::get('product');\n                 foreach($mycarts as $i => $mycart){\n                     $list_myitem = explode(\"_\",$mycarts[$i]);\n                     $id_item = $list_myitem[0];\n@@ -131,8 +132,9 @@\n                    \n                 }\n             }\n             if(!empty(Session::has('variantproduct'))){\n+                $jumlah_semua = 1;\n                 $mycart_variants = Session::get('variantproduct');\n                 foreach($mycart_variants as $i => $mycart_variant){\n                     $list_myitem = explode(\"_\",$mycart_variants[$i]);\n                     $id_item = $list_myitem[0];\n"
                },
                {
                    "date": 1719248659805,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -168,26 +168,30 @@\n                     ];\n                 }\n             }\n            \n-          \n-            $mysession_id = Session::get(\"id_user\");\n-            $mytransaction = Transaction::create( [\n-                'id_user'                    => $mysession_id,\n-                'total_price'                => $hasil,\n-                'total_qty'                  => $jumlahitems,\n-                'updated_at'                 => now(),\n-                'created_at'                 => now(),\n-                'transaction_status'         => 1,\n-            ]);\n-            foreach($data_detail as $key => $item){\n-                $data_detail[$key]['id_transaction'] = $mytransaction->id;\n+            if($jumlah_semua == 1){\n+\n+                $mysession_id = Session::get(\"id_user\");\n+                $mytransaction = Transaction::create( [\n+                    'id_user'                    => $mysession_id,\n+                    'total_price'                => $hasil,\n+                    'total_qty'                  => $jumlahitems,\n+                    'updated_at'                 => now(),\n+                    'created_at'                 => now(),\n+                    'transaction_status'         => 1,\n+                ]);\n+                foreach($data_detail as $key => $item){\n+                    $data_detail[$key]['id_transaction'] = $mytransaction->id;\n+                }\n+                $id_transaction = $mytransaction->id;\n+                TransactionHistory::insert($data_detail);\n+                Session::forget(\"product\");\n+                Session::forget(\"variantproduct\");\n             }\n-            $id_transaction = $mytransaction->id;\n-            TransactionHistory::insert($data_detail);\n+           \n         }\n-        Session::forget(\"product\");\n-        Session::forget(\"variantproduct\");\n+     \n         \n    \n         return response()->json(['status_login' => $status_login, \"id_transaksi\" => $id_transaction]);\n        \n"
                },
                {
                    "date": 1719248682005,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -169,9 +169,8 @@\n                 }\n             }\n            \n             if($jumlah_semua == 1){\n-\n                 $mysession_id = Session::get(\"id_user\");\n                 $mytransaction = Transaction::create( [\n                     'id_user'                    => $mysession_id,\n                     'total_price'                => $hasil,\n@@ -186,15 +185,19 @@\n                 $id_transaction = $mytransaction->id;\n                 TransactionHistory::insert($data_detail);\n                 Session::forget(\"product\");\n                 Session::forget(\"variantproduct\");\n+                return response()->json(['status_login' => $status_login, \"id_transaksi\" => $id_transaction]);\n             }\n+            else{\n+                return response()->json(['status_login' => $status_login, \"id_transaksi\" => $id_transaction]);\n+            }\n            \n         }\n      \n         \n    \n-        return response()->json(['status_login' => $status_login, \"id_transaksi\" => $id_transaction]);\n+  \n        \n     }\n     public function listcart(){\n         \n"
                },
                {
                    "date": 1719248692453,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -188,9 +188,9 @@\n                 Session::forget(\"variantproduct\");\n                 return response()->json(['status_login' => $status_login, \"id_transaksi\" => $id_transaction]);\n             }\n             else{\n-                return response()->json(['status_login' => $status_login, \"id_transaksi\" => $id_transaction]);\n+                return response()->json(['status_login' => $status_login, \"id_transaksi\" => \"-\"]);\n             }\n            \n         }\n      \n"
                },
                {
                    "date": 1719248710039,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -188,8 +188,9 @@\n                 Session::forget(\"variantproduct\");\n                 return response()->json(['status_login' => $status_login, \"id_transaksi\" => $id_transaction]);\n             }\n             else{\n+                $status_login = \"kosong\";\n                 return response()->json(['status_login' => $status_login, \"id_transaksi\" => \"-\"]);\n             }\n            \n         }\n"
                },
                {
                    "date": 1719248854510,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -158,8 +158,9 @@\n                         \"image\" => $images_produk,\n                         \"qty\" => $qty_items\n                     ];\n                     $jumlahitems += $qty_items;\n+                    $subtotal = $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                     $hasil += $qty_items * ($prices_produk-(($prices_produk*$discount_produk)/100));\n                     \n                     \n                     $data_detail[] = [\n"
                },
                {
                    "date": 1719250862609,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -194,8 +194,11 @@\n                 return response()->json(['status_login' => $status_login, \"id_transaksi\" => \"-\"]);\n             }\n            \n         }\n+        else{\n+            \n+        }\n      \n         \n    \n   \n"
                },
                {
                    "date": 1719250872217,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -195,9 +195,9 @@\n             }\n            \n         }\n         else{\n-            \n+            return response()->json(['status_login' => $status_login, \"id_transaksi\" => \"-\"]);\n         }\n      \n         \n    \n"
                },
                {
                    "date": 1719552576190,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -56,9 +56,9 @@\n             foreach($mycart_variants as $i => $mycart_variant){\n                 $list_myitem = explode(\"_\",$mycart_variants[$i]);\n                 $id_item = $list_myitem[0];\n                 $qty_items = $list_myitem[1];\n-                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\" )->get();\n+                $search_produk = ProductVariant::join(\"product\",\"product_variant.id_product\" , \"=\", \"product.id\")->where(\"product_variant.id\", \"=\",$id_item)->select(\"product.names as nama_product\",\"product.descriptions as description_product\", \"product.images as images_product\", \"product_variant.descriptions as nama_variant\", \"product_variant.prices as harga_variant\" , \"product_variant.discounts as discount_variant\", \"product_variant.images_variant\" )->get();\n                 $name_produk = $search_produk[0]['nama_product'];\n                 $name_variant = $search_produk[0]['nama_variant'];\n                 $prices_produk = $search_produk[0]['harga_variant'];\n                 $description_produk = $search_produk[0]['description_product'];\n"
                },
                {
                    "date": 1719552589635,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -62,9 +62,9 @@\n                 $name_variant = $search_produk[0]['nama_variant'];\n                 $prices_produk = $search_produk[0]['harga_variant'];\n                 $description_produk = $search_produk[0]['description_product'];\n                 $discount_produk = $search_produk[0]['discount_variant'];\n-                $images_produk = $search_produk[0]['images_product'];\n+                $images_produk = $search_produk[0]['images_variant'];\n                 $mycart_list[] = [\n                     \"index\"=>$i,\n                     \"category\"=>\"v\",\n                     \"name\" =>$name_produk,\n"
                },
                {
                    "date": 1720888492035,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,9 +22,9 @@\n         $mycart_list = [];\n         $mycart = [];\n         $hasil = 0;\n         $jumlahitems = 0;\n-        if(Session::get('product')){\n+        if(Session::has('product')){\n             $mycarts = Session::get('product');\n             foreach($mycarts as $i => $mycart){\n                     $list_myitem = explode(\"_\",$mycarts[$i]);\n                     $id_item = $list_myitem[0];\n"
                },
                {
                    "date": 1720889433518,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -50,9 +50,9 @@\n                     $hasil += $qty_item * ($prices_produk-(($prices_produk*$discount_produk)/100));\n             }\n         }\n         $mycart_variants = [];\n-        if(Session::get('variantproduct')){\n+        if(Session::has('variantproduct')){\n             $mycart_variants = Session::get('variantproduct');\n             foreach($mycart_variants as $i => $mycart_variant){\n                 $list_myitem = explode(\"_\",$mycart_variants[$i]);\n                 $id_item = $list_myitem[0];\n@@ -90,15 +90,20 @@\n \n         if($category_delete == \"p\"){\n             $products[] =  Session::get('product');\n             unset($products[$index_delete]);\n-            session()->put('product', $products);\n+            if(count(Session::get('product'))> 0){\n+                session()->put('product', $products);\n+            }\n+          \n         }\n         else{\n             // Second argument is a default value\n             $variant_products[] =  Session::get('variantproduct');\n             unset($variant_products[$index_delete]);\n-            session()->put('variantproduct', $variant_products);\n+            if(count(Session::get('variantproduct'))> 0){\n+                session()->put('variantproduct', $variant_products);\n+            }\n         }  \n         return response()->json(['status_delete' => \"ok\"]);\n      \n     }\n"
                },
                {
                    "date": 1720889593918,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -90,20 +90,20 @@\n \n         if($category_delete == \"p\"){\n             $products[] =  Session::get('product');\n             unset($products[$index_delete]);\n-            if(count(Session::get('product'))> 0){\n+            // if(count(Session::get('product'))> 0){\n                 session()->put('product', $products);\n-            }\n+            // }\n           \n         }\n         else{\n             // Second argument is a default value\n             $variant_products[] =  Session::get('variantproduct');\n             unset($variant_products[$index_delete]);\n-            if(count(Session::get('variantproduct'))> 0){\n+            // if(count(Session::get('variantproduct'))> 0){\n                 session()->put('variantproduct', $variant_products);\n-            }\n+            // }\n         }  \n         return response()->json(['status_delete' => \"ok\"]);\n      \n     }\n"
                },
                {
                    "date": 1720889643943,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -90,20 +90,20 @@\n \n         if($category_delete == \"p\"){\n             $products[] =  Session::get('product');\n             unset($products[$index_delete]);\n-            // if(count(Session::get('product'))> 0){\n+            if(count(Session::get('product'))> 0){\n                 session()->put('product', $products);\n-            // }\n+            }\n           \n         }\n         else{\n             // Second argument is a default value\n             $variant_products[] =  Session::get('variantproduct');\n             unset($variant_products[$index_delete]);\n-            // if(count(Session::get('variantproduct'))> 0){\n+            if(count(Session::get('variantproduct'))> 0){\n                 session()->put('variantproduct', $variant_products);\n-            // }\n+            }\n         }  \n         return response()->json(['status_delete' => \"ok\"]);\n      \n     }\n"
                }
            ],
            "date": 1719133258940,
            "name": "Commit-0",
            "content": "<?php\n\nnamespace App\\Http\\Controllers;\n\nuse Illuminate\\Http\\Request;\n\nclass CartController extends Controller\n{\n    /**\n     * Display a listing of the resource.\n     *\n     * @return \\Illuminate\\Http\\Response\n     */\n    public function index()\n    {\n        //\n    }\n   \n    /**\n     * Show the form for creating a new resource.\n     *\n     * @return \\Illuminate\\Http\\Response\n     */\n    public function create()\n    {\n        //\n    }\n\n    /**\n     * Store a newly created resource in storage.\n     *\n     * @param  \\Illuminate\\Http\\Request  $request\n     * @return \\Illuminate\\Http\\Response\n     */\n    public function store(Request $request)\n    {\n        //\n    }\n\n    /**\n     * Display the specified resource.\n     *\n     * @param  int  $id\n     * @return \\Illuminate\\Http\\Response\n     */\n    public function show($id)\n    {\n        //\n    }\n\n    /**\n     * Show the form for editing the specified resource.\n     *\n     * @param  int  $id\n     * @return \\Illuminate\\Http\\Response\n     */\n    public function edit($id)\n    {\n        //\n    }\n\n    /**\n     * Update the specified resource in storage.\n     *\n     * @param  \\Illuminate\\Http\\Request  $request\n     * @param  int  $id\n     * @return \\Illuminate\\Http\\Response\n     */\n    public function update(Request $request, $id)\n    {\n        //\n    }\n\n    /**\n     * Remove the specified resource from storage.\n     *\n     * @param  int  $id\n     * @return \\Illuminate\\Http\\Response\n     */\n    public function destroy($id)\n    {\n        //\n    }\n}"
        }
    ]
}